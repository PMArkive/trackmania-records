(this["webpackJsonptrackmania-records"]=this["webpackJsonptrackmania-records"]||[]).push([[0],{191:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(16),i=a.n(c),o=a(152),l=a(8),s=a(53),d=a(63),j=a(276),u=a(136),b=a(275),h=a(112),f=a(113),m=a(151),O=a(255),x=a(254),p=a(34),g=a(155),y=a(282),v=a(192),k=a(257),w=a(247),D=a(193),S=a(251),C=a(286),B=a(256),T=a(72),N=a(143),A=a.n(N),L=a(287),M=a(153),_=a(248),E=a(285),z=a(141),P=a.n(z),R=a(43),I=a.n(R),U=a(88),q=a(82),Y=a(83),W=function(){function e(){Object(q.a)(this,e),this.baseApi="https://raw.githubusercontent.com/NeKzBot/tmx-records/api"}return Object(Y.a)(e,[{key:"request",value:function(){var e=Object(U.a)(I.a.mark((function e(t,a){var r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.baseApi,"/").concat(t,"/").concat(a||"latest",".json"));case 2:if(r=e.sent,console.log("GET ".concat(r.url," (").concat(r.status,")")),r.ok){e.next=6;break}throw r;case 6:return e.next=8,r.json();case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()}]),e}(),F=new(function(){function e(){Object(q.a)(this,e),this.baseApi="https://api.nekz.me",this.options={credentials:"include"}}return Object(Y.a)(e,[{key:"loginStart",value:function(e){window.open("".concat(this.baseApi,"/login/").concat(e),"_self")}},{key:"login",value:function(){var e=Object(U.a)(I.a.mark((function e(t,a){var r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.baseApi,"/login/").concat(t,"/authorize").concat(a),this.options);case 2:if(r=e.sent,console.log("[API] GET ".concat(r.url," (").concat(r.status,")")),r.ok){e.next=6;break}throw r;case 6:return e.next=8,r.json();case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=Object(U.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.baseApi,"/logout"),this.options);case 2:if(t=e.sent,console.log("[API] GET ".concat(t.url," (").concat(t.status,")")),t.ok){e.next=6;break}throw t;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getMe",value:function(){var e=Object(U.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.baseApi,"/@me"),this.options);case 2:if(t=e.sent,console.log("[API] GET ".concat(t.url," (").concat(t.status,")")),t.ok){e.next=6;break}throw t;case 6:return e.next=8,t.json();case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"replayUrl",value:function(e){return"".concat(this.baseApi,"/api/v1/trackmania/replays/").concat(e)}},{key:"getUsers",value:function(){var e=Object(U.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.baseApi,"/api/v1/users"),this.options);case 2:if(t=e.sent,console.log("[API] GET ".concat(t.url," (").concat(t.status,")")),t.ok){e.next=6;break}throw t;case 6:return e.next=8,t.json();case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}()),G=new W,H=a(1),X=Object(u.a)((function(e){return{root:{paddingRight:"10px"},avatar:{width:"35px",height:"35px",color:e.palette.text.primary,backgroundColor:e.palette.primary.contrastText}}})),Z={vertical:"bottom",horizontal:"center"},J={vertical:"top",horizontal:"center"},K=function(e){var t=e.user,a=e.onClickLogin,r=e.onClickLogout,c=n.a.useState(null),i=Object(l.a)(c,2),o=i[0],d=i[1],j=function(){d(null)},u=X(),b=Boolean(o);return Object(H.jsxs)("div",{className:u.root,children:[Object(H.jsx)(E.a,{placement:"bottom",title:t.isLoggedIn()?"Logged in as "+t.profile.nickname:"Log in",disableFocusListener:!0,children:Object(H.jsx)(v.a,{color:"inherit",size:"small",onClick:function(e){t.isLoggedIn()?d(e.currentTarget):a(e)},children:t.isLoggedIn()?Object(H.jsx)(L.a,{className:u.avatar,alt:"avatar_image",color:"secondary",children:t.profile.nickname.slice(0,3).toUpperCase()}):Object(H.jsx)(P.a,{})})}),Object(H.jsxs)(M.a,{id:"menu-appbar",elevation:0,getContentAnchorEl:null,anchorEl:o,anchorOrigin:Z,transformOrigin:J,open:b,onClose:j,children:[Object(H.jsx)(_.a,{onClick:j,component:s.b,to:"me",children:"Profile"}),Object(H.jsx)(_.a,{onClick:function(){r(),j()},children:"Logout"})]})]})},V=function(){var e=n.a.useRef(!1);return n.a.useEffect((function(){return e.current=!0,function(){return e.current=!1}}),[]),e},$=function(e,t){var a=n.a.useState((function(){var a=localStorage.getItem(e);if(a)try{return JSON.parse(a)}catch(r){}return localStorage.setItem(e,JSON.stringify(t)),t})),r=Object(l.a)(a,2),c=r[0],i=r[1];return[c,n.a.useCallback((function(t){i(t),localStorage.setItem(e,JSON.stringify(t))}),[i])]},Q=a(7),ee=function(){function e(){Object(q.a)(this,e),this.profile=null,this.profile=null}return Object(Y.a)(e,[{key:"hasLoaded",value:function(){return this.profile}},{key:"isLoggedIn",value:function(){return this.profile&&!this.profile.error}},{key:"setProfile",value:function(e){return this.profile=e,this}},{key:"hasPermission",value:function(e){var t;return((null===(t=this.profile)||void 0===t?void 0:t.permissions)&e)>0}}]),e}(),te=function(){function e(){Object(q.a)(this,e),this.enabled="true"===localStorage.getItem("dark_mode")}return Object(Y.a)(e,[{key:"toggle",value:function(){return this.enabled=!this.enabled,localStorage.setItem("dark_mode",this.enabled.toString()),this}}]),e}(),ae={user:new ee,darkMode:new te,users:[]},re=[function(e,t){var a=t.action,r=t.data;switch(a){case"setProfile":return Object(Q.a)(Object(Q.a)({},e),{},{user:e.user.setProfile(r)});case"setUsers":return Object(Q.a)(Object(Q.a)({},e),{},{users:r||[]});case"toggleDarkMode":return Object(Q.a)(Object(Q.a)({},e),{},{darkMode:e.darkMode.toggle()});default:throw new Error("Unknown action type.")}},ae],ne=n.a.createContext(ae),ce=a(250),ie=a(252),oe=a(253),le=a(249),se=function(e){var t=e.onClose,a=e.open,r=function(){t()},n=function(e){t(e)};return Object(H.jsxs)(le.a,{onClose:r,"aria-labelledby":"simple-dialog-title",open:a,maxWidth:"sm",fullWidth:!0,children:[Object(H.jsx)(ce.a,{id:"simple-dialog-title",children:"Login with"}),Object(H.jsxs)(w.a,{children:[Object(H.jsx)(D.a,{autoFocus:!0,button:!0,onClick:function(){return n("trackmania")},children:Object(H.jsx)(S.a,{primary:"Trackmania (Ubisoft Connect)"})}),Object(H.jsx)(D.a,{autoFocus:!0,button:!0,onClick:function(){return n("maniaplanet")},children:Object(H.jsx)(S.a,{primary:"Trackmania\xb2 (Maniaplanet)"})})]}),Object(H.jsx)(ie.a,{children:Object(H.jsx)(oe.a,{autoFocus:!0,onClick:r,color:"primary",children:"Cancel"})})]})},de={ACTIVE:0,INACTIVE:1,BANNED:2},je={api_MANAGE_USERS:1,api_MANAGE_DATA:2,trackmania_DOWNLOAD_FILES:32,trackmania_MANAGE_MEDIA:64,trackmania_MANAGE_DATA:128,maniaplanet_DOWNLOAD_FILES:1024,maniaplanet_MANAGE_MEDIA:2048,maniaplanet_MANAGE_DATA:4096},ue=Object(u.a)((function(e){return{root:{paddingBottom:e.spacing(8)},list:{width:e.spacing(25)},menuButton:{marginLeft:-12,marginRight:20},drawer:{width:240,flexShrink:0},appBar:{zIndex:e.zIndex.drawer+1},flex:{flex:1},active:{color:e.palette.primary.main}}})),be=[{title:"404 - Page Not Found",link:null,inDrawer:!1},{title:"trackmania-records",link:"/",inDrawer:!1},{title:"Trackmania",link:"/trackmania",inDrawer:!0,default:!0},{title:"Trackmania 2",link:"/tm2",inDrawer:!0,default:!0},{title:"Trackmania Wii",link:"/tmwii",inDrawer:!0,default:!0},{title:"Nations Forever",link:"/tmnforever",inDrawer:!0},{title:"United",link:"/united",inDrawer:!0},{title:"Nations ESWC",link:"/nations",inDrawer:!0},{isDivider:!0},{title:"Users",link:"/users",inDrawer:function(e){return e.isLoggedIn()&&e.profile.permissions&je.api_MANAGE_USERS}},{title:"Replay Inspection",link:"/replay",inDrawer:!0},{title:"About",link:"/about",inDrawer:!0},{title:"Login",link:"/login",inDrawer:!1},{title:"Profile",link:"/me",inDrawer:!1}],he=Object(d.j)((function(e){var t=e.location,a=n.a.useContext(ne),r=a.state.user,c=a.dispatch,i=Object(d.g)(),o=n.a.useState(!1),j=Object(l.a)(o,2),u=j[0],b=j[1],h=n.a.useState(!1),f=Object(l.a)(h,2),m=f[0],N=f[1];n.a.useEffect((function(){F.getMe().then((function(e){return c({action:"setProfile",data:e})})).catch(console.error)}),[]);var L,M=n.a.useMemo((function(){return be.find((function(e){return e.link===t.pathname||null!==e.link&&t.pathname.startsWith(e.link+"/")}))||be[0]}),[t]);L=M.title,n.a.useEffect((function(){document.title=L+" - "+document.location.host}),[L]);var _=function(e){return function(){b(e)}},E=ue(),z=Object(H.jsxs)("div",{className:E.list,children:[Object(H.jsx)(w.a,{children:Object(H.jsx)(D.a,{button:!0,component:s.b,to:"/",children:Object(H.jsx)(S.a,{primary:"Trackmania Records"})},0)}),Object(H.jsx)(x.a,{}),Object(H.jsx)(w.a,{children:be.filter((function(e){return"function"===typeof e.inDrawer?e.inDrawer(r):e.inDrawer||e.isDivider})).map((function(e,t){return e.isDivider?Object(H.jsx)(x.a,{},t):Object(H.jsx)(D.a,{button:!0,component:s.b,to:e.link,className:e.title===M.title?E.active:void 0,children:Object(H.jsx)(S.a,{primary:e.title})},t)}))})]});return Object(H.jsxs)("div",{className:E.root,children:[Object(H.jsx)(O.a,{className:E.appBar,position:"fixed",children:Object(H.jsxs)(B.a,{children:[Object(H.jsx)(y.a,{lgUp:!0,children:Object(H.jsx)(v.a,{className:E.menuButton,onClick:_(!0),color:"inherit",children:Object(H.jsx)(A.a,{})})}),Object(H.jsx)(T.a,{variant:"h6",color:"inherit",children:Object(H.jsx)(k.a,{component:s.b,to:"/",color:"inherit",underline:"none",children:M.title})}),Object(H.jsx)("div",{className:E.flex}),Object(H.jsx)(g.a,{in:!0,timeout:1e3,children:Object(H.jsx)(K,{user:r,onClickLogin:function(){N(!0)},onClickLogout:function(){F.logout().then((function(){c({action:"setProfile",data:null}),i.replace("/")})).catch(console.error),N(!1)}})})]})}),Object(H.jsx)(y.a,{lgUp:!0,implementation:"css",children:Object(H.jsx)(C.a,{open:u,onClose:_(!1),onOpen:_(!0),variant:"temporary",children:Object(H.jsx)("div",{tabIndex:0,role:"button",onClick:_(!1),onKeyDown:_(!1),children:z})})}),Object(H.jsx)(y.a,{mdDown:!0,implementation:"css",children:Object(H.jsx)(p.a,{variant:"permanent",children:Object(H.jsx)("div",{tabIndex:0,role:"button",children:z})})}),Object(H.jsx)(se,{onClose:function(e){e?F.loginStart(e):N(!1)},open:m})]})})),fe=a(14),me=a.n(fe),Oe=a(260),xe=a(266),pe=a(265),ge=a(154),ye=a(267),ve=a(261),ke=a(264),we=a(259),De=a(262),Se=a(263),Ce=a(258),Be=Object(u.a)((function(e){return{root:{marginBottom:30}}})),Te=function(e){var t=e.children,a=Be();return Object(H.jsxs)(Ce.a,{className:a.root,container:!0,children:[Object(H.jsx)(Ce.a,{item:!0,xs:!1,md:1,lg:2}),Object(H.jsx)(Ce.a,{item:!0,xs:12,md:10,lg:9,children:t})]})},Ne=Object(u.a)((function(e){return{aboutBox:{padding:e.spacing(3)}}})),Ae=[{repo:"NeKzor/trackmania-records",branch:"master"},{repo:"NeKzBot/tmx-records",branch:"api"},{repo:"NeKzor/trackmania-records",branch:"gh-pages"}],Le={whiteSpace:"nowrap"},Me=function(e){return Object(H.jsx)(we.a,Object(Q.a)({size:"small"},e))},_e=function(){return Object(H.jsx)("div",{style:{paddingTop:"50px"}})},Ee=function(){return Object(H.jsx)("div",{style:{paddingTop:"25px"}})},ze=function(){var e=V(),t=n.a.useContext(ne),a=t.state.darkMode,r=t.dispatch,c=n.a.useState([]),i=Object(l.a)(c,2),o=i[0],s=i[1];n.a.useEffect((function(){var t=function(t){console.error(t),e.current&&s(void 0)};Promise.all(Ae.map((function(e){var t=e.repo,a=e.branch;return fetch("https://api.github.com/repos/".concat(t,"/commits/").concat(a))}))).then((function(a){Promise.all(a.map((function(e){return e.json()}))).then((function(t){e.current&&s(t.map((function(e){return{sha:e.sha,author:e.author?e.author:e.commit.author,message:e.commit.message,date:e.commit.author.date}})))})).catch(t)})).catch(t)}),[e]);var d=Ne();return Object(H.jsx)(Te,{children:Object(H.jsxs)(ge.a,{className:d.aboutBox,children:[Object(H.jsx)(T.a,{component:"h2",variant:"h5",children:"Trackmania Campaign Records & Statistics"}),Object(H.jsx)(Ee,{}),Object(H.jsx)(T.a,{variant:"body1",children:"The largest mirror for campaign world records of many Trackmania games."}),Object(H.jsx)(T.a,{variant:"body1",children:"We list, rank and compare players who set the fastest runs."}),Object(H.jsx)(_e,{}),Object(H.jsx)(T.a,{variant:"h5",children:"News"}),Object(H.jsx)("div",{children:Object(H.jsxs)("ul",{children:[Object(H.jsx)("li",{children:"User Authentication via Ubisoft/Maniaplanet!! Right now it's probably useless for you since there are almost no benefits when logged in."}),Object(H.jsx)("li",{children:"Download button to public replays has been removed for older records because they might not be available anymore. Instead we provide backups from our servers. This service requires permission from us!"})]})}),Object(H.jsx)(_e,{}),Object(H.jsx)(T.a,{variant:"h5",children:"Changelog"}),Object(H.jsx)(Ee,{}),void 0===o?Object(H.jsx)(T.a,{variant:"body1",children:"Unable to fetch status from GitHub."}):0===o.length?Object(H.jsx)(Oe.a,{className:d.progress}):Object(H.jsx)("div",{style:{overflowX:"auto"},children:Object(H.jsxs)(ve.a,{size:"small",children:[Object(H.jsx)(De.a,{children:Object(H.jsxs)(Se.a,{children:[Object(H.jsx)(we.a,{padding:"default",children:Object(H.jsx)(T.a,{variant:"body1",children:"Branch"})}),Object(H.jsx)(we.a,{padding:"default",children:Object(H.jsx)(T.a,{variant:"body1",children:"Date"})}),Object(H.jsx)(we.a,{padding:"default",children:Object(H.jsx)(T.a,{variant:"body1",children:"Author"})}),Object(H.jsx)(we.a,{padding:"default",children:Object(H.jsx)(T.a,{variant:"body1",children:"Commit"})})]})}),Object(H.jsx)(ke.a,{children:o.map((function(e,t){var a=Ae[t],r=a.repo,n=a.branch;return Object(H.jsxs)(Se.a,{tabIndex:-1,style:Le,children:[Object(H.jsx)(Me,{align:"left",children:Object(H.jsx)(k.a,{color:"inherit",rel:"noopener",href:"https://github.com/".concat(r,"/tree/").concat(n),children:n})}),Object(H.jsx)(Me,{align:"left",style:Le,children:Object(H.jsx)(E.a,{title:me()(e.date).toString(),children:Object(H.jsx)("span",{children:me()(e.date).from()})})}),Object(H.jsx)(Me,{align:"left",children:e.author.html_url?Object(H.jsx)(k.a,{color:"inherit",rel:"noopener",href:e.author.html_url,children:e.author.login}):e.author.name||"n/a"}),Object(H.jsx)(Me,{align:"left",style:Le,children:Object(H.jsx)(E.a,{title:e.message,children:Object(H.jsx)(k.a,{color:"inherit",rel:"noopener",href:"https://github.com/".concat(r,"/commit/").concat(e.sha),children:e.sha})})})]},t)}))})]})}),Object(H.jsx)(_e,{}),Object(H.jsx)(T.a,{variant:"h5",children:"Theme Settings"}),Object(H.jsx)(Ee,{}),Object(H.jsx)(pe.a,{row:!0,children:Object(H.jsx)(xe.a,{control:Object(H.jsx)(ye.a,{checked:a.enabled,onChange:function(){r({action:"toggleDarkMode"})},color:"primary"}),label:"Dark Mode"})}),Object(H.jsx)(_e,{}),Object(H.jsx)(T.a,{variant:"h5",children:"Sources"}),Object(H.jsx)(Ee,{}),Object(H.jsx)("div",{children:"prod.trackmania.core.nadeo.online"}),Object(H.jsx)("div",{children:"live-services.trackmania.nadeo.live"}),Object(H.jsx)("div",{children:"competition.trackmania.nadeo.club"}),Object(H.jsx)("div",{children:Object(H.jsx)(k.a,{rel:"noopener",href:"https://www.tm-exchange.com",children:"tm-exchange.com"})}),Object(H.jsx)("div",{children:Object(H.jsx)(k.a,{rel:"noopener",href:"https://tm.mania-exchange.com",children:"tm.mania-exchange.com"})}),Object(H.jsx)("div",{children:Object(H.jsx)(k.a,{rel:"noopener",href:"https://www.speedrun.com/tmwii",children:"speedrun.com/tmwii"})})]})})},Pe=a(41),Re=a(81),Ie=a(278),Ue=a(271),qe=a(272),Ye=a(280),We=a(288),Fe={numeric:!0},Ge=function(e,t,a){var r=function(e,t){var r=Ze(e,a).toString();return Ze(t,a).toString().localeCompare(r,void 0,Fe)},n="desc"===t?function(e,t){return r(e,t)}:function(e,t){return-r(e,t)};return e.map((function(e,t){return[e,t]})).sort((function(e,t){var a=n(e[0],t[0]);return 0!==a?a:e[1]-t[1]})).map((function(e){return e[0]}))},He=function(e,t,a,r){if(a===r||void 0===r)return Ge(e,t,a);var n=function(e,t){var n=Ze(e,a).toString(),c=Ze(t,a).toString(),i=c.localeCompare(n,void 0,Fe);return 0!==i?i:(n=Ze(e,r).toString(),(c=Ze(t,r).toString()).localeCompare(n,void 0,Fe))},c="desc"===t?function(e,t){return n(e,t)}:function(e,t){return-n(e,t)};return e.map((function(e,t){return[e,t]})).sort((function(e,t){var a=c(e[0],t[0]);return 0!==a?a:e[1]-t[1]})).map((function(e){return e[0]}))},Xe={},Ze=function(e,t){return(-1!==t.indexOf(".")?t.split(".").filter((function(e){return e})).reduce((function(e,t){return e&&e[t]}),e):e[t])||Xe},Je=function(e){return["nations","sunrise","original"].includes(e)?"http":"https"},Ke=function(e){return"tm2"===e?{trackUrl:function(e){return"https://tm.mania-exchange.com/tracks/".concat(e)},imageUrl:function(e){return"https://tm.mania-exchange.com/tracks/screenshot/normal/".concat(e)},replayUrl:function(e){return"https://tm.mania-exchange.com/replays/download/".concat(e)},userUrl:function(e){return"https://tm.mania-exchange.com/user/profile/".concat(e)}}:"tmwii"===e?{trackUrl:function(e){return"https://speedrun.com/tmwii/".concat(e)},imageUrl:function(e){},replayUrl:function(e){},userUrl:function(e){return"https://www.speedrun.com/user/".concat(e)}}:{trackUrl:function(t){return"".concat(Je(e),"://").concat(e,".tm-exchange.com/main.aspx?action=trackshow&id=").concat(t)},imageUrl:function(t){return"".concat(Je(e),"://").concat(e,".tm-exchange.com/getclean.aspx?action=trackscreenscreens&id=").concat(t)},replayUrl:function(t){return"".concat(Je(e),"://").concat(e,".tm-exchange.com/get.aspx?action=recordgbx&id=").concat(t)},userUrl:function(t){return"".concat(Je(e),"://").concat(e,".tm-exchange.com/main.aspx?action=usershow&id=").concat(t)}}},Ve=[{id:"user.name",sortable:!1,label:"Player",align:"left"},{id:"wrs",id2:"duration",sortable:!0,label:"World Records",align:"left"},{id:"duration",id2:"wrs",sortable:!0,label:"Total Duration",align:"left"}],$e=function(e){var t=e.order,a=e.orderBy,r=e.onRequestSort,n=e.hasDuration;return Object(H.jsx)(De.a,{children:Object(H.jsx)(Se.a,{children:(n?Ve:Ve.slice(0,-1)).map((function(e){return Object(H.jsxs)(we.a,{align:e.align,padding:"default",sortDirection:a===e.id&&t,children:[!0===e.sortable&&Object(H.jsx)(E.a,{title:"Sort by "+e.label,placement:"bottom-start",enterDelay:300,children:Object(H.jsx)(We.a,{active:a===e.id,direction:t,onClick:(n=e.id,c=e.id2,function(e){r(e,n,c)}),children:e.label})}),!1===e.sortable&&e.label]},e.id);var n,c}))})})},Qe=Object(u.a)((function(e){return{root:{overflowX:"auto"}}})),et={order:"desc",orderBy:"wrs",thenBy:"duration",page:0,rowsPerPage:50},tt={whiteSpace:"nowrap"},at={padding:"7px 0px 7px 16px"},rt=function(e){return Object(H.jsx)(we.a,Object(Q.a)({style:at},e))},nt=function(e){var t=e.data,a=e.game,r=e.hasDuration,c=n.a.useState(et),i=Object(l.a)(c,2),o=i[0],s=o.order,d=o.orderBy,j=o.thenBy,u=o.rowsPerPage,b=o.page,h=i[1],f=Qe();return Object(H.jsx)("div",{className:f.root,children:Object(H.jsxs)(ve.a,{size:"small",children:[Object(H.jsx)($e,{order:s,orderBy:d,onRequestSort:function(e,t,a){var r=t,n=a;h((function(e){return Object(Q.a)(Object(Q.a)({},e),{},{order:e.orderBy===r&&"desc"===e.order?"asc":"desc",orderBy:r,thenBy:n})}))},hasDuration:r}),Object(H.jsx)(ke.a,{children:(r?He:Ge)(t,s,d,j).slice(b*u,b*u+u).map((function(e){return Object(H.jsxs)(Se.a,{tabIndex:-1,children:[Object(H.jsx)(rt,{align:"left",children:Object(H.jsx)(k.a,{style:tt,color:"inherit",href:Ke(a).userUrl(e.user.id),rel:"noreferrer",target:"_blank",children:e.user.name})}),Object(H.jsx)(rt,{align:"left",children:e.wrs}),r&&Object(H.jsxs)(rt,{align:"left",children:[e.duration," day",1===e.duration?"":"s"]})]},e.user.id)}))})]})})},ct=a(15),it=a.n(ct),ot=a(108),lt=a.n(ot),st=a(277);function dt(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;if(void 0===e||null===e)return e;if("Stunts"===a)return e+" pts.";if("tm2"!==t){var r=(e/=10)%100,n=Math.floor(e/100),c=n%60,i=Math.floor(n/60);return(i>0?i+":":"")+(c<10&&i>0?"0"+c:c)+"."+(r<10?"0"+r:r)}var o=e%1e3,l=Math.floor(e/1e3),s=l%60,d=Math.floor(l/60);return(d>0?d+":":"")+(s<10&&d>0?"0"+s:s)+"."+(o<100?o<10?"00"+o:"0"+o:o)}var jt=Object(st.a)().domain([0,24,336,1440]).range(["#2eb82e","#258e25","#cca300","#e67300"]);function ut(e){var t=me()().diff(me()(e),"hours");return t<=1440?jt(t):void 0}var bt=Object(st.a)().domain([0,480,960,1440]).range(["#2eb82e","#cca300","#e67300","#e63200"]);for(var ht=[{id:"track.name",sortable:!0,label:"Track",align:"left"},{id:"score",sortable:!0,label:"Record",align:"left"},{id:"user.name",sortable:!0,label:"Player",align:"left"},{id:"date",sortable:!0,label:"Date",align:"left"},{id:"duration",sortable:!0,label:"Duration",align:"left"}],ft=function(e){var t=e.order,a=e.orderBy,r=e.onRequestSort;return Object(H.jsx)(De.a,{children:Object(H.jsx)(Se.a,{children:ht.map((function(e){return Object(H.jsxs)(we.a,{align:e.align,padding:"default",sortDirection:a===e.id&&t,children:[!0===e.sortable&&Object(H.jsx)(E.a,{title:"Sort by "+e.label,placement:"bottom-start",enterDelay:300,children:Object(H.jsx)(We.a,{active:a===e.id,direction:t,onClick:(n=e.id,function(e){r(e,n)}),children:e.label})}),!1===e.sortable&&e.label]},e.id);var n}))})})},mt=Object(u.a)((function(e){return{root:{overflowX:"auto"}}})),Ot={order:"asc",orderBy:"track.name",page:0,rowsPerPage:250},xt={whiteSpace:"nowrap"},pt={padding:"7px 0px 7px 16px"},gt=function(e){return Object(H.jsx)(we.a,Object(Q.a)({style:pt},e))},yt=function(e){var t=e.data,a=e.game,r=e.stats,c=e.useLiveDuration,i=n.a.useState(Ot),o=Object(l.a)(i,2),s=o[0],d=s.order,j=s.orderBy,u=s.rowsPerPage,b=s.page,h=o[1],f=Ke(a),m=mt();return Object(H.jsx)("div",{className:m.root,children:Object(H.jsxs)(ve.a,{size:"small",children:[Object(H.jsx)(ft,{order:d,orderBy:j,onRequestSort:function(e,t){var a=t;h((function(e){return Object(Q.a)(Object(Q.a)({},e),{},{order:e.orderBy===a&&"desc"===e.order?"asc":"desc",orderBy:a})}))}}),Object(H.jsx)(ke.a,{children:Ge(t,d,j).slice(b*u,b*u+u).map((function(e){var t=dt(e.score,a,e.track.type);return Object(H.jsxs)(Se.a,{tabIndex:-1,children:[(e.track.isFirst||"track.name"!==j)&&Object(H.jsx)(gt,{style:xt,rowSpan:"track.name"!==j?1:e.track.records,align:"left",children:Object(H.jsx)(k.a,{color:"inherit",href:f.trackUrl(e.track.id),rel:"noreferrer",target:"_blank",children:e.track.name})}),Object(H.jsxs)(gt,{align:"left",children:[Object(H.jsx)(E.a,{title:"Download Replay",placement:"bottom-end",enterDelay:300,children:Object(H.jsx)(k.a,{style:xt,color:"inherit",href:f.replayUrl(e.replay),rel:"noreferrer",target:"_blank",children:t})}),"tm2"===a&&me()(e.date).isBefore("2017-05-09")&&Object(H.jsx)(E.a,{title:"This run was done on an older game version.",placement:"bottom-end",enterDelay:300,children:Object(H.jsx)("span",{children:Object(H.jsx)(v.a,{size:"small",disabled:!0,children:Object(H.jsx)(lt.a,{fontSize:"inherit"})})})})]}),Object(H.jsx)(gt,{align:"left",children:Object(H.jsx)(k.a,{style:xt,color:"inherit",href:f.userUrl(e.user.id),rel:"noreferrer",target:"_blank",children:e.user.name})}),Object(H.jsx)(gt,{align:"left",children:Object(H.jsx)(E.a,{title:Object(H.jsx)(it.a,{fromNow:!0,children:e.date}),placement:"bottom-end",enterDelay:300,children:Object(H.jsx)(it.a,{style:Object(Q.a)({color:ut(e.date)},xt),format:"YYYY-MM-DD",children:e.date})})}),Object(H.jsx)(gt,{align:"left",children:Object(H.jsx)(E.a,{title:"in days",placement:"bottom-end",enterDelay:300,children:c?Object(H.jsx)(it.a,{style:xt,diff:e.date,unit:"days"}):Object(H.jsx)("span",{children:e.duration})})})]},"".concat(e.track.name,"-").concat(e.user.id))}))}),Object(H.jsxs)(ke.a,{children:[r.totalTime>0&&Object(H.jsxs)(Se.a,{children:[Object(H.jsx)(gt,{align:"right",children:"Total Time"}),Object(H.jsx)(gt,{children:Object(H.jsx)(E.a,{title:me.a.duration(r.totalTime,"ms").humanize(),placement:"bottom-end",enterDelay:300,children:Object(H.jsx)("span",{children:dt(r.totalTime,a)})})}),Object(H.jsx)(gt,{colSpan:3})]}),r.totalPoints>0&&Object(H.jsxs)(Se.a,{children:[Object(H.jsx)(gt,{align:"right",children:"Total Points"}),Object(H.jsx)(gt,{children:Object(H.jsx)("span",{children:dt(r.totalPoints,a,"Stunts")})}),Object(H.jsx)(gt,{colSpan:3})]})]})]})})},vt=a(148),kt=a.n(vt),wt=function(e,t){return"https://speedrun.com/tmwii/".concat(e,"#").concat(t)},Dt=function(e){return"https://www.speedrun.com/user/".concat(e)},St=function(e){return"https://www.speedrun.com/tmwii/run/".concat(e)},Ct=[{id:"track.name",sortable:!0,label:"Track",align:"left"},{id:"score",sortable:!0,label:"Record",align:"left"},{id:"user.name",sortable:!0,label:"Player",align:"left"},{id:"date",sortable:!0,label:"Date",align:"left"},{id:"duration",sortable:!0,label:"Duration",align:"left"},{id:"replay",sortable:!1,label:"Video",align:"left"}],Bt=function(e){var t=e.order,a=e.orderBy,r=e.onRequestSort;return Object(H.jsx)(De.a,{children:Object(H.jsx)(Se.a,{children:Ct.map((function(e){return Object(H.jsxs)(we.a,{align:e.align,padding:"default",sortDirection:a===e.id&&t,children:[!0===e.sortable&&Object(H.jsx)(E.a,{title:"Sort by "+e.label,placement:"bottom-start",enterDelay:300,children:Object(H.jsx)(We.a,{active:a===e.id,direction:t,onClick:(n=e.id,function(e){r(e,n)}),children:e.label})}),!1===e.sortable&&e.label]},e.id);var n}))})})},Tt=Object(u.a)((function(e){return{root:{overflowX:"auto"}}})),Nt={order:"asc",orderBy:"track.name",page:0,rowsPerPage:250},At={whiteSpace:"nowrap"},Lt={padding:"7px 0px 7px 16px"},Mt=function(e){return Object(H.jsx)(we.a,Object(Q.a)({style:Lt},e))},_t=function(e){var t=e.data,a=e.game,r=e.stats,c=e.useLiveDuration,i=e.category,o=n.a.useState(Nt),s=Object(l.a)(o,2),d=s[0],j=d.order,u=d.orderBy,b=d.rowsPerPage,h=d.page,f=s[1],m=Tt();return Object(H.jsx)("div",{className:m.root,children:Object(H.jsxs)(ve.a,{size:"small",children:[Object(H.jsx)(Bt,{order:j,orderBy:u,onRequestSort:function(e,t){var a=t;f((function(e){return Object(Q.a)(Object(Q.a)({},e),{},{order:e.orderBy===a&&"desc"===e.order?"asc":"desc",orderBy:a})}))}}),Object(H.jsx)(ke.a,{children:Ge(t,j,u).slice(h*b,h*b+b).map((function(e){return Object(H.jsxs)(Se.a,{tabIndex:-1,children:[(e.track.isFirst||"track.name"!==u)&&Object(H.jsx)(Mt,{style:At,rowSpan:"track.name"!==u?1:e.track.records,align:"left",children:Object(H.jsx)(k.a,{color:"inherit",href:wt(e.track.name,i),rel:"noreferrer",target:"_blank",children:e.track.name})}),Object(H.jsx)(Mt,{align:"left",children:Object(H.jsx)(k.a,{style:At,color:"inherit",href:St(e.id),rel:"noreferrer",target:"_blank",children:dt(e.score,a)})}),Object(H.jsx)(Mt,{align:"left",children:Object(H.jsx)(k.a,{style:At,color:"inherit",href:Dt(e.user.name),rel:"noreferrer",target:"_blank",children:e.user.name})}),Object(H.jsx)(Mt,{align:"left",children:Object(H.jsx)(E.a,{title:Object(H.jsx)(it.a,{fromNow:!0,children:e.date}),placement:"bottom-end",enterDelay:300,children:Object(H.jsx)(it.a,{style:Object(Q.a)({color:ut(e.date)},At),format:"YYYY-MM-DD",children:e.date})})}),Object(H.jsx)(Mt,{align:"left",children:Object(H.jsx)(E.a,{title:"in days",placement:"bottom-end",enterDelay:300,children:c?Object(H.jsx)(it.a,{style:At,diff:e.date,unit:"days"}):Object(H.jsx)("span",{children:e.duration})})}),Object(H.jsx)(Mt,{align:"left",children:Object(H.jsx)(E.a,{title:"Watch Run",placement:"bottom-end",enterDelay:300,children:Object(H.jsx)(v.a,{size:"small",href:e.media,target:"_blank",children:Object(H.jsx)(kt.a,{fontSize:"inherit"})})})})]},"".concat(e.track.name,"-").concat(e.user.id))}))}),Object(H.jsx)(ke.a,{children:r.totalTime>0&&Object(H.jsxs)(Se.a,{children:[Object(H.jsx)(Mt,{align:"right",children:"Total Time"}),Object(H.jsx)(Mt,{children:Object(H.jsx)(E.a,{title:me.a.duration(r.totalTime,"ms").humanize(),placement:"bottom-end",enterDelay:300,children:Object(H.jsx)("span",{children:dt(r.totalTime,a)})})}),Object(H.jsx)(Mt,{colSpan:4})]})})]})})},Et=function(e){var t=e.data,a=e.props;return Object(H.jsx)(T.a,Object(Q.a)(Object(Q.a)({variant:"h5",gutterBottom:!0,style:{padding:"50px 0px 50px 50px"}},a),{},{children:t}))},zt=a(109),Pt=a.n(zt),Rt=a(268),It=Object(Rt.a)((function(e){var t=e.labels,a=e.series,r=e.title,n=e.theme,c=e.rest,i=void 0===c||c,o="dark"===n.palette.type;if(i&&a.length>30){var l=a.slice(30).reduce((function(e,t){return e+t}),0);a=a.slice(0,30),t=t.slice(0,30),a.push(l),t.push("Rest")}var s=new Array(a.length).fill(0).map((function(){return"#"+(16777215*Math.random()<<0).toString(16).padStart(6,"0")}));return Object(H.jsx)(Pt.a,{options:{labels:t,legend:{show:!1},responsive:[{breakpoint:380,options:{chart:{height:"300px"}}}],plotOptions:{pie:{donut:{labels:{show:!0,name:{show:!0},value:{show:!0,color:o?"white":"black"},total:{show:!0,label:r,color:o?"white":"black"}}}}},colors:s},series:a,type:"donut",height:"400"})})),Ut=a(270),qt=a(269),Yt=a(149),Wt=a.n(Yt),Ft=Object(u.a)((function(e){return{fab:{margin:0,top:"auto",right:30,bottom:30,left:"auto",position:"fixed"}}})),Gt=function(){!function e(){var t=document.documentElement.scrollTop;t>0&&(window.requestAnimationFrame(e),window.scrollTo(0,t-t/5))}()},Ht=function(){var e=function(){var e=n.a.useRef(void 0),t=n.a.useState({x:0,y:0}),a=Object(l.a)(t,2),r=a[0],c=a[1],i=n.a.useCallback((function(){clearTimeout(e.current),e.current=setTimeout((function(){c({x:window.scrollX,y:window.scrollY})}),100)}),[c]);return n.a.useEffect((function(){return window.addEventListener("scroll",i),function(){clearTimeout(e.current),window.removeEventListener("scroll",i)}}),[i]),r}().y,t=Ft();return Object(H.jsx)(qt.a,{in:0!==e,timeout:1e3,children:Object(H.jsx)(Ut.a,{title:"Jump to top",color:"primary",className:t.fab,onClick:Gt,children:Object(H.jsx)(Wt.a,{})})})},Xt=Object(u.a)((function(e){return{padTop:{paddingTop:"70px"}}})),Zt=Object(Re.a)((function(e){var t=e.match,a=V(),r=n.a.useState(void 0),c=Object(l.a)(r,2),i=c[0],o=c[1],s=n.a.useState("tm2"),d=Object(l.a)(s,2),j=d[0],u=d[1],b=n.a.useState(0),h=Object(l.a)(b,2),f=h[0],m=h[1],O=t.params[0],x=t.params.date,p=void 0===x||"latest"===x;n.a.useEffect((function(){m(0),o(void 0)}),[O]),n.a.useEffect((function(){G.request(O,x).then((function(e){if(e[0]&&e[0].tracks[0].wrs){var t,r=Object(Pe.a)(e);try{var n=function(){var e=t.value;void 0===e.stats.totalPoints&&(e.stats.totalTime=e.tracks.filter((function(e){return"Stunts"!==e.type})).map((function(e){return e.wrs[0].score})).reduce((function(e,t){return e+t}),0),e.stats.totalPoints=e.tracks.filter((function(e){return"Stunts"===e.type})).map((function(e){return e.wrs[0].score})).reduce((function(e,t){return e+t}),0));var a,r=[],n=Object(Pe.a)(e.tracks);try{for(n.s();!(a=n.n()).done;){var c,i=a.value,o=Object(Pe.a)(i.wrs);try{for(o.s();!(c=o.n()).done;){var l=c.value,s=p?me()().diff(me()(l.date),"d"):l.duration;r.push(Object(Q.a)(Object(Q.a)({track:{id:i.id,name:i.name,type:i.type,isFirst:l===i.wrs[0],records:i.wrs.length}},l),{},{duration:s}))}}catch(d){o.e(d)}finally{o.f()}}}catch(d){n.e(d)}finally{n.f()}e.tracks=r,p&&e.leaderboard.forEach((function(t,a){e.leaderboard[a].duration=e.tracks.filter((function(e){return e.user.id===t.user.id})).map((function(e){return e.duration})).reduce((function(e,t){return e+t}),0)}))};for(r.s();!(t=r.n()).done;)n()}catch(c){r.e(c)}finally{r.f()}}a.current&&(u(O),o(e))})).catch(console.error)}),[a,O,x,p]);var g="tmwii"===j?_t:yt,y=Xt();return Object(H.jsxs)(Te,{children:[Object(H.jsx)(ge.a,{children:void 0===i?Object(H.jsx)(Ue.a,{}):0===i.length?Object(H.jsx)(Et,{data:"No data."}):Object(H.jsxs)(H.Fragment,{children:[i.length>1&&Object(H.jsx)(Ye.a,{value:f,onChange:function(e,t){m(t)},indicatorColor:"primary",textColor:"primary",variant:"scrollable",scrollButtons:"auto",children:i.map((function(e){return Object(H.jsx)(qe.a,{label:e.name},e.name)}))}),Object(H.jsx)(T.a,{component:"div",role:"tabpanel",children:Object(H.jsx)(Ie.a,{p:3,children:Object(H.jsxs)(Ce.a,{container:!0,direction:"column",justify:"center",children:[Object(H.jsx)(Ce.a,{item:!0,xs:12,children:Object(H.jsx)(g,{data:i[f].tracks,game:j,stats:i[f].stats,useLiveDuration:p,category:i[f].name})}),Object(H.jsx)(Ce.a,{item:!0,xs:12,className:y.padTop,children:Object(H.jsxs)(Ce.a,{container:!0,direction:"row",justify:"center",alignContent:"center",children:[Object(H.jsx)(Ce.a,{item:!0,xs:12,md:6,children:Object(H.jsx)(nt,{data:i[f].leaderboard,game:O,hasDuration:!0})}),Object(H.jsx)(Ce.a,{item:!0,xs:12,md:6,className:y.padTop,children:Object(H.jsxs)(Ce.a,{container:!0,direction:"column",justify:"center",children:[Object(H.jsx)(Ce.a,{item:!0,xs:12,children:Object(H.jsx)(It,{title:"WRs",labels:i[f].leaderboard.map((function(e){return e.user.name})),series:i[f].leaderboard.map((function(e){return e.wrs}))})}),Object(H.jsx)(Ce.a,{item:!0,xs:12,className:y.padTop,children:Object(H.jsx)(It,{title:"Duration",labels:i[f].leaderboard.map((function(e){return e.user.name})),series:i[f].leaderboard.map((function(e){return e.duration}))})})]})})]})})]})})})]})}),Object(H.jsx)(Ht,{})]})})),Jt=function(){return Object(H.jsx)(Te,{children:Object(H.jsx)(ge.a,{children:Object(H.jsx)(Et,{data:"Page not found :("})})})},Kt=a(150),Vt=a.n(Kt),$t=a(283),Qt=a(284),ea=a(281),ta=a(17),aa=function(e){return Object(H.jsx)(ea.a,Object(Q.a)({elevation:6,variant:"filled"},e))},ra={info:"drag & drop replay here :)",magic:"GBX",version:6,settings:"BUCR",classId:50933760,headerSize:331,headerChunks:2,chunkOffset:348},na=function(){var e=V(),t=Object(ta.a)(),a=n.a.useRef(null),r=n.a.useState(ra),c=Object(l.a)(r,2),i=c[0],o=c[1],s=n.a.useState(!0),d=Object(l.a)(s,2),j=d[0],u=d[1],b=n.a.useState(!1),h=Object(l.a)(b,2),f=h[0],m=h[1],O=function(e,t){"clickaway"!==t&&m(!1)},x=n.a.useCallback((function(t){if(t){var a=new FileReader;a.onload=function(t){var a=t.target.result;try{if(!e.current)return;o(ra),m(!1);var r=window,n=r.Buffer,c=r.Replay,i=window.replay=c.default().read(n.from(a),{parseGhost:j});if(!e.current)return;i.ghost&&delete i.ghost.restData,function e(t){Object.keys(t).forEach((function(a){"_view"===a?delete t._view:"object"===typeof t[a]&&e(t[a])}))}(i),o(i)}catch(l){e.current&&m(l.message)}},a.readAsArrayBuffer(t)}}),[e,j,o,m]),p=n.a.useCallback((function(e){return x(e.target.files[0])}),[x]),g=function(e){e.dataTransfer.items?e.dataTransfer.items.clear():e.dataTransfer.clearData()};n.a.useEffect((function(){return a.current&&a.current.addEventListener("change",p),function(){return a.current&&a.current.removeEventListener("change",p)}}),[a,p]);var y=n.a.useCallback((function(){a.current.click()}),[a]);return Object(H.jsx)(Te,{children:Object(H.jsxs)(ge.a,{style:{padding:"20px 20px 20px 20px"},children:[Object(H.jsx)(oe.a,{variant:"contained",color:"primary",disableElevation:!0,onClick:y,children:"Open file"}),Object(H.jsx)("input",{type:"file",ref:a,style:{display:"none"}}),Object(H.jsx)(xe.a,{style:{marginLeft:"20px"},control:Object(H.jsx)($t.a,{color:"primary",checked:j,onChange:function(e){u(e.target.checked)}}),label:"Parse Ghost"}),Object(H.jsx)("div",{style:{paddingBottom:"20px"}}),Object(H.jsx)("div",{onDrop:function(e){e.preventDefault();var t=[];if(e.dataTransfer.items)for(var a=0;a<e.dataTransfer.items.length;++a)"file"===e.dataTransfer.items[a].kind&&t.push(e.dataTransfer.items[a].getAsFile());x(t[0]),g(e)},onDragOver:function(e){e.preventDefault()},children:Object(H.jsx)(Vt.a,{name:"replay",style:{fontSize:"14px"},src:i,theme:"light"===t.palette.type?"bright:inverted":"solarized",displayDataTypes:!1,displayObjectSize:!1,enableClipboard:!1})}),Object(H.jsx)(Qt.a,{open:!1!==f,autoHideDuration:6e3,onClose:O,children:Object(H.jsx)(aa,{onClose:O,severity:"error",children:f})})]})})},ca=a(95),ia=a.n(ca),oa=a(289),la=a(274),sa=a(279),da=[{id:"user.name",sortable:!1,label:"Player",align:"left"},{id:"wrs",id2:"duration",sortable:!0,label:"World Records",align:"left"},{id:"duration",id2:"wrs",sortable:!0,label:"Total Duration",align:"left"}],ja=[{id:"user.name",sortable:!1,label:"Player",align:"left"},{id:"wrs",sortable:!0,label:"World Records",align:"left"}],ua=[{id:"user.displayName",sortable:!1,label:"Player",align:"left"},{id:"wins.matches",sortable:!0,label:"Wins",align:"left",tooltip:"Amount of match wins."},{id:"wins.qualifiers",sortable:!0,label:"Qualifiers",align:"left",tooltip:"Amount of qualifier wins."}],ba=[{id:"user.displayName",sortable:!1,label:"Player",align:"left"},{id:"wins.matches",sortable:!0,label:"Wins",align:"left",tooltip:"Amount of match wins."},{id:"wins.qualifiers",sortable:!0,label:"Qualifiers",align:"left",tooltip:"Amount of qualifier wins."},{id:"wins.hattricks",sortable:!0,label:"Hat-Tricks",align:"left",tooltip:"A hat-trick can be achieved by winning the qualifier, the match and Track of the Day."}],ha=function(e){var t=e.order,a=e.orderBy,r=e.onRequestSort,n=e.hasDuration,c=e.cotd,i=e.hattricks,o=n?da:c?i?ba:ua:ja;return Object(H.jsx)(De.a,{children:Object(H.jsx)(Se.a,{children:o.map((function(e){var n,c,i;return Object(H.jsxs)(we.a,{align:e.align,padding:"default",sortDirection:a===e.id&&t,children:[!0===e.sortable&&Object(H.jsx)(E.a,{title:null!==(n=e.tooltip)&&void 0!==n?n:"Sort by "+e.label,placement:"bottom-start",enterDelay:300,children:Object(H.jsx)(We.a,{active:a===e.id,direction:t,onClick:(c=e.id,i=e.id2,function(e){r(e,c,i)}),children:e.label})}),!1===e.sortable&&e.label]},e.id)}))})})},fa=Object(u.a)((function(e){return{root:{overflowX:"auto"}}})),ma={order:"desc",orderBy:"wrs",thenBy:"duration",page:0,rowsPerPage:50},Oa={padding:"7px 0px 7px 16px"},xa=function(e){return Object(H.jsx)(we.a,Object(Q.a)({style:Oa},e))},pa=function(e){var t;return"https://trackmania.io/#/player/".concat(encodeURIComponent(null!==(t=e.id)&&void 0!==t?t:e.accountId))},ga=function(e){var t=e.data,a=e.hasDuration,r=e.cotd,c=e.hattricks,i=n.a.useState(Object(Q.a)(Object(Q.a)({},ma),{},{orderBy:r?"wins.matches":"wrs"})),o=Object(l.a)(i,2),s=o[0],d=s.order,j=s.orderBy,u=s.thenBy,b=o[1];n.a.useEffect((function(){b((function(e){return Object(Q.a)(Object(Q.a)({},e),{},{orderBy:r?"wins.matches":"wrs",thenBy:r?"wins.matches":"wrs"})}))}),[t,a]);var h=fa();return Object(H.jsx)("div",{className:h.root,children:Object(H.jsxs)(ve.a,{size:"small",children:[Object(H.jsx)(ha,{order:d,orderBy:j,onRequestSort:function(e,t,a){var r=t,n=a;b((function(e){return Object(Q.a)(Object(Q.a)({},e),{},{order:e.orderBy===r&&"desc"===e.order?"asc":"desc",orderBy:r,thenBy:n})}))},hasDuration:a,cotd:r,hattricks:c}),Object(H.jsx)(ke.a,{children:(a?He:Ge)(t,d,j,u).map((function(e){var t;return Object(H.jsxs)(Se.a,{tabIndex:-1,children:[!r&&Object(H.jsx)(xa,{align:"left",children:Object(H.jsx)(k.a,{color:"inherit",href:pa(e.user),rel:"noreferrer",target:"_blank",children:e.user.name})}),!r&&Object(H.jsx)(xa,{align:"left",children:e.wrs}),a&&Object(H.jsxs)(xa,{align:"left",children:[e.duration," day",1===e.duration?"":"s"]}),r&&Object(H.jsx)(xa,{align:"left",children:Object(H.jsx)(k.a,{color:"inherit",href:pa(e.user),rel:"noreferrer",target:"_blank",children:e.user.displayName})}),r&&Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(xa,{align:"left",children:e.wins.matches}),Object(H.jsx)(xa,{align:"left",children:e.wins.qualifiers}),c&&Object(H.jsx)(xa,{align:"left",children:e.wins.hattricks})]})]},null!==(t=e.user.id)&&void 0!==t?t:e.user.accountId)}))})]})})},ya=a(80),va=a(111),ka=a(273),wa=a(87),Da=a.n(wa),Sa=a(110),Ca=a.n(Sa),Ba=[{id:"track.name",sortable:!0,label:"Track",align:"left"},{id:"score",sortable:!0,label:"Record",align:"left"},{id:"user.name",sortable:!0,label:"Player",align:"left"},{id:"zone",sortable:!0,label:"Zone",align:"left"},{id:"date",sortable:!0,label:"Date",align:"left"},{id:"duration",sortable:!0,label:"Duration",align:"left"}],Ta=[{id:"track.monthDay",sortable:!0,label:"Day",align:"left"},{id:"track.name",sortable:!0,label:"Track",align:"left"},{id:"score",sortable:!0,label:"Record",align:"left"},{id:"user.name",sortable:!0,label:"Player",align:"left"},{id:"zone",sortable:!0,label:"Zone",align:"left"}],Na=function(e){var t=e.order,a=e.orderBy,r=e.onRequestSort,n=e.official,c=n?Ba:Ta;return Object(H.jsx)(De.a,{children:Object(H.jsx)(Se.a,{children:c.map((function(e,n){return Object(H.jsxs)(we.a,{align:e.align,padding:"default",sortDirection:a===e.id&&t,colSpan:n===c.length-1?2:1,children:[!0===e.sortable&&Object(H.jsx)(E.a,{title:"Sort by "+e.label,placement:"bottom-start",enterDelay:300,children:Object(H.jsx)(We.a,{active:a===e.id,direction:t,onClick:(i=e.id,function(e){r(e,i)}),children:e.label})}),!1===e.sortable&&e.label]},n);var i}))})})},Aa=Object(u.a)((function(e){return{root:{overflowX:"auto"}}})),La={order:"asc",orderBy:"track.name",page:0,rowsPerPage:250},Ma={whiteSpace:"nowrap"},_a={padding:"7px 0px 7px 16px"},Ea=function(e){return Object(H.jsx)(we.a,Object(Q.a)({style:_a},e))},za=function(e){return"https://trackmania.io/#/player/".concat(encodeURIComponent(e.id))},Pa=Object(u.a)({root:{"& > *":{borderBottom:"unset"}}}),Ra=function(e){var t,a=e.wr,r=e.official,n=e.showDownloadButton,c=dt(a.score,"tm2"),i=0!==a.delta?dt(a.delta,"tm2"):null;return Object(H.jsxs)(Se.a,{tabIndex:-1,children:[r&&Object(H.jsx)(Ea,{align:"left",children:Object(H.jsx)(E.a,{title:Object(H.jsx)(it.a,{format:"HH:mm",children:a.date}),placement:"bottom-end",enterDelay:300,children:Object(H.jsx)(it.a,{style:Object(Q.a)({color:ut(a.date)},Ma),format:"YYYY-MM-DD",children:a.date})})}),!r&&Object(H.jsx)(Ea,{align:"left",children:Object(H.jsx)(E.a,{title:a.setAfter,placement:"bottom-end",enterDelay:300,children:Object(H.jsx)(it.a,{style:Object(Q.a)({color:(t=a.pastMinutes,t>=0&&t<=1440?bt(t):void 0)},Ma),format:"HH:mm",children:a.date})})}),Object(H.jsxs)(Ea,{align:"left",children:[c,a.note&&Object(H.jsx)(E.a,{title:a.note,placement:"bottom-end",enterDelay:300,children:Object(H.jsx)("span",{children:Object(H.jsx)(v.a,{size:"small",disabled:!0,children:Object(H.jsx)(lt.a,{fontSize:"inherit"})})})})]}),Object(H.jsx)(Ea,{align:"left",children:i?"-"+i:""}),Object(H.jsx)(Ea,{align:"left",children:Object(H.jsx)(k.a,{color:"inherit",href:za(a.user),rel:"noreferrer",target:"_blank",children:a.user.name})}),Object(H.jsx)(Ea,{align:"left",children:Object(H.jsx)(E.a,{title:a.user.zone.map((function(e){return e.name})).join(" | "),placement:"bottom",enterDelay:300,children:Object(H.jsx)("span",{children:(a.user.zone[2]?a.user.zone[2]:a.user.zone[0]).name})})}),n&&Object(H.jsx)(Ea,{align:"left",children:Object(H.jsx)(E.a,{title:"Download Ghost",placement:"bottom",enterDelay:300,children:Object(H.jsx)(v.a,{size:"small",style:Ma,color:"inherit",href:a.replayUrl,rel:"noreferrer",target:"_blank",disabled:!a.replay,children:Object(H.jsx)(Da.a,{fontSize:"inherit"})})})})]})},Ia=function(e){var t,a=e.wr,r=e.official,n=e.orderBy,c=e.useLiveDuration,i=e.history,o=e.onClickHistory,l=e.showDownloadButton,s=dt(a.score,"tm2"),d=0!==a.delta?dt(a.delta,"tm2"):null,j=Pa(),u=i===a.track.id,b="track.monthDay"===n||"track.name"===n;return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsxs)(Se.a,{tabIndex:-1,children:[!r&&(a.track.isFirst||!b)&&Object(H.jsx)(Ea,{align:"left",rowSpan:b?a.track.records:1,children:a.track.monthDay}),(a.track.isFirst||!b)&&Object(H.jsx)(Ea,{style:Ma,rowSpan:b?a.track.records:1,align:"left",children:Object(H.jsx)(k.a,{color:"inherit",href:(t=a.track,"https://trackmania.io/#/leaderboard/".concat(encodeURIComponent(t.id))),rel:"noreferrer",target:"_blank",children:a.track.name})}),Object(H.jsxs)(Ea,{align:"left",children:[r&&d&&Object(H.jsx)(E.a,{title:Object(H.jsxs)("span",{children:["-",d," to former record"]}),placement:"bottom",enterDelay:300,children:Object(H.jsx)("span",{children:s})}),r&&!d&&Object(H.jsx)("span",{children:s}),!r&&d&&Object(H.jsx)(E.a,{title:Object(H.jsxs)("span",{children:["-",d," to former record"]}),placement:"bottom",enterDelay:300,children:Object(H.jsx)("span",{children:s})}),!r&&!d&&Object(H.jsx)("span",{children:s})]}),Object(H.jsx)(Ea,{style:Ma,align:"left",children:Object(H.jsx)(k.a,{color:"inherit",href:za(a.user),rel:"noreferrer",target:"_blank",children:a.user.name})}),Object(H.jsx)(Ea,{style:Ma,align:"left",children:Object(H.jsx)(E.a,{title:a.user.zone.map((function(e){return e.name})).join(" | "),placement:"bottom",enterDelay:300,children:Object(H.jsx)("span",{children:(a.user.zone[2]?a.user.zone[2]:a.user.zone[0]).name})})}),r&&Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(Ea,{align:"left",children:Object(H.jsx)(E.a,{title:Object(H.jsx)(it.a,{fromNow:!0,children:a.date}),placement:"bottom-end",enterDelay:300,children:Object(H.jsx)(it.a,{style:Object(Q.a)({color:ut(a.date)},Ma),format:"YYYY-MM-DD",children:a.date})})}),Object(H.jsx)(Ea,{align:"left",children:Object(H.jsx)(E.a,{title:"in days",placement:"bottom-end",enterDelay:300,children:c?Object(H.jsx)(it.a,{style:Ma,diff:a.date,unit:"days"}):Object(H.jsx)("span",{children:a.duration})})})]}),Object(H.jsxs)(Ea,{style:Ma,align:"left",children:[Object(H.jsx)(E.a,{title:"Download Ghost",placement:"bottom",enterDelay:300,children:Object(H.jsx)(v.a,{size:"small",style:Ma,color:"inherit",href:l?a.replayUrl:a.replayUrlPublic,rel:"noreferrer",target:"_blank",children:Object(H.jsx)(Da.a,{fontSize:"inherit"})})}),a.track.isLast&&a.track.history&&Object(H.jsx)(v.a,{color:"inherit",size:"small",style:Ma,onClick:function(){return o(a.track.id)},children:Object(H.jsx)(Ca.a,{fontSize:"inherit"})})]})]}),a.track.isLast&&a.track.history&&Object(H.jsx)(Se.a,{className:j.root,children:Object(H.jsx)(Ea,{style:{paddingBottom:0,paddingTop:0},colSpan:7,children:Object(H.jsx)(ka.a,{in:u,timeout:"auto",unmountOnExit:!0,children:Object(H.jsxs)(Ie.a,{margin:1,children:[Object(H.jsx)(T.a,{variant:"h6",gutterBottom:!0,component:"div",children:"History"}),Object(H.jsxs)(ve.a,{size:"small","aria-label":"purchases",children:[Object(H.jsx)(De.a,{children:Object(H.jsxs)(Se.a,{children:[Object(H.jsx)(Ea,{children:r?"Date":"Time"}),Object(H.jsx)(Ea,{children:"Record"}),Object(H.jsx)(Ea,{children:"Timesave"}),Object(H.jsx)(Ea,{children:"Player"}),Object(H.jsx)(Ea,{colSpan:l?2:1,children:"Zone"})]})}),Object(H.jsx)(ke.a,{children:a.track.history.map((function(e,t){return Object(H.jsx)(Ra,{wr:e,official:r,showDownloadButton:l},t)}))})]})]})})})})]})},Ua=function(e){var t=e.data,a=e.stats,r=e.official,c=e.useLiveDuration,i=e.showDownloadButton,o=$("tm2020",{official:{order:"asc",orderBy:"track.name"},totd:{order:"asc",orderBy:"track.monthDay"}}),s=Object(l.a)(o,2),d=s[0],j=s[1],u=n.a.useState(La),b=Object(l.a)(u,2),h=b[0],f=h.order,m=h.rowsPerPage,O=h.page,x=Object(va.a)(h,["order","rowsPerPage","page"]),p=b[1],g=n.a.useState(null),y=Object(l.a)(g,2),v=y[0],k=y[1],w=x.orderBy;w=r?d.official.orderBy:d.totd.orderBy,w=r&&"track.monthDay"===w?"track.name":w;n.a.useEffect((function(){var e=d[r?"official":"totd"];p((function(t){return Object(Q.a)(Object(Q.a)({},t),{},{order:e.order,orderBy:e.orderBy})}))}),[t]);var D=n.a.useCallback((function(e){k(v!==e?e:null)}),[v,k]),S=Aa();return Object(H.jsx)("div",{className:S.root,children:Object(H.jsxs)(ve.a,{size:"small",children:[Object(H.jsx)(Na,{order:f,orderBy:w,onRequestSort:function(e,t){var a=t;p((function(e){var t=e.orderBy===a&&"desc"===e.order?"asc":"desc";return j(Object(Q.a)(Object(Q.a)({},d),{},Object(ya.a)({},r?"official":"totd",{order:t,orderBy:a}))),Object(Q.a)(Object(Q.a)({},e),{},{order:t,orderBy:a})}))},official:r}),Object(H.jsx)(ke.a,{children:Ge(t,f,w).slice(O*m,O*m+m).map((function(e,t){return Object(H.jsx)(Ia,{wr:e,official:r,orderBy:w,useLiveDuration:c,history:v,onClickHistory:D,showDownloadButton:i},t)}))}),Object(H.jsx)(ke.a,{children:a.totalTime>0&&Object(H.jsxs)(Se.a,{children:[Object(H.jsx)(Ea,{align:"right",colSpan:r?1:2,children:"Total Time"}),Object(H.jsx)(Ea,{children:Object(H.jsx)(E.a,{title:me.a.duration(a.totalTime,"ms").humanize(),placement:"bottom-end",enterDelay:300,children:Object(H.jsx)("span",{children:dt(a.totalTime,"tm2")})})}),Object(H.jsx)(Ea,{colSpan:r?5:3})]})})]})})},qa=Object(Rt.a)((function(e){var t=e.labels,a=e.series,r=(e.title,"dark"===e.theme.palette.type);return Object(H.jsx)(Pt.a,{options:{xaxis:{categories:t},legend:{show:!1},dataLabels:{enabled:!1},chart:{toolbar:{show:!1},foreColor:r?"white":"black"},tooltip:{theme:r?"dark":"light"},responsive:[{breakpoint:380,options:{chart:{height:"300px"}}}],plotOptions:{bar:{horizontal:!0}}},series:a,type:"bar",height:"800"})})),Ya=[],Wa=[],Fa=me()(),Ga=me()("2020-07-01").tz("Europe/Paris").set({hour:17,minute:0,second:0}),Ha=Ga.clone(),Xa={0:"Winter",1:"Spring",2:"Summer",3:"Fall"};Ha.diff(Fa)<0;){var Za=Xa[Math.floor(Ha.month()/3)],Ja=Ha.format("YYYY");-1===Wa.indexOf(Ja)&&Wa.push(Ja),Ya.push(Object(H.jsxs)(_.a,{value:"campaign/".concat(Za,"-").concat(Ja).toLowerCase(),children:[Za," ",Ja]},Ya.length)),Ha.add(3,"months")}Ya.reverse(),[].reverse(),Wa.reverse(),Ya.push(Object(H.jsx)(_.a,{value:"campaign/training",children:"Training"},Ya.length)),Wa=Wa.map((function(e){return Object(H.jsx)(_.a,{value:e,children:e},e)}));for(var Ka=function(e){for(var t=[],a=e.toString()===Ga.year().toString(),r=a?Ga.clone():me()("".concat(e,"-01-01")),n=a?11:Fa.month(),c=r.month();c<=n;++c){var i=r.format("MMMM");t.push(Object(H.jsx)(_.a,{value:"totd/".concat(i,"-").concat(e).toLowerCase(),children:i},t.length)),r.add(1,"month")}return t},Va=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,a=t&&t.toString()===Ga.year().toString(),r=(a?Ga:Fa).clone();return(e?"campaign/".concat(Xa[Math.floor(Fa.month()/3)],"-").concat(Fa.year()):"totd/".concat(r.format("MMMM"),"-").concat(t||Fa.year())).toLowerCase()},$a=function(e){return 1===e?"":"s"},Qa=function(e,t){var a=t.diff(e,"seconds"),r=t.diff(e,"hours");if(a>0){var n=t.diff(e,"minutes")-60*r;return"set after ".concat(r," hour").concat($a(r)," and ").concat(n," minute").concat($a(n))}var c=-r,i=-t.diff(e,"minutes")-60*c;return"set before ".concat(c," hour").concat($a(c)," and ").concat(i," minute").concat($a(i))},er=Object(u.a)((function(e){return{padTop:{paddingTop:"70px"},formControl:{margin:e.spacing(1),minWidth:120}}})),tr=function(e){var t=e.campaign,a=e.onChangeCampaign,r=e.onChangeYear,c=e.isOfficial,i=e.year,o=n.a.useContext(ne).state.user,s=V(),d=n.a.useState(void 0),j=Object(l.a)(d,2),u=j[0],b=j[1],h=n.a.useState("leaderboard"),f=Object(l.a)(h,2),m=f[0],O=f[1],x=n.a.useCallback((function(e){O(e.target.value)}),[O]);n.a.useEffect((function(){b(void 0),G.request("trackmania",t).then((function(e){var t,a=[],r=Object(Pe.a)(e.tracks);try{for(r.s();!(t=r.n()).done;){var n,c=t.value,i=Object(Pe.a)(c.wrs);try{var o=function(){var t=n.value,r=ia()(t.date),i=e.isOfficial?void 0:ia()().tz("Europe/Paris").set({year:e.year,month:e.month-1,date:c.monthDay,hour:19,minute:0,second:0}).utc(),o=e.isOfficial?void 0:Qa(i,r),l=t===c.wrs[c.wrs.length-1],s=l&&(c.history||[]).length>1?c.history:void 0;s&&!e.isOfficial?s.forEach((function(e){var t=ia()(e.date);e.setAfter=Qa(i,t),e.pastMinutes=t.diff(i,"minutes"),e.replayUrl=F.replayUrl(e.replay)})):s&&s.forEach((function(e){e.replayUrl=F.replayUrl(e.replay)})),a.push(Object(Q.a)(Object(Q.a)({track:{id:c.id,name:c.name.replace(/(\$[0-9a-fA-F]{1,3}|\$[WNOITSGZBEMwnoitsgzbem]{1})/g,""),monthDay:c.monthDay,isFirst:t===c.wrs[0],isLast:l,records:c.wrs.length,history:s}},t),{},{replayUrl:F.replayUrl(t.replay),replayUrlPublic:"https://prod.trackmania.core.nadeo.online/storageObjects/".concat(t.replay),zone:(t.user.zone[2]?t.user.zone[2]:t.user.zone[0]).name,setAfter:o}))};for(i.s();!(n=i.n()).done;)o()}catch(l){i.e(l)}finally{i.f()}}}catch(l){r.e(l)}finally{r.f()}e.tracks=a,s.current&&b(e)})).catch((function(e){console.log(e),s.current&&b(null)}))}),[s,t]);var p=n.a.useMemo((function(){return o.isLoggedIn()&&o.hasPermission(je.trackmania_DOWNLOAD_FILES)}),[o.profile]),g=m.replace("Leaderboard","CountryLeaderboard").replace("leaderboard","countryLeaderboard"),y=er();return Object(H.jsxs)(H.Fragment,{children:[c?Object(H.jsxs)(la.a,{className:y.formControl,children:[Object(H.jsx)(oa.a,{children:"Campaign"}),Object(H.jsx)(sa.a,{value:t,onChange:a,children:Ya})]}):Object(H.jsxs)(H.Fragment,{children:[Object(H.jsxs)(la.a,{className:y.formControl,children:[Object(H.jsx)(oa.a,{children:"Year"}),Object(H.jsx)(sa.a,{value:i,onChange:r,children:Wa})]}),Object(H.jsxs)(la.a,{className:y.formControl,children:[Object(H.jsx)(oa.a,{children:"Month"}),Object(H.jsx)(sa.a,{value:t,onChange:a,children:Ka(i)})]})]}),null===u&&Object(H.jsx)(Et,{data:"No data."}),void 0===u&&Object(H.jsx)(Ue.a,{}),Object(H.jsx)(Ce.a,{container:!0,direction:"column",justify:"center",children:void 0!==u&&null!==u&&Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(Ce.a,{item:!0,xs:12,children:Object(H.jsx)(Ua,{data:u.tracks,stats:u.stats,official:u.isOfficial,showDownloadButton:p})}),Object(H.jsxs)(Ce.a,{item:!0,xs:12,className:y.padTop,children:[Object(H.jsxs)(la.a,{className:y.formControl,children:[Object(H.jsx)(oa.a,{children:"Rankings Type"}),Object(H.jsxs)(sa.a,{value:m,onChange:x,children:[Object(H.jsx)(_.a,{value:"leaderboard",children:"Live"}),Object(H.jsx)(_.a,{value:"uniqueLeaderboard",children:"Unique"}),Object(H.jsx)(_.a,{value:"historyLeaderboard",children:"Total"})]})]}),Object(H.jsxs)(Ce.a,{container:!0,direction:"row",justify:"center",alignContent:"center",children:[Object(H.jsx)(Ce.a,{item:!0,xs:12,md:6,children:Object(H.jsx)(ga,{data:u[m],hasDuration:u.isOfficial&&"uniqueLeaderboard"!==m})}),Object(H.jsx)(Ce.a,{item:!0,xs:12,md:6,className:y.padTop,children:Object(H.jsxs)(Ce.a,{container:!0,direction:"column",justify:"center",children:[Object(H.jsx)(Ce.a,{item:!0,xs:12,children:"uniqueLeaderboard"===m?Object(H.jsx)(qa,{title:"WRs",labels:u[m].map((function(e){return e.user.name})).slice(0,20),series:[{name:"Unique WRs",data:u[m].slice(0,20).map((function(e){return e.wrs}))}]}):Object(H.jsx)(It,{title:"WRs",labels:u[m].map((function(e){return e.user.name})),series:u[m].map((function(e){return e.wrs}))})}),Object(H.jsx)(Ce.a,{item:!0,xs:12,className:y.padTop,children:"uniqueLeaderboard"===m?Object(H.jsx)(qa,{title:"WRs",labels:u[g].map((function(e){return(e.zone[2]?e.zone[2]:e.zone[0]).name})).slice(0,20),series:[{name:"Unique WRs by Zone",data:u[g].slice(0,20).map((function(e){return e.wrs}))}]}):Object(H.jsx)(It,{title:"WRs by Zone",labels:u[g].map((function(e){return(e.zone[2]?e.zone[2]:e.zone[0]).name})),series:u[g].map((function(e){return e.wrs}))})})]})})]})]})]})})]})},ar=[{id:"name",sortable:!0,label:"Name",align:"left"},{id:"nb_players",sortable:!0,label:"Players",align:"left"},{id:"round.match.winner.displayName",sortable:!0,label:"Winner",align:"left"}],rr=[{id:"name",sortable:!0,label:"Name",align:"left"},{id:"nb_players",sortable:!0,label:"Players",align:"left"},{id:"round.qualifier.winner.displayName",sortable:!0,label:"Qualifier",align:"left"},{id:"round.match.winner.displayName",sortable:!0,label:"Winner",align:"left"}],nr=function(e){var t=e.order,a=e.orderBy,r=e.onRequestSort,n=e.official,c=n?ar:rr;return Object(H.jsx)(De.a,{children:Object(H.jsx)(Se.a,{children:c.map((function(e,n){return Object(H.jsxs)(we.a,{align:e.align,padding:"default",sortDirection:a===e.id&&t,colSpan:n===c.length-1?2:1,children:[!0===e.sortable&&Object(H.jsx)(E.a,{title:"Sort by "+e.label,placement:"bottom-start",enterDelay:300,children:Object(H.jsx)(We.a,{active:a===e.id,direction:t,onClick:(i=e.id,function(e){r(e,i)}),children:e.label})}),!1===e.sortable&&e.label]},n);var i}))})})},cr=Object(u.a)((function(e){return{root:{overflowX:"auto"}}})),ir={order:"asc",orderBy:"name",page:0,rowsPerPage:250},or={whiteSpace:"nowrap"},lr={padding:"7px 0px 7px 16px"},sr=function(e){return Object(H.jsx)(we.a,Object(Q.a)({style:lr},e))},dr=function(e){return"https://trackmania.io/#/player/".concat(encodeURIComponent(e.accountId))},jr=Object(u.a)({root:{"& > *":{borderBottom:"unset"}}}),ur=function(e){var t,a,r,n,c,i,o,l=e.wr,s=(e.official,e.orderBy,e.useLiveDuration,e.history,e.onClickHistory,dt(l.score,"tm2"),0!==l.delta&&dt(l.delta,"tm2"),jr(),(null===(t=l.round.qualifier)||void 0===t||null===(a=t.winner)||void 0===a?void 0:a.accountId)===(null===(r=l.round.match)||void 0===r||null===(n=r.winner)||void 0===n?void 0:n.accountId)&&(null===(c=l.round.qualifier)||void 0===c||null===(i=c.winner)||void 0===i?void 0:i.accountId));return Object(H.jsx)(H.Fragment,{children:Object(H.jsxs)(Se.a,{tabIndex:-1,children:[Object(H.jsx)(sr,{align:"left",children:Object(H.jsx)(k.a,{color:"inherit",href:(o=l,"https://trackmania.io/#/competitions/comp/".concat(encodeURIComponent(o.id))),rel:"noreferrer",target:"_blank",children:l.name})}),Object(H.jsx)(sr,{align:"left",children:l.nb_players}),Object(H.jsx)(sr,{style:or,align:"left",children:l.round.qualifier&&Object(H.jsx)(E.a,{title:Object(H.jsx)("span",{children:l.round.qualifier.winner.zone}),placement:"bottom",enterDelay:300,children:Object(H.jsx)(k.a,{color:s?"secondary":"inherit",href:dr(l.round.qualifier.winner),rel:"noreferrer",target:"_blank",children:l.round.qualifier.winner.displayName})})}),Object(H.jsx)(sr,{style:or,align:"left",children:l.round.match&&Object(H.jsx)(E.a,{title:Object(H.jsx)("span",{children:l.round.match.winner.zone}),placement:"bottom",enterDelay:300,children:Object(H.jsx)(k.a,{color:s?"secondary":"inherit",href:dr(l.round.match.winner),rel:"noreferrer",target:"_blank",children:l.round.match.winner.displayName})})})]})})},br=function(e){var t=e.data,a=(e.stats,e.official),r=e.useLiveDuration,c=$("tm2020-competitions",{official:{order:"asc",orderBy:"name"},totd:{order:"asc",orderBy:"name"}}),i=Object(l.a)(c,2),o=i[0],s=i[1],d=n.a.useState(ir),j=Object(l.a)(d,2),u=j[0],b=u.order,h=u.rowsPerPage,f=u.page,m=Object(va.a)(u,["order","rowsPerPage","page"]),O=j[1],x=m.orderBy;x=a?o.official.orderBy:o.totd.orderBy,x=a&&"name"===x?"name":x;n.a.useEffect((function(){var e=o[a?"official":"totd"];O((function(t){return Object(Q.a)(Object(Q.a)({},t),{},{order:e.order,orderBy:e.orderBy})}))}),[t]);var p=cr();return Object(H.jsx)("div",{className:p.root,children:Object(H.jsxs)(ve.a,{size:"small",children:[Object(H.jsx)(nr,{order:b,orderBy:x,onRequestSort:function(e,t){var r=t;O((function(e){var t=e.orderBy===r&&"desc"===e.order?"asc":"desc";return s(Object(Q.a)(Object(Q.a)({},o),{},Object(ya.a)({},a?"official":"totd",{order:t,orderBy:r}))),Object(Q.a)(Object(Q.a)({},e),{},{order:t,orderBy:r})}))},official:a}),Object(H.jsx)(ke.a,{children:Ge(t,b,x).slice(f*h,f*h+h).map((function(e,t){return Object(H.jsx)(ur,{wr:e,official:a,orderBy:x,useLiveDuration:r},t)}))})]})})},hr=[],fr=me()(),mr=me()("2020-11-02"),Or=mr.clone();Or.diff(fr)<0;){var xr=Or.format("YYYY");-1===hr.indexOf(xr)&&hr.push(xr),Or.add(3,"months")}[].reverse(),hr.reverse(),hr=hr.map((function(e){return Object(H.jsx)(_.a,{value:e,children:e},e)}));var pr=function(e){for(var t=[],a=e.toString()===mr.year().toString(),r=a?mr.clone():me()("".concat(e,"-01-01")),n=a?11:fr.month(),c=r.month();c<=n;++c){var i=r.format("MMMM");t.push(Object(H.jsx)(_.a,{value:i.toLowerCase(),children:i},t.length)),r.add(1,"month")}return t},gr=[Object(H.jsx)(_.a,{value:"competitions/cotd",children:"Cup of the Day"},0),Object(H.jsx)(_.a,{value:"competitions/a08forever",children:"A08 Forever"},1)],yr=Object(u.a)((function(e){return{padTop:{paddingTop:"70px"},formControl:{margin:e.spacing(1),minWidth:120}}})),vr=function(e){var t=e.competition,a=e.onChangeCompetition,r=(e.campaign,e.onChangeCampaign,e.onChangeYear),c=e.onChangeMonth,i=(e.isOfficial,e.year),o=e.month,s=V(),d="competitions/cotd"===t,j=n.a.useState(void 0),u=Object(l.a)(j,2),b=u[0],h=u[1],f=n.a.useState(void 0),m=Object(l.a)(f,2),O=m[0],x=m[1],p=n.a.useState("leaderboard"),g=Object(l.a)(p,2),y=g[0],v=g[1];n.a.useCallback((function(e){v(e.target.value)}),[v]);n.a.useEffect((function(){h(void 0),G.request("trackmania",d?"".concat(t,"/").concat(o,"-").concat(i):"".concat(t,"/").concat(i)).then((function(e){s.current&&h(e)})).catch((function(e){console.log(e),s.current&&h(null)}))}),[s,t,i,o]),n.a.useEffect((function(){x(void 0),G.request("trackmania","rankings/".concat(t.slice("competition/".length+1))).then((function(e){s.current&&x(e)})).catch((function(e){console.log(e),s.current&&x(null)}))}),[s,t]);y.replace("Leaderboard","CountryLeaderboard").replace("leaderboard","countryLeaderboard");var k=yr();return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsxs)(H.Fragment,{children:[Object(H.jsxs)(la.a,{className:k.formControl,children:[Object(H.jsx)(oa.a,{children:"Competition"}),Object(H.jsx)(sa.a,{value:t,onChange:a,children:gr})]}),Object(H.jsxs)(la.a,{className:k.formControl,children:[Object(H.jsx)(oa.a,{children:"Year"}),Object(H.jsx)(sa.a,{value:i,onChange:r,children:hr})]}),d&&Object(H.jsxs)(la.a,{className:k.formControl,children:[Object(H.jsx)(oa.a,{children:"Month"}),Object(H.jsx)(sa.a,{value:o,onChange:c,children:pr(i)})]})]}),null===b&&Object(H.jsx)(Et,{data:"No data."}),void 0===b&&Object(H.jsx)(Ue.a,{}),Object(H.jsx)(Ce.a,{container:!0,direction:"column",justify:"center",children:void 0!==b&&null!==b&&Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(Ce.a,{item:!0,xs:12,children:Object(H.jsx)(br,{data:b,stats:b.stats,official:b.isOfficial,cotd:d})}),Object(H.jsxs)(Ce.a,{item:!0,xs:12,className:k.padTop,children:[Object(H.jsx)(T.a,{variant:"h5",children:"Overall Statistics"}),Object(H.jsx)("br",{}),null===O&&Object(H.jsx)(Et,{data:"No data."}),void 0===O&&Object(H.jsx)(Ue.a,{}),void 0!==O&&null!==O&&Object(H.jsxs)(Ce.a,{container:!0,direction:"row",justify:"center",alignContent:"center",children:[Object(H.jsx)(Ce.a,{item:!0,xs:12,md:6,children:Object(H.jsx)(ga,{data:O.leaderboard,hasDuration:!1,cotd:!0,hattricks:d})}),Object(H.jsx)(Ce.a,{item:!0,xs:12,md:6,className:k.padTop,children:Object(H.jsxs)(Ce.a,{container:!0,direction:"column",justify:"center",children:[Object(H.jsx)(Ce.a,{item:!0,xs:12,children:Object(H.jsx)(It,{title:"Wins",labels:O.leaderboard.map((function(e){return e.user.displayName})),series:O.leaderboard.map((function(e){return e.wins.matches}))})}),Object(H.jsx)(Ce.a,{item:!0,xs:12,className:k.padTop,children:Object(H.jsx)(It,{title:"Wins by Zone",labels:O.countryLeaderboard.map((function(e){return(e.zone[2]?e.zone[2]:e.zone[0]).name})),series:O.countryLeaderboard.map((function(e){return e.wins.matches}))})})]})})]})]})]})})]})},kr=Object(u.a)((function(e){return{padTop:{paddingTop:"70px"},formControl:{margin:e.spacing(1),minWidth:120}}})),wr=function(){var e=V(),t=n.a.useState(void 0),a=Object(l.a)(t,2),r=a[0],c=a[1],i=n.a.useState("rankings/campaign"),o=Object(l.a)(i,2),s=o[0],d=o[1],j=n.a.useState("leaderboard"),u=Object(l.a)(j,2),b=u[0],h=u[1],f=n.a.useCallback((function(e){d(e.target.value)}),[d]),m=n.a.useCallback((function(e){h(e.target.value)}),[h]);n.a.useEffect((function(){c(void 0),G.request("trackmania",s).then((function(t){e.current&&c(t)})).catch((function(t){console.error(t),e.current&&c(null)}))}),[c,s,e]);var O=b.replace("Leaderboard","CountryLeaderboard").replace("leaderboard","countryLeaderboard"),x=kr();return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsxs)(la.a,{className:x.formControl,children:[Object(H.jsx)(oa.a,{children:"Campaign"}),Object(H.jsxs)(sa.a,{value:s,onChange:f,children:[Object(H.jsx)(_.a,{value:"rankings/campaign",children:"Official"}),Object(H.jsx)(_.a,{value:"rankings/totd",children:"TOTD"}),Object(H.jsx)(_.a,{value:"rankings/combined",children:"Combined"})]})]}),Object(H.jsxs)(la.a,{className:x.formControl,children:[Object(H.jsx)(oa.a,{children:"Rankings Type"}),Object(H.jsxs)(sa.a,{value:b,onChange:m,children:[Object(H.jsx)(_.a,{value:"leaderboard",children:"Live"}),Object(H.jsx)(_.a,{value:"uniqueLeaderboard",children:"Unique"}),Object(H.jsx)(_.a,{value:"historyLeaderboard",children:"Total"})]})]}),null===r&&Object(H.jsx)(Et,{data:"No data."}),void 0===r&&Object(H.jsx)(Ue.a,{}),null!==r&&void 0!==r&&Object(H.jsxs)(Ce.a,{container:!0,direction:"row",justify:"center",alignContent:"center",children:[Object(H.jsx)(Ce.a,{item:!0,xs:12,md:6,children:Object(H.jsx)(ga,{data:r[b],hasDuration:"rankings/campaign"===s&&"uniqueLeaderboard"!==b})}),Object(H.jsx)(Ce.a,{item:!0,xs:12,md:6,children:Object(H.jsxs)(Ce.a,{container:!0,direction:"column",justify:"center",children:[Object(H.jsx)(Ce.a,{item:!0,xs:12,className:x.padTop,children:"uniqueLeaderboard"===b?Object(H.jsx)(qa,{title:"WRs",labels:r[b].map((function(e){return e.user.name})).slice(0,20),series:[{name:"Unique WRs",data:r[b].slice(0,20).map((function(e){return e.wrs}))}]}):Object(H.jsx)(It,{title:"WRs",labels:r[b].map((function(e){return e.user.name})),series:r[b].map((function(e){return e.wrs}))})}),Object(H.jsx)(Ce.a,{item:!0,xs:12,className:x.padTop,children:"uniqueLeaderboard"===b?Object(H.jsx)(qa,{title:"WRs",labels:r[O].map((function(e){return(e.zone[2]?e.zone[2]:e.zone[0]).name})).slice(0,20),series:[{name:"Unique WRs by Zone",data:r[O].slice(0,20).map((function(e){return e.wrs}))}]}):Object(H.jsx)(It,{title:"WRs by Zone",labels:r[O].map((function(e){return(e.zone[2]?e.zone[2]:e.zone[0]).name})),series:r[O].map((function(e){return e.wrs}))})})]})})]})]})},Dr=Object(Re.a)((function(e){var t=e.match,a=n.a.useState(0),r=Object(l.a)(a,2),c=r[0],i=r[1],o=n.a.useState(Va(0===c)),s=Object(l.a)(o,2),d=s[0],j=s[1],u=n.a.useState(me()().year()),b=Object(l.a)(u,2),h=b[0],f=b[1],m=n.a.useState("competitions/cotd"),O=Object(l.a)(m,2),x=O[0],p=O[1],g=n.a.useState(me()().year()),y=Object(l.a)(g,2),v=y[0],k=y[1],w=n.a.useState(me()().format("MMMM").toLowerCase()),D=Object(l.a)(w,2),S=D[0],C=D[1],B=t.path;n.a.useEffect((function(){i(0)}),[B]);var N=n.a.useCallback((function(e){f(e.target.value),j(Va(!1,e.target.value))}),[f,j]),A=n.a.useCallback((function(e){j(e.target.value)}),[j]),L=n.a.useCallback((function(e){p(e.target.value)}),[p]),M=n.a.useCallback((function(e){k(e.target.value),C(function(e){return(e&&e.toString()===mr.year().toString()?mr:fr).clone().format("MMMM").toLowerCase()}(e.target.value))}),[k]),_=n.a.useCallback((function(e){C(e.target.value)}),[C]);return Object(H.jsxs)(Te,{children:[Object(H.jsxs)(ge.a,{children:[Object(H.jsxs)(Ye.a,{value:c,onChange:function(e,t){i(t),j(Va(0===t,h))},indicatorColor:"primary",textColor:"primary",variant:"scrollable",scrollButtons:"auto",children:[Object(H.jsx)(qe.a,{label:"Campaign"}),Object(H.jsx)(qe.a,{label:"Track of the Day"}),Object(H.jsx)(qe.a,{label:"Rankings"}),Object(H.jsx)(qe.a,{label:"Competitions"})]}),Object(H.jsx)(T.a,{component:"div",role:"tabpanel",children:Object(H.jsxs)(Ie.a,{p:3,children:[(0===c||1===c)&&Object(H.jsx)(tr,{campaign:d,onChangeCampaign:A,onChangeYear:N,isOfficial:0===c,year:h}),2===c&&Object(H.jsx)(wr,{}),3===c&&Object(H.jsx)(vr,{competition:x,onChangeCompetition:L,campaign:d,onChangeCampaign:A,onChangeYear:M,onChangeMonth:_,isOfficial:0===c,year:v,month:S})]})})]}),Object(H.jsx)(Ht,{})]})})),Sr=[{id:"track.name",sortable:!0,label:"Track",align:"left"},{id:"score",sortable:!0,label:"Record",align:"left"},{id:"user.name",sortable:!0,label:"Player",align:"left"},{id:"date",sortable:!0,label:"Date",align:"left"},{id:"duration",sortable:!0,label:"Duration",align:"left"}],Cr=function(e){var t=e.order,a=e.orderBy,r=e.onRequestSort;return Object(H.jsx)(De.a,{children:Object(H.jsx)(Se.a,{children:Sr.map((function(e,n){return Object(H.jsxs)(we.a,{align:e.align,padding:"default",sortDirection:a===e.id&&t,colSpan:n===Sr.length-1?2:1,children:[!0===e.sortable&&Object(H.jsx)(E.a,{title:"Sort by "+e.label,placement:"bottom-start",enterDelay:300,children:Object(H.jsx)(We.a,{active:a===e.id,direction:t,onClick:(c=e.id,function(e){r(e,c)}),children:e.label})}),!1===e.sortable&&e.label]},n);var c}))})})},Br=Object(u.a)((function(e){return{root:{overflowX:"auto"}}})),Tr={order:"asc",orderBy:"track.name",page:0,rowsPerPage:250},Nr={whiteSpace:"nowrap"},Ar={padding:"7px 0px 7px 16px"},Lr=function(e){return Object(H.jsx)(we.a,Object(Q.a)({style:Ar},e))},Mr=Object(u.a)({root:{"& > *":{borderBottom:"unset"}}}),_r=function(e){var t=e.game,a=e.wr,r=e.trackType,n=dt(a.score,t,r),c=0!==a.delta?dt(a.delta,t,r):null,i="Stunts"===r?"+":"-",o=Ke(t);return Object(H.jsxs)(Se.a,{tabIndex:-1,children:[Object(H.jsx)(Lr,{align:"left",children:Object(H.jsx)(E.a,{title:Object(H.jsx)(it.a,{format:"HH:mm",children:a.date}),placement:"bottom-end",enterDelay:300,children:Object(H.jsx)(it.a,{style:Object(Q.a)({color:ut(a.date)},Nr),format:"YYYY-MM-DD",children:a.date})})}),Object(H.jsx)(Lr,{align:"left",children:n}),Object(H.jsx)(Lr,{align:"left",children:c?i+c:""}),Object(H.jsx)(Lr,{align:"left",children:Object(H.jsx)(k.a,{style:Nr,color:"inherit",href:o.userUrl(a.user.id),rel:"noreferrer",target:"_blank",children:a.user.name})}),Object(H.jsx)(Lr,{align:"left",children:Object(H.jsx)(E.a,{title:"Download Replay",placement:"bottom",enterDelay:300,children:Object(H.jsx)(v.a,{size:"small",style:Nr,color:"inherit",href:o.replayUrl(a.replay),rel:"noreferrer",target:"_blank",children:Object(H.jsx)(Da.a,{fontSize:"inherit"})})})})]})},Er=function(e){var t=e.game,a=e.wr,r=e.orderBy,n=e.useLiveDuration,c=e.history,i=e.onClickHistory,o=dt(a.score,t,a.track.type),l=0!==a.delta?dt(a.delta,t,a.track.type):null,s="Stunts"===a.track.type?"+":"-",d=Mr(),j=c===a.track.id,u="track.name"===r,b=Ke(t);return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsxs)(Se.a,{tabIndex:-1,children:[(a.track.isFirst||!u)&&Object(H.jsx)(Lr,{style:Nr,rowSpan:u?a.track.records:1,align:"left",children:Object(H.jsx)(k.a,{color:"inherit",href:b.trackUrl(a.track.id),rel:"noreferrer",target:"_blank",children:a.track.name})}),Object(H.jsxs)(Lr,{align:"left",children:[l&&Object(H.jsx)(E.a,{title:Object(H.jsxs)("span",{children:[s,l," to former record"]}),placement:"bottom",enterDelay:300,children:Object(H.jsx)("span",{children:o})}),!l&&Object(H.jsx)("span",{children:o})]}),Object(H.jsx)(Lr,{style:Nr,align:"left",children:Object(H.jsx)(k.a,{color:"inherit",href:b.userUrl(a.user.id),rel:"noreferrer",target:"_blank",children:a.user.name})}),Object(H.jsx)(Lr,{align:"left",children:Object(H.jsx)(E.a,{title:Object(H.jsx)(it.a,{fromNow:!0,children:a.date}),placement:"bottom-end",enterDelay:300,children:Object(H.jsx)(it.a,{style:Object(Q.a)({color:ut(a.date)},Nr),format:"YYYY-MM-DD",children:a.date})})}),Object(H.jsx)(Lr,{align:"left",children:Object(H.jsx)(E.a,{title:"in days",placement:"bottom-end",enterDelay:300,children:n?Object(H.jsx)(it.a,{style:Nr,diff:a.date,unit:"days"}):Object(H.jsx)("span",{children:a.duration})})}),Object(H.jsxs)(Lr,{style:Nr,align:"left",children:[Object(H.jsx)(E.a,{title:"Download Replay",placement:"bottom",enterDelay:300,children:Object(H.jsx)(v.a,{size:"small",style:Nr,color:"inherit",href:b.replayUrl(a.replay),rel:"noreferrer",target:"_blank",children:Object(H.jsx)(Da.a,{fontSize:"inherit"})})}),a.track.isLast&&a.track.history&&Object(H.jsx)(v.a,{color:"inherit",size:"small",style:Nr,onClick:function(){return i(a.track.id)},children:Object(H.jsx)(Ca.a,{fontSize:"inherit"})})]})]}),a.track.isLast&&a.track.history&&Object(H.jsx)(Se.a,{className:d.root,children:Object(H.jsx)(Lr,{style:{paddingBottom:0,paddingTop:0},colSpan:7,children:Object(H.jsx)(ka.a,{in:j,timeout:"auto",unmountOnExit:!0,children:Object(H.jsxs)(Ie.a,{margin:1,children:[Object(H.jsx)(T.a,{variant:"h6",gutterBottom:!0,component:"div",children:"History"}),Object(H.jsxs)(ve.a,{size:"small","aria-label":"purchases",children:[Object(H.jsx)(De.a,{children:Object(H.jsxs)(Se.a,{children:[Object(H.jsx)(Lr,{children:"Date"}),Object(H.jsx)(Lr,{children:"Record"}),Object(H.jsx)(Lr,{children:"Stunts"===a.track.type?"Improvement":"Timesave"}),Object(H.jsx)(Lr,{colSpan:2,children:"Player"})]})}),Object(H.jsx)(ke.a,{children:a.track.history.map((function(e,r){return Object(H.jsx)(_r,{game:t,wr:e,trackType:a.track.type},r)}))})]})]})})})})]})},zr=function(e){var t=e.game,a=e.data,r=e.stats,c=e.useLiveDuration,i=$(t,{order:"asc",orderBy:"track.name"}),o=Object(l.a)(i,2),s=o[0],d=o[1],j=n.a.useState(Tr),u=Object(l.a)(j,2),b=u[0],h=b.order,f=b.rowsPerPage,m=b.page,O=b.orderBy,x=u[1],p=n.a.useState(null),g=Object(l.a)(p,2),y=g[0],v=g[1];n.a.useEffect((function(){x((function(e){return Object(Q.a)(Object(Q.a)({},e),{},{order:s.order,orderBy:s.orderBy})}))}),[a]);var k=n.a.useCallback((function(e){v(y!==e?e:null)}),[y,v]),w=Br();return Object(H.jsx)("div",{className:w.root,children:Object(H.jsxs)(ve.a,{size:"small",children:[Object(H.jsx)(Cr,{order:h,orderBy:O,onRequestSort:function(e,t){var a=t;x((function(e){var t=e.orderBy===a&&"desc"===e.order?"asc":"desc";return d(Object(Q.a)(Object(Q.a)({},s),{},{order:t,orderBy:a})),Object(Q.a)(Object(Q.a)({},e),{},{order:t,orderBy:a})}))}}),Object(H.jsx)(ke.a,{children:Ge(a,h,O).slice(m*f,m*f+f).map((function(e,a){return Object(H.jsx)(Er,{game:t,wr:e,orderBy:O,useLiveDuration:c,history:y,onClickHistory:k},a)}))}),Object(H.jsxs)(ke.a,{children:[r.totalTime>0&&Object(H.jsxs)(Se.a,{children:[Object(H.jsx)(Lr,{align:"right",children:"Total Time"}),Object(H.jsx)(Lr,{children:Object(H.jsx)(E.a,{title:me.a.duration(r.totalTime,"ms").humanize(),placement:"bottom-end",enterDelay:300,children:Object(H.jsx)("span",{children:dt(r.totalTime)})})}),Object(H.jsx)(Lr,{colSpan:5})]}),r.totalPoints>0&&Object(H.jsxs)(Se.a,{children:[Object(H.jsx)(Lr,{align:"right",children:"Total Points"}),Object(H.jsx)(Lr,{children:Object(H.jsx)("span",{children:dt(r.totalPoints,t,"Stunts")})}),Object(H.jsx)(Lr,{colSpan:3})]})]})]})})},Pr=Object(u.a)((function(e){return{padTop:{paddingTop:"70px"},formControl:{margin:e.spacing(1),minWidth:120}}})),Rr=function(e){var t=e.gameName,a=V(),r=n.a.useState(void 0),c=Object(l.a)(r,2),i=c[0],o=c[1],s=n.a.useState(void 0),d=Object(l.a)(s,2),j=d[0],u=d[1],b=n.a.useState("leaderboard"),h=Object(l.a)(b,1)[0],f=n.a.useCallback((function(e){u(e.target.value)}),[u]);n.a.useEffect((function(){o(void 0),G.request(t).then((function(e){var t,r=[],n=Object(Pe.a)(e);try{for(n.s();!(t=n.n()).done;){var c,i=t.value,l=[],s=Object(Pe.a)(i.tracks);try{for(s.s();!(c=s.n()).done;){var d,j=c.value,b=Object(Pe.a)(j.wrs);try{for(b.s();!(d=b.n()).done;){var h=d.value,f=h===j.wrs[j.wrs.length-1],m=f&&(j.history||[]).length>1?j.history:void 0;l.push(Object(Q.a)({track:{id:j.id,name:j.name.replace(/(\$[0-9a-fA-F]{3}|\$[WNOITSGZBEMwnoitsgzbem]{1})/g,""),isFirst:h===j.wrs[0],isLast:f,records:j.wrs.length,history:m,type:j.type}},h))}}catch(O){b.e(O)}finally{b.f()}}}catch(O){s.e(O)}finally{s.f()}i.tracks=l,r.push(i)}}catch(O){n.e(O)}finally{n.f()}a.current&&(o(r),u(r[0].name))})).catch((function(e){console.log(e),a.current&&o(null)}))}),[a,t,u,o]);var m=Pr(),O=i?i.find((function(e){return e.name===j})):void 0;return Object(H.jsxs)(H.Fragment,{children:[j&&i&&i.length>1&&Object(H.jsxs)(la.a,{className:m.formControl,children:[Object(H.jsx)(oa.a,{children:"Campaign"}),Object(H.jsx)(sa.a,{value:j,onChange:f,children:i.map((function(e){return Object(H.jsx)(_.a,{value:e.name,children:e.name},e.name)}))})]}),null===O&&Object(H.jsx)(Et,{data:"No data."}),void 0===O&&Object(H.jsx)(Ue.a,{}),Object(H.jsx)(Ce.a,{container:!0,direction:"column",justify:"center",children:void 0!==O&&null!==O&&Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(Ce.a,{item:!0,xs:12,children:Object(H.jsx)(zr,{game:t,data:O.tracks,stats:O.stats})}),Object(H.jsx)(Ce.a,{item:!0,xs:12,className:m.padTop,children:Object(H.jsxs)(Ce.a,{container:!0,direction:"row",justify:"center",alignContent:"center",children:[Object(H.jsx)(Ce.a,{item:!0,xs:12,md:6,children:Object(H.jsx)(nt,{game:t,data:O[h],hasDuration:"uniqueLeaderboard"!==h})}),Object(H.jsx)(Ce.a,{item:!0,xs:12,md:6,className:m.padTop,children:Object(H.jsx)(Ce.a,{container:!0,direction:"column",justify:"center",children:Object(H.jsx)(Ce.a,{item:!0,xs:12,children:"uniqueLeaderboard"===h?Object(H.jsx)(qa,{title:"WRs",labels:O[h].map((function(e){return e.user.name})).slice(0,20),series:[{name:"Unique WRs",data:O[h].slice(0,20).map((function(e){return e.wrs}))}]}):Object(H.jsx)(It,{title:"WRs",labels:O[h].map((function(e){return e.user.name})),series:O[h].map((function(e){return e.wrs}))})})})})]})})]})})]})},Ir=Object(u.a)((function(e){return{padTop:{paddingTop:"70px"},formControl:{margin:e.spacing(1),minWidth:120}}})),Ur=function(e){var t=e.gameName,a=V(),r=n.a.useState(void 0),c=Object(l.a)(r,2),i=c[0],o=c[1],s=n.a.useState(void 0),d=Object(l.a)(s,2),j=d[0],u=d[1],b=n.a.useState("leaderboard"),h=Object(l.a)(b,2),f=h[0],m=h[1],O=n.a.useCallback((function(e){u(e.target.value)}),[u]),x=n.a.useCallback((function(e){m(e.target.value)}),[m]);n.a.useEffect((function(){o(void 0),G.request(t,"ranks").then((function(e){a.current&&(o(e),u(e[0].name))})).catch((function(e){console.error(e),a.current&&o(null)}))}),[o,a]);var p=Ir(),g=i?i.find((function(e){return e.name===j})):void 0;return Object(H.jsxs)(H.Fragment,{children:[j&&i&&i.length>1&&Object(H.jsxs)(la.a,{className:p.formControl,children:[Object(H.jsx)(oa.a,{children:"Campaign"}),Object(H.jsx)(sa.a,{value:j,onChange:O,children:i.map((function(e){return Object(H.jsx)(_.a,{value:e.name,children:e.name},e.name)}))})]}),Object(H.jsxs)(la.a,{className:p.formControl,children:[Object(H.jsx)(oa.a,{children:"Rankings Type"}),Object(H.jsxs)(sa.a,{value:f,onChange:x,children:[Object(H.jsx)(_.a,{value:"leaderboard",children:"Live"}),Object(H.jsx)(_.a,{value:"uniqueLeaderboard",children:"Unique"}),Object(H.jsx)(_.a,{value:"historyLeaderboard",children:"Total"})]})]}),null===g&&Object(H.jsx)(Et,{data:"No data."}),void 0===g&&Object(H.jsx)(Ue.a,{}),null!==g&&void 0!==g&&Object(H.jsxs)(Ce.a,{container:!0,direction:"row",justify:"center",alignContent:"center",children:[Object(H.jsx)(Ce.a,{item:!0,xs:12,md:6,children:Object(H.jsx)(nt,{game:t,data:g[f],hasDuration:"uniqueLeaderboard"!==f})}),Object(H.jsx)(Ce.a,{item:!0,xs:12,md:6,children:Object(H.jsx)(Ce.a,{container:!0,direction:"column",justify:"center",children:Object(H.jsx)(Ce.a,{item:!0,xs:12,className:p.padTop,children:"uniqueLeaderboard"===f?Object(H.jsx)(qa,{title:"WRs",labels:g[f].map((function(e){return e.user.name})).slice(0,20),series:[{name:"Unique WRs",data:g[f].slice(0,20).map((function(e){return e.wrs}))}]}):Object(H.jsx)(It,{title:"WRs",labels:g[f].map((function(e){return e.user.name})),series:g[f].map((function(e){return e.wrs}))})})})})]})]})},qr=[{id:"track.name",sortable:!1,label:"Map",align:"left"},{id:"score",sortable:!1,label:"Times",label2:"Scores",align:"left"},{id:"delta",sortable:!1,label:"Timesave",label2:"Improvement",align:"left"},{id:"user.name",sortable:!1,label:"Player",align:"left"},{id:"duration",sortable:!1,label:"Duration",align:"left"},{id:"date",sortable:!1,label:"Start",align:"left"},{id:"beatenBy.date",sortable:!1,label:"Ended",align:"left"},{id:"beatenBy.user.name",sortable:!1,label:"Beaten By",align:"left"}],Yr=function(e){var t=e.order,a=e.orderBy,r=e.onRequestSort,n=e.scoreType;return Object(H.jsx)(De.a,{children:Object(H.jsx)(Se.a,{children:qr.map((function(e){return Object(H.jsxs)(we.a,{align:e.align,padding:"default",sortDirection:a===e.id&&t,children:[!0===e.sortable&&Object(H.jsx)(E.a,{title:"Sort by "+e.label,placement:"bottom-start",enterDelay:300,children:Object(H.jsx)(We.a,{active:a===e.id,direction:t,onClick:(c=e.id,i=e.id2,function(e){r(e,c,i)}),children:"Stunts"===n&&e.label2?e.label2:e.label})}),!1===e.sortable&&e.label]},e.id);var c,i}))})})},Wr=Object(u.a)((function(e){return{root:{overflowX:"auto"}}})),Fr={order:"desc",orderBy:"duration",thenBy:"date",page:0,rowsPerPage:50},Gr={whiteSpace:"nowrap"},Hr={padding:"7px 0px 7px 16px"},Xr=function(e){return Object(H.jsx)(we.a,Object(Q.a)({style:Hr},e))},Zr=function(e){var t=e.game,a=e.data,r=e.scoreType,c=n.a.useState(Object(Q.a)({},Fr)),i=Object(l.a)(c,2),o=i[0],s=o.order,d=o.orderBy,j=o.thenBy,u=i[1],b=Wr(),h=Ke(t);return Object(H.jsx)("div",{className:b.root,children:Object(H.jsxs)(ve.a,{size:"small",children:[Object(H.jsx)(Yr,{order:s,orderBy:d,onRequestSort:function(e,t,a){var r=t,n=a;u((function(e){return Object(Q.a)(Object(Q.a)({},e),{},{order:e.orderBy===r&&"desc"===e.order?"asc":"desc",orderBy:r,thenBy:n})}))},scoreType:r}),Object(H.jsx)(ke.a,{children:He(a,s,d,j).map((function(e){return Object(H.jsxs)(Se.a,{tabIndex:-1,children:[Object(H.jsx)(Xr,{style:Gr,align:"left",children:Object(H.jsx)(k.a,{color:"inherit",href:h.trackUrl(e.track.id),rel:"noreferrer",target:"_blank",children:e.track.name})}),Object(H.jsxs)(Xr,{align:"left",style:Gr,children:[dt(e.score,t,e.track.type)," \u2192"," ",dt(e.lastScore,t,e.track.type)]}),Object(H.jsxs)(Xr,{align:"left",children:["Stunts"===e.track.type?"+":"-",dt(Math.abs(e.lastScore-e.score),t,e.track.type)]}),Object(H.jsx)(Xr,{style:Gr,align:"left",children:Object(H.jsx)(k.a,{color:"inherit",href:h.userUrl(e.user.id),rel:"noreferrer",target:"_blank",children:e.user.name})}),Object(H.jsx)(Xr,{align:"left",children:Object(H.jsx)(E.a,{title:"in days",placement:"bottom-end",enterDelay:300,children:Object(H.jsx)("span",{children:e.duration})})}),Object(H.jsx)(Xr,{align:"left",children:Object(H.jsx)(E.a,{title:Object(H.jsx)(it.a,{fromNow:!0,children:e.date}),placement:"bottom-end",enterDelay:300,children:Object(H.jsx)(it.a,{style:Object(Q.a)({color:ut(e.date)},Gr),format:"YYYY-MM-DD",children:e.date})})}),Object(H.jsx)(Xr,{align:"left",children:e.beatenBy.length>0?Object(H.jsx)(E.a,{title:Object(H.jsx)(it.a,{fromNow:!0,children:e.beatenBy[0].date}),placement:"bottom-end",enterDelay:300,children:Object(H.jsx)(it.a,{style:Object(Q.a)({color:ut(e.beatenBy[0].date)},Gr),format:"YYYY-MM-DD",children:e.beatenBy[0].date})}):Object(H.jsx)("span",{children:"ongoing"})}),Object(H.jsx)(Xr,{style:Gr,align:"left",children:e.beatenBy.length>0?Object(H.jsx)(k.a,{color:"inherit",href:h.userUrl(e.beatenBy[0].user.id),rel:"noreferrer",target:"_blank",children:e.beatenBy[0].user.name}):Object(H.jsx)("span",{children:"unbeaten"})})]},e.replay)}))})]})})},Jr=[{id:"track.name",sortable:!1,label:"Map",align:"left"},{id:"score",sortable:!1,label:"Time",label2:"Score",align:"left"},{id:"user.name",sortable:!1,label:"Player",align:"left"},{id:"duration",sortable:!1,label:"Duration",align:"left"},{id:"date",sortable:!1,label:"Start",align:"left"},{id:"beatenBy.date",sortable:!1,label:"Ended",align:"left"},{id:"beatenBy.user.name",sortable:!1,label:"Beaten By",align:"left"}],Kr=function(e){var t=e.order,a=e.orderBy,r=e.onRequestSort,n=e.scoreType;return Object(H.jsx)(De.a,{children:Object(H.jsx)(Se.a,{children:Jr.map((function(e){return Object(H.jsxs)(we.a,{align:e.align,padding:"default",sortDirection:a===e.id&&t,children:[!0===e.sortable&&Object(H.jsx)(E.a,{title:"Sort by "+e.label,placement:"bottom-start",enterDelay:300,children:Object(H.jsx)(We.a,{active:a===e.id,direction:t,onClick:(c=e.id,i=e.id2,function(e){r(e,c,i)}),children:"Stunts"===n&&e.label2?e.label2:e.label})}),!1===e.sortable&&e.label]},e.id);var c,i}))})})},Vr=Object(u.a)((function(e){return{root:{overflowX:"auto"}}})),$r={order:"desc",orderBy:"duration",thenBy:"date",page:0,rowsPerPage:50},Qr={whiteSpace:"nowrap"},en={padding:"7px 0px 7px 16px"},tn=function(e){return Object(H.jsx)(we.a,Object(Q.a)({style:en},e))},an=function(e){var t=e.game,a=e.data,r=e.scoreType,c=n.a.useState(Object(Q.a)({},$r)),i=Object(l.a)(c,2),o=i[0],s=o.order,d=o.orderBy,j=o.thenBy,u=i[1],b=Vr(),h=Ke(t);return Object(H.jsx)("div",{className:b.root,children:Object(H.jsxs)(ve.a,{size:"small",children:[Object(H.jsx)(Kr,{order:s,orderBy:d,onRequestSort:function(e,t,a){var r=t,n=a;u((function(e){return Object(Q.a)(Object(Q.a)({},e),{},{order:e.orderBy===r&&"desc"===e.order?"asc":"desc",orderBy:r,thenBy:n})}))},scoreType:r}),Object(H.jsx)(ke.a,{children:He(a,s,d,j).map((function(e){return Object(H.jsxs)(Se.a,{tabIndex:-1,children:[Object(H.jsx)(tn,{style:Qr,align:"left",children:Object(H.jsx)(k.a,{color:"inherit",href:h.trackUrl(e.track.id),rel:"noreferrer",target:"_blank",children:e.track.name})}),Object(H.jsx)(tn,{align:"left",children:dt(e.score,t,e.track.type)}),Object(H.jsx)(tn,{style:Qr,align:"left",children:Object(H.jsx)(k.a,{color:"inherit",href:h.userUrl(e.user.id),rel:"noreferrer",target:"_blank",children:e.user.name})}),Object(H.jsx)(tn,{align:"left",children:Object(H.jsx)(E.a,{title:"in days",placement:"bottom-end",enterDelay:300,children:Object(H.jsx)("span",{children:e.duration})})}),Object(H.jsx)(tn,{align:"left",children:Object(H.jsx)(E.a,{title:Object(H.jsx)(it.a,{fromNow:!0,children:e.date}),placement:"bottom-end",enterDelay:300,children:Object(H.jsx)(it.a,{style:Object(Q.a)({color:ut(e.date)},Qr),format:"YYYY-MM-DD",children:e.date})})}),Object(H.jsx)(tn,{align:"left",children:e.beatenBy.length>0?Object(H.jsx)(E.a,{title:Object(H.jsx)(it.a,{fromNow:!0,children:e.beatenBy[0].date}),placement:"bottom-end",enterDelay:300,children:Object(H.jsx)(it.a,{style:Object(Q.a)({color:ut(e.beatenBy[0].date)},Qr),format:"YYYY-MM-DD",children:e.beatenBy[0].date})}):Object(H.jsx)("span",{children:"ongoing"})}),Object(H.jsx)(tn,{style:Qr,align:"left",children:e.beatenBy.length>0?Object(H.jsx)(k.a,{color:"inherit",href:h.userUrl(e.beatenBy[0].user.id),rel:"noreferrer",target:"_blank",children:e.beatenBy[0].user.name}):Object(H.jsx)("span",{children:"unbeaten"})})]},e.replay)}))})]})})},rn=[{id:"track.name",sortable:!1,label:"Map",align:"left"},{id:"score",sortable:!1,label:"Time",label2:"Score",align:"left"},{id:"user.name",sortable:!1,label:"Player",align:"left"},{id:"delta",sortable:!1,label:"Improvement",align:"left"},{id:"date",sortable:!1,label:"Date",align:"left"}],nn=function(e){var t=e.order,a=e.orderBy,r=e.onRequestSort,n=e.scoreType;return Object(H.jsx)(De.a,{children:Object(H.jsx)(Se.a,{children:rn.map((function(e){return Object(H.jsxs)(we.a,{align:e.align,padding:"default",sortDirection:a===e.id&&t,children:[!0===e.sortable&&Object(H.jsx)(E.a,{title:"Sort by "+e.label,placement:"bottom-start",enterDelay:300,children:Object(H.jsx)(We.a,{active:a===e.id,direction:t,onClick:(c=e.id,i=e.id2,function(e){r(e,c,i)}),children:"Stunts"===n&&e.label2?rowl.label2:e.label})}),!1===e.sortable&&e.label]},e.id);var c,i}))})})},cn=Object(u.a)((function(e){return{root:{overflowX:"auto"}}})),on={order:"desc",orderBy:"delta",thenBy:"date",page:0,rowsPerPage:50},ln={whiteSpace:"nowrap"},sn={padding:"7px 0px 7px 16px"},dn=function(e){return Object(H.jsx)(we.a,Object(Q.a)({style:sn},e))},jn=function(e){var t=e.game,a=e.data,r=e.scoreType,c=n.a.useState(Object(Q.a)({},on)),i=Object(l.a)(c,2),o=i[0],s=o.order,d=o.orderBy,j=o.thenBy,u=i[1],b=cn(),h=Ke(t);return Object(H.jsx)("div",{className:b.root,children:Object(H.jsxs)(ve.a,{size:"small",children:[Object(H.jsx)(nn,{order:s,orderBy:d,onRequestSort:function(e,t,a){var r=t,n=a;u((function(e){return Object(Q.a)(Object(Q.a)({},e),{},{order:e.orderBy===r&&"desc"===e.order?"asc":"desc",orderBy:r,thenBy:n})}))},scoreType:r}),Object(H.jsx)(ke.a,{children:He(a,s,d,j).map((function(e){return Object(H.jsxs)(Se.a,{tabIndex:-1,children:[Object(H.jsx)(dn,{style:ln,align:"left",children:Object(H.jsx)(k.a,{color:"inherit",href:h.trackUrl(e.track.id),rel:"noreferrer",target:"_blank",children:e.track.name})}),Object(H.jsx)(dn,{align:"left",children:dt(e.score,t,e.track.type)}),Object(H.jsx)(dn,{style:ln,align:"left",children:Object(H.jsx)(k.a,{color:"inherit",href:h.userUrl(e.user.id),rel:"noreferrer",target:"_blank",children:e.user.name})}),Object(H.jsx)(dn,{align:"left",children:Object(H.jsxs)("span",{children:["Stunts"===e.track.type?"+":"-",dt(e.delta,t,e.track.type)]})}),Object(H.jsx)(dn,{align:"left",children:Object(H.jsx)(E.a,{title:Object(H.jsx)(it.a,{fromNow:!0,children:e.date}),placement:"bottom-end",enterDelay:300,children:Object(H.jsx)(it.a,{style:Object(Q.a)({color:ut(e.date)},ln),format:"YYYY-MM-DD",children:e.date})})})]},e.replay)}))})]})})},un=Object(u.a)((function(e){return{padTop:{paddingTop:"70px"},formControl:{margin:e.spacing(1),minWidth:120}}})),bn=function(e){var t=e.gameName,a=V(),r=n.a.useState(void 0),c=Object(l.a)(r,2),i=c[0],o=c[1],s=n.a.useState(void 0),d=Object(l.a)(s,2),j=d[0],u=d[1],b=n.a.useState("longestLasting"),h=Object(l.a)(b,2),f=h[0],m=h[1],O=n.a.useState("Race"),x=Object(l.a)(O,2),p=x[0],g=x[1],y=n.a.useCallback((function(e){m(e.target.value)}),[m]),v=n.a.useCallback((function(e){g(e.target.value)}),[g]),k=n.a.useCallback((function(e){u(e.target.value),g(i?i.find((function(t){return t.name===e.target.value}))[f][0].track.type:"Race")}),[i,u,g]);n.a.useEffect((function(){o(void 0),G.request(t,"stats").then((function(e){a.current&&(o(e),u(e[0].name),g(e[0][f][0].track.type))})).catch((function(e){console.error(e),a.current&&o(null)}))}),[o,u,g,a]);var w=function(){switch(f){case"longestDomination":return Zr;case"longestLasting":return an;case"largestImprovement":return jn;default:return null}}(),D=un(),S=i?i.find((function(e){return e.name===j})):void 0;return Object(H.jsxs)(H.Fragment,{children:[j&&i&&i.length>1&&Object(H.jsxs)(la.a,{className:D.formControl,children:[Object(H.jsx)(oa.a,{children:"Campaign"}),Object(H.jsx)(sa.a,{value:j,onChange:k,children:i.map((function(e){return Object(H.jsx)(_.a,{value:e.name,children:e.name},e.name)}))})]}),Object(H.jsxs)(la.a,{className:D.formControl,children:[Object(H.jsx)(oa.a,{children:"Stats Type"}),Object(H.jsxs)(sa.a,{value:f,onChange:y,children:[Object(H.jsx)(_.a,{value:"longestLasting",children:"Longest Lasting"}),Object(H.jsx)(_.a,{value:"longestDomination",children:"Longest Domination"}),Object(H.jsx)(_.a,{value:"largestImprovement",children:"Largest Improvement"})]})]}),S&&new Set(S[f].map((function(e){return e.track.type}))).size>1&&Object(H.jsxs)(la.a,{className:D.formControl,children:[Object(H.jsx)(oa.a,{children:"Track Type"}),Object(H.jsxs)(sa.a,{value:p,onChange:v,children:[Object(H.jsx)(_.a,{value:"Race",children:"Race"}),Object(H.jsx)(_.a,{value:"Stunts",children:"Stunts"})]})]}),null===S&&Object(H.jsx)(Et,{data:"No data."}),void 0===S&&Object(H.jsx)(Ue.a,{}),null!==S&&void 0!==S&&Object(H.jsx)(Ce.a,{container:!0,direction:"column",justify:"center",children:Object(H.jsx)(Ce.a,{item:!0,xs:12,children:Object(H.jsx)(Ce.a,{container:!0,direction:"row",justify:"center",alignContent:"center",children:Object(H.jsx)(Ce.a,{item:!0,xs:12,children:S&&S[f]&&Object(H.jsx)(w,{game:t,data:S[f].filter((function(e){return e.track.type===p})),trackType:p})})})})})]})},hn=Object(Re.a)((function(e){var t=e.match,a=n.a.useState(0),r=Object(l.a)(a,2),c=r[0],i=r[1],o=t.path;n.a.useEffect((function(){i(0)}),[o]);var s=t.path.slice(1);return Object(H.jsxs)(Te,{children:[Object(H.jsxs)(ge.a,{children:[Object(H.jsxs)(Ye.a,{value:c,onChange:function(e,t){i(t)},indicatorColor:"primary",textColor:"primary",variant:"scrollable",scrollButtons:"auto",children:[Object(H.jsx)(qe.a,{label:"Campaign"}),Object(H.jsx)(qe.a,{label:"Rankings"}),Object(H.jsx)(qe.a,{label:"Statistics"})]}),Object(H.jsx)(T.a,{component:"div",role:"tabpanel",children:Object(H.jsxs)(Ie.a,{p:3,children:[0===c&&Object(H.jsx)(Rr,{gameName:s}),1===c&&Object(H.jsx)(Ur,{gameName:s}),2===c&&Object(H.jsx)(bn,{gameName:s})]})})]}),Object(H.jsx)(Ht,{})]})})),fn=function(){var e=n.a.useContext(ne).dispatch,t=Object(d.h)(),a=Object(d.g)(),r=Object(d.i)();return n.a.useEffect((function(){F.login(r.source,t.search).then((function(t){e({action:"setProfile",data:t}),a.push("/")})).catch(console.error)}),[]),Object(H.jsx)(Te,{children:Object(H.jsx)(ge.a,{children:Object(H.jsx)(Et,{data:"Logging in..."})})})},mn=function(){var e,t=n.a.useContext(ne).state.user;return Object(H.jsx)(Te,{children:Object(H.jsxs)(ge.a,{children:[!t.isLoggedIn()&&Object(H.jsx)(Et,{data:"Not logged in :("}),t.isLoggedIn()&&Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(T.a,{variant:"h5",gutterBottom:!0,style:{padding:"50px 50px 0px 50px"},children:t.profile.nickname}),Object(H.jsxs)(T.a,{variant:"body1",gutterBottom:!0,style:{padding:"0px 50px 0px 50px"},children:["Permissions: ",(e=t.profile,[{value:je.api_MANAGE_DATA,text:"api_MANAGE_DATA"},{value:je.api_MANAGE_USERS,text:"api_MANAGE_USERS"},{value:je.trackmania_DOWNLOAD_FILES,text:"trackmania_DOWNLOAD_FILES"},{value:je.trackmania_MANAGE_MEDIA,text:"trackmania_MANAGE_MEDIA"},{value:je.trackmania_MANAGE_DATA,text:"trackmania_MANAGE_DATA"},{value:je.maniaplanet_DOWNLOAD_FILES,text:"maniaplanet_DOWNLOAD_FILES"},{value:je.maniaplanet_MANAGE_MEDIA,text:"maniaplanet_MANAGE_MEDIA"},{value:je.maniaplanet_MANAGE_DATA,text:"maniaplanet_MANAGE_DATA"}].filter((function(t){var a=t.value;return e.permissions&a})).map((function(e){return e.text})).join(" | ")||"none")]}),Object(H.jsxs)(T.a,{variant:"body1",gutterBottom:!0,style:{padding:"0px 50px 0px 50px"},children:["Status: ",function(e){var t=[{value:de.ACTIVE,text:"active"},{value:de.INACTIVE,text:"inactive"},{value:de.BANNED,text:"banned"}].find((function(t){var a=t.value;return e.status===a}));return t?t.text:"unknown"}(t.profile)]}),Object(H.jsxs)(T.a,{variant:"body1",gutterBottom:!0,style:{padding:"0px 50px 0px 50px"},children:["Source: ",t.profile.source]}),Object(H.jsxs)(T.a,{variant:"body1",gutterBottom:!0,style:{padding:"0px 50px 50px 50px"},children:["Login ID: ",t.profile.login_id]})]})]})})},On=function(){var e=n.a.useContext(ne),t=e.state.users,a=e.dispatch;return n.a.useEffect((function(){F.getUsers().then((function(e){var t=e.data;return a({action:"setUsers",data:t})})).catch(console.error)}),[]),Object(H.jsx)(Te,{children:Object(H.jsx)(ge.a,{children:t.map((function(e){return Object(H.jsxs)("div",{children:[e.nickname," | ",e.permissions," | ",e.status," | ",e.source," | ",e.login_id]},e._id)}))})})},xn=Object(u.a)((function(e){return{views:{marginTop:e.spacing(5)}}})),pn=function(){var e=n.a.useReducer.apply(n.a,Object(o.a)(re)),t=Object(l.a)(e,2),a=t[0],r=t[1],c=n.a.useMemo((function(){return Object(m.a)({palette:{primary:{light:h.a[300],main:h.a[500],dark:h.a[700]},secondary:{light:f.a[300],main:f.a[500],dark:f.a[700]},error:{main:h.a.A400},type:a.darkMode.enabled?"dark":"light"}})}),[a.darkMode.enabled]),i=xn(),u=n.a.useMemo((function(){return{state:a,dispatch:r}}),[a,r]);return Object(H.jsxs)(b.a,{theme:c,children:[Object(H.jsx)(j.a,{}),Object(H.jsx)(ne.Provider,{value:u,children:Object(H.jsxs)(s.a,{children:[Object(H.jsx)(he,{}),Object(H.jsx)("div",{className:i.views,children:Object(H.jsxs)(d.d,{children:[Object(H.jsx)(d.a,{exact:!0,from:"/",to:"/trackmania"}),Object(H.jsx)(d.a,{exact:!0,from:"/tm",to:"/trackmania"}),Object(H.jsx)(d.a,{exact:!0,from:"/wii",to:"/tmwii"}),Object(H.jsx)(d.a,{exact:!0,from:"/tmo",to:"/original"}),Object(H.jsx)(d.a,{exact:!0,from:"/tmn",to:"/nations"}),Object(H.jsx)(d.a,{exact:!0,from:"/tms",to:"/sunrise"}),Object(H.jsx)(d.a,{exact:!0,from:"/tmnf",to:"/tmnforever"}),Object(H.jsx)(d.b,{exact:!0,path:"/trackmania",component:Dr}),Object(H.jsx)(d.b,{exact:!0,path:"/tmnforever",component:hn}),Object(H.jsx)(d.b,{exact:!0,path:"/united",component:hn}),Object(H.jsx)(d.b,{exact:!0,path:"/(nations|original|sunrise|tm2|tmwii)/:date?",component:Zt}),Object(H.jsx)(d.b,{exact:!0,path:"/replay",component:na}),Object(H.jsx)(d.b,{exact:!0,path:"/about",component:ze}),Object(H.jsx)(d.b,{exact:!0,path:"/login/:source(trackmania|maniaplanet)",component:fn}),Object(H.jsx)(d.b,{exact:!0,path:"/me",component:mn}),Object(H.jsx)(d.b,{exact:!0,path:"/users",component:On}),Object(H.jsx)(d.b,{component:Jt})]})})]})})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(H.jsx)(pn,{}),document.querySelector("#root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[191,1,2]]]);
//# sourceMappingURL=main.5da861cf.chunk.js.map