(this["webpackJsonptrackmania-records"]=this["webpackJsonptrackmania-records"]||[]).push([[0],{180:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(16),i=a.n(c),l=a(147),o=a(8),s=a(61),d=a(60),j=a(263),b=a(132),u=a(262),h=a(112),f=a(113),m=a(146),O=a(238),x=a(237),p=a(31),g=a(269),y=a(183),v=a(240),k=a(233),w=a(181),S=a(236),D=a(273),B=a(239),C=a(85),T=a(135),N=a.n(T),z=function(){var e=n.a.useRef(!1);return n.a.useEffect((function(){return e.current=!0,function(){return e.current=!1}}),[]),e},R=function(e,t){var a=n.a.useState((function(){var a=localStorage.getItem(e);if(a)try{return JSON.parse(a)}catch(r){}return localStorage.setItem(e,JSON.stringify(t)),t})),r=Object(o.a)(a,2),c=r[0],i=r[1];return[c,n.a.useCallback((function(t){i(t),localStorage.setItem(e,JSON.stringify(t))}),[i])]},M=a(1),L=Object(b.a)((function(e){return{root:{paddingBottom:e.spacing(8)},list:{width:e.spacing(25)},menuButton:{marginLeft:-12,marginRight:20},drawer:{width:240,flexShrink:0},appBar:{zIndex:e.zIndex.drawer+1},flex:{flex:1},active:{color:e.palette.primary.main}}})),P=[{title:"404 - Page Not Found",link:null,inDrawer:!1},{title:"trackmania-records",link:"/",inDrawer:!1},{title:"Trackmania",link:"/trackmania",inDrawer:!0,default:!0},{title:"Trackmania 2",link:"/tm2",inDrawer:!0,default:!0},{title:"Trackmania Wii",link:"/tmwii",inDrawer:!0,default:!0},{title:"Nations Forever",link:"/tmnforever",inDrawer:!0},{title:"United",link:"/united",inDrawer:!0},{title:"Nations ESWC",link:"/nations",inDrawer:!0},{title:"Replay Inspection",link:"/replay",inDrawer:!1},{title:"About",link:"/about",inDrawer:!1}],q=Object(d.g)((function(e){var t,a=e.location,r=n.a.useState(!1),c=Object(o.a)(r,2),i=c[0],l=c[1],d=n.a.useMemo((function(){return P.find((function(e){return e.link===a.pathname||null!==e.link&&a.pathname.startsWith(e.link+"/")}))||P[0]}),[a]);t=d.title,n.a.useEffect((function(){document.title=t+" - "+document.location.host}),[t]);var j=function(e){return function(){l(e)}},b=L(),u=Object(M.jsxs)("div",{className:b.list,children:[Object(M.jsx)(k.a,{children:Object(M.jsx)(w.a,{button:!0,component:s.b,to:"/",children:Object(M.jsx)(S.a,{primary:"Trackmania Records"})},0)}),Object(M.jsx)(x.a,{}),Object(M.jsxs)(k.a,{children:[P.filter((function(e){return e.inDrawer})).map((function(e,t){return Object(M.jsx)(w.a,{button:!0,component:s.b,to:e.link,className:e.title===d.title?b.active:void 0,children:Object(M.jsx)(S.a,{primary:e.title})},t)})),Object(M.jsx)(x.a,{}),Object(M.jsxs)(k.a,{children:[Object(M.jsx)(w.a,{button:!0,component:s.b,to:"/replay",className:"/replay"===d.link?b.active:void 0,children:Object(M.jsx)(S.a,{primary:"Replay Inspection"})},0),Object(M.jsx)(w.a,{button:!0,component:s.b,to:"/about",className:"/about"===d.link?b.active:void 0,children:Object(M.jsx)(S.a,{primary:"About"})},1)]})]})]});return Object(M.jsxs)("div",{className:b.root,children:[Object(M.jsx)(O.a,{className:b.appBar,position:"fixed",children:Object(M.jsxs)(B.a,{children:[Object(M.jsx)(g.a,{lgUp:!0,children:Object(M.jsx)(y.a,{className:b.menuButton,onClick:j(!0),color:"inherit",children:Object(M.jsx)(N.a,{})})}),Object(M.jsx)(C.a,{variant:"h6",color:"inherit",children:Object(M.jsx)(v.a,{component:s.b,to:"/",color:"inherit",underline:"none",children:d.title})})]})}),Object(M.jsx)(g.a,{lgUp:!0,implementation:"css",children:Object(M.jsx)(D.a,{open:i,onClose:j(!1),onOpen:j(!0),variant:"temporary",children:Object(M.jsx)("div",{tabIndex:0,role:"button",onClick:j(!1),onKeyDown:j(!1),children:u})})}),Object(M.jsx)(g.a,{mdDown:!0,implementation:"css",children:Object(M.jsx)(p.a,{variant:"permanent",children:Object(M.jsx)("div",{tabIndex:0,role:"button",children:u})})})]})})),Y=a(7),U=a(14),I=a.n(U),W=a(244),E=a(251),_=a(250),F=a(182),A=a(252),H=a(245),X=a(248),Z=a(243),G=a(246),J=a(247),K=a(274),$=a(242),Q=Object(b.a)((function(e){return{root:{marginBottom:30}}})),V=function(e){var t=e.children,a=Q();return Object(M.jsxs)($.a,{className:a.root,container:!0,children:[Object(M.jsx)($.a,{item:!0,xs:!1,md:1,lg:2}),Object(M.jsx)($.a,{item:!0,xs:12,md:10,lg:9,children:t})]})},ee=a(102),te=a(103),ae={darkMode:new(function(){function e(){Object(ee.a)(this,e),this.enabled="true"===localStorage.getItem("dark_mode")}return Object(te.a)(e,[{key:"toggle",value:function(){return this.enabled=!this.enabled,localStorage.setItem("dark_mode",this.enabled.toString()),this}}]),e}())},re=[function(e,t){switch(t.action){case"toggleDarkMode":return Object(Y.a)(Object(Y.a)({},e),{},{darkMode:e.darkMode.toggle()});default:throw new Error("Unknown action type.")}},ae],ne=n.a.createContext(ae),ce=Object(b.a)((function(e){return{aboutBox:{padding:e.spacing(3)}}})),ie=[{repo:"NeKzor/trackmania-records",branch:"master"},{repo:"NeKzBot/tmx-records",branch:"api"},{repo:"NeKzor/trackmania-records",branch:"gh-pages"}],le={whiteSpace:"nowrap"},oe=function(e){return Object(M.jsx)(Z.a,Object(Y.a)({size:"small"},e))},se=function(){return Object(M.jsx)("div",{style:{paddingTop:"50px"}})},de=function(){var e=I.a.utc(),t=I()().utc().endOf("day").add(17,"hours");t.isBefore(e)&&(t=I()().utc().endOf("day").add(1,"day").add(17,"hours"));var a=I.a.duration({from:e,to:t}),r=a.get("hours"),n=a.get("minutes"),c=a.get("seconds"),i=function(e){return 1===e?"":"s"};return"".concat(r," hour").concat(i(r),", ").concat(n," minute").concat(i(n),", ").concat(c," second").concat(i(c))},je=null,be=function(){var e=z(),t=n.a.useContext(ne),a=t.state.darkMode,r=t.dispatch,c=n.a.useState([]),i=Object(o.a)(c,2),l=i[0],s=i[1],d=n.a.useState(de()),j=Object(o.a)(d,2),b=j[0],u=j[1];n.a.useEffect((function(){return je=setInterval((function(){u(de())}),1e3),function(){return clearInterval(je)}}),[]);n.a.useEffect((function(){var t=function(t){console.error(t),e.current&&s(void 0)};Promise.all(ie.map((function(e){var t=e.repo,a=e.branch;return fetch("https://api.github.com/repos/".concat(t,"/commits/").concat(a))}))).then((function(a){Promise.all(a.map((function(e){return e.json()}))).then((function(t){e.current&&s(t.map((function(e){return{sha:e.sha,author:e.author?e.author:e.commit.author,message:e.commit.message,date:e.commit.author.date}})))})).catch(t)})).catch(t)}),[e]);var h=ce();return Object(M.jsx)(V,{children:Object(M.jsxs)(F.a,{className:h.aboutBox,children:[Object(M.jsx)(C.a,{component:"h2",variant:"h5",children:"Trackmania Campaign Records & Statistics"}),Object(M.jsx)("br",{}),Object(M.jsx)(C.a,{variant:"body1",children:"The largest mirror for campaign world records of many Trackmania games."}),Object(M.jsx)(C.a,{variant:"body1",children:"We list, rank and compare players who set the fastest runs."}),Object(M.jsx)(se,{}),Object(M.jsx)(C.a,{variant:"h5",children:"Next Update"}),Object(M.jsx)("br",{}),b,Object(M.jsx)("br",{}),Object(M.jsx)("br",{}),"For Trackmania we scan every 15 minutes, for everything else every 24 hours.",Object(M.jsx)(se,{}),Object(M.jsx)(C.a,{variant:"h5",children:"Changelog"}),Object(M.jsx)("br",{}),void 0===l?Object(M.jsx)(C.a,{variant:"body1",children:"Unable to fetch status from GitHub."}):0===l.length?Object(M.jsx)(W.a,{className:h.progress}):Object(M.jsx)("div",{style:{overflowX:"auto"},children:Object(M.jsxs)(H.a,{size:"small",children:[Object(M.jsx)(G.a,{children:Object(M.jsxs)(J.a,{children:[Object(M.jsx)(Z.a,{padding:"default",children:Object(M.jsx)(C.a,{variant:"body1",children:"Branch"})}),Object(M.jsx)(Z.a,{padding:"default",children:Object(M.jsx)(C.a,{variant:"body1",children:"Date"})}),Object(M.jsx)(Z.a,{padding:"default",children:Object(M.jsx)(C.a,{variant:"body1",children:"Author"})}),Object(M.jsx)(Z.a,{padding:"default",children:Object(M.jsx)(C.a,{variant:"body1",children:"Commit"})})]})}),Object(M.jsx)(X.a,{children:l.map((function(e,t){var a=ie[t],r=a.repo,n=a.branch;return Object(M.jsxs)(J.a,{tabIndex:-1,style:le,children:[Object(M.jsx)(oe,{align:"left",children:Object(M.jsx)(v.a,{color:"inherit",rel:"noopener",href:"https://github.com/".concat(r,"/tree/").concat(n),children:n})}),Object(M.jsx)(oe,{align:"left",style:le,children:Object(M.jsx)(K.a,{title:I()(e.date).toString(),children:Object(M.jsx)("span",{children:I()(e.date).from()})})}),Object(M.jsx)(oe,{align:"left",children:e.author.html_url?Object(M.jsx)(v.a,{color:"inherit",rel:"noopener",href:e.author.html_url,children:e.author.login}):e.author.name||"n/a"}),Object(M.jsx)(oe,{align:"left",style:le,children:Object(M.jsx)(K.a,{title:e.message,children:Object(M.jsx)(v.a,{color:"inherit",rel:"noopener",href:"https://github.com/".concat(r,"/commit/").concat(e.sha),children:e.sha})})})]},t)}))})]})}),Object(M.jsx)(se,{}),Object(M.jsx)(C.a,{variant:"h5",children:"Theme Settings"}),Object(M.jsx)("br",{}),Object(M.jsx)(_.a,{row:!0,children:Object(M.jsx)(E.a,{control:Object(M.jsx)(A.a,{checked:a.enabled,onChange:function(){r({action:"toggleDarkMode"})},color:"primary"}),label:"Dark Mode"})}),Object(M.jsx)(se,{}),Object(M.jsx)(C.a,{variant:"h5",children:"Sources"}),Object(M.jsx)("br",{}),Object(M.jsx)(v.a,{rel:"noopener",href:"https://www.tm-exchange.com",children:"tm-exchange.com"}),Object(M.jsx)("br",{}),Object(M.jsx)(v.a,{rel:"noopener",href:"https://tm.mania-exchange.com",children:"tm.mania-exchange.com"}),Object(M.jsx)("br",{}),Object(M.jsx)(v.a,{rel:"noopener",href:"https://www.speedrun.com/tmwii",children:"speedrun.com/tmwii"}),Object(M.jsx)("br",{}),"live-services.trackmania.nadeo.live"]})})},ue=a(83),he=a.n(ue),fe=a(39),me=a(106),Oe=a(79),xe=a(265),pe=a(256),ge=a(257),ye=a(267),ve=a(275),ke={numeric:!0},we=function(e,t,a){var r=function(e,t){var r=Be(e,a).toString();return Be(t,a).toString().localeCompare(r,void 0,ke)},n="desc"===t?function(e,t){return r(e,t)}:function(e,t){return-r(e,t)};return e.map((function(e,t){return[e,t]})).sort((function(e,t){var a=n(e[0],t[0]);return 0!==a?a:e[1]-t[1]})).map((function(e){return e[0]}))},Se=function(e,t,a,r){if(a===r||void 0===r)return we(e,t,a);var n=function(e,t){var n=Be(e,a).toString(),c=Be(t,a).toString(),i=c.localeCompare(n,void 0,ke);return 0!==i?i:(n=Be(e,r).toString(),(c=Be(t,r).toString()).localeCompare(n,void 0,ke))},c="desc"===t?function(e,t){return n(e,t)}:function(e,t){return-n(e,t)};return e.map((function(e,t){return[e,t]})).sort((function(e,t){var a=c(e[0],t[0]);return 0!==a?a:e[1]-t[1]})).map((function(e){return e[0]}))},De={},Be=function(e,t){return(-1!==t.indexOf(".")?t.split(".").filter((function(e){return e})).reduce((function(e,t){return e&&e[t]}),e):e[t])||De},Ce=function(e){return["nations","sunrise","original"].includes(e)?"http":"https"},Te=function(e){return"tm2"===e?{trackUrl:function(e){return"https://tm.mania-exchange.com/tracks/".concat(e)},imageUrl:function(e){return"https://tm.mania-exchange.com/tracks/screenshot/normal/".concat(e)},replayUrl:function(e){return"https://tm.mania-exchange.com/replays/download/".concat(e)},userUrl:function(e){return"https://tm.mania-exchange.com/user/profile/".concat(e)}}:"tmwii"===e?{trackUrl:function(e){return"https://speedrun.com/tmwii/".concat(e)},imageUrl:function(e){},replayUrl:function(e){},userUrl:function(e){return"https://www.speedrun.com/user/".concat(e)}}:{trackUrl:function(t){return"".concat(Ce(e),"://").concat(e,".tm-exchange.com/main.aspx?action=trackshow&id=").concat(t)},imageUrl:function(t){return"".concat(Ce(e),"://").concat(e,".tm-exchange.com/getclean.aspx?action=trackscreenscreens&id=").concat(t)},replayUrl:function(t){return"".concat(Ce(e),"://").concat(e,".tm-exchange.com/get.aspx?action=recordgbx&id=").concat(t)},userUrl:function(t){return"".concat(Ce(e),"://").concat(e,".tm-exchange.com/main.aspx?action=usershow&id=").concat(t)}}},Ne=[{id:"user.name",sortable:!1,label:"Player",align:"left"},{id:"wrs",id2:"duration",sortable:!0,label:"World Records",align:"left"},{id:"duration",id2:"wrs",sortable:!0,label:"Total Duration",align:"left"}],ze=function(e){var t=e.order,a=e.orderBy,r=e.onRequestSort,n=e.hasDuration;return Object(M.jsx)(G.a,{children:Object(M.jsx)(J.a,{children:(n?Ne:Ne.slice(0,-1)).map((function(e){return Object(M.jsxs)(Z.a,{align:e.align,padding:"default",sortDirection:a===e.id&&t,children:[!0===e.sortable&&Object(M.jsx)(K.a,{title:"Sort by "+e.label,placement:"bottom-start",enterDelay:300,children:Object(M.jsx)(ve.a,{active:a===e.id,direction:t,onClick:(n=e.id,c=e.id2,function(e){r(e,n,c)}),children:e.label})}),!1===e.sortable&&e.label]},e.id);var n,c}))})})},Re=Object(b.a)((function(e){return{root:{overflowX:"auto"}}})),Me={order:"desc",orderBy:"wrs",thenBy:"duration",page:0,rowsPerPage:50},Le={whiteSpace:"nowrap"},Pe={padding:"7px 0px 7px 16px"},qe=function(e){return Object(M.jsx)(Z.a,Object(Y.a)({style:Pe},e))},Ye=function(e){var t=e.data,a=e.game,r=e.hasDuration,c=n.a.useState(Me),i=Object(o.a)(c,2),l=i[0],s=l.order,d=l.orderBy,j=l.thenBy,b=l.rowsPerPage,u=l.page,h=i[1],f=Re();return Object(M.jsx)("div",{className:f.root,children:Object(M.jsxs)(H.a,{size:"small",children:[Object(M.jsx)(ze,{order:s,orderBy:d,onRequestSort:function(e,t,a){var r=t,n=a;h((function(e){return Object(Y.a)(Object(Y.a)({},e),{},{order:e.orderBy===r&&"desc"===e.order?"asc":"desc",orderBy:r,thenBy:n})}))},hasDuration:r}),Object(M.jsx)(X.a,{children:(r?Se:we)(t,s,d,j).slice(u*b,u*b+b).map((function(e){return Object(M.jsxs)(J.a,{tabIndex:-1,children:[Object(M.jsx)(qe,{align:"left",children:Object(M.jsx)(v.a,{style:Le,color:"inherit",href:Te(a).userUrl(e.user.id),rel:"noreferrer",target:"_blank",children:e.user.name})}),Object(M.jsx)(qe,{align:"left",children:e.wrs}),r&&Object(M.jsxs)(qe,{align:"left",children:[e.duration," day",1===e.duration?"":"s"]})]},e.user.id)}))})]})})},Ue=a(15),Ie=a.n(Ue),We=a(91),Ee=a.n(We),_e=a(264);function Fe(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;if(void 0===e||null===e)return e;if("Stunts"===a)return e+" pts.";if("tm2"!==t){var r=(e/=10)%100,n=Math.floor(e/100),c=n%60,i=Math.floor(n/60);return(i>0?i+":":"")+(c<10&&i>0?"0"+c:c)+"."+(r<10?"0"+r:r)}var l=e%1e3,o=Math.floor(e/1e3),s=o%60,d=Math.floor(o/60);return(d>0?d+":":"")+(s<10&&d>0?"0"+s:s)+"."+(l<100?l<10?"00"+l:"0"+l:l)}var Ae=Object(_e.a)().domain([0,24,336,1440]).range(["#2eb82e","#258e25","#cca300","#e67300"]);function He(e){var t=I()().diff(I()(e),"hours");return t<=1440?Ae(t):void 0}var Xe=Object(_e.a)().domain([0,480,960,1440]).range(["#2eb82e","#cca300","#e67300","#e63200"]);for(var Ze=[{id:"track.name",sortable:!0,label:"Track",align:"left"},{id:"score",sortable:!0,label:"Record",align:"left"},{id:"user.name",sortable:!0,label:"Player",align:"left"},{id:"date",sortable:!0,label:"Date",align:"left"},{id:"duration",sortable:!0,label:"Duration",align:"left"}],Ge=function(e){var t=e.order,a=e.orderBy,r=e.onRequestSort;return Object(M.jsx)(G.a,{children:Object(M.jsx)(J.a,{children:Ze.map((function(e){return Object(M.jsxs)(Z.a,{align:e.align,padding:"default",sortDirection:a===e.id&&t,children:[!0===e.sortable&&Object(M.jsx)(K.a,{title:"Sort by "+e.label,placement:"bottom-start",enterDelay:300,children:Object(M.jsx)(ve.a,{active:a===e.id,direction:t,onClick:(n=e.id,function(e){r(e,n)}),children:e.label})}),!1===e.sortable&&e.label]},e.id);var n}))})})},Je=Object(b.a)((function(e){return{root:{overflowX:"auto"}}})),Ke={order:"asc",orderBy:"track.name",page:0,rowsPerPage:250},$e={whiteSpace:"nowrap"},Qe={padding:"7px 0px 7px 16px"},Ve=function(e){return Object(M.jsx)(Z.a,Object(Y.a)({style:Qe},e))},et=function(e){var t=e.data,a=e.game,r=e.stats,c=e.useLiveDuration,i=n.a.useState(Ke),l=Object(o.a)(i,2),s=l[0],d=s.order,j=s.orderBy,b=s.rowsPerPage,u=s.page,h=l[1],f=Te(a),m=Je();return Object(M.jsx)("div",{className:m.root,children:Object(M.jsxs)(H.a,{size:"small",children:[Object(M.jsx)(Ge,{order:d,orderBy:j,onRequestSort:function(e,t){var a=t;h((function(e){return Object(Y.a)(Object(Y.a)({},e),{},{order:e.orderBy===a&&"desc"===e.order?"asc":"desc",orderBy:a})}))}}),Object(M.jsx)(X.a,{children:we(t,d,j).slice(u*b,u*b+b).map((function(e){var t=Fe(e.score,a,e.track.type);return Object(M.jsxs)(J.a,{tabIndex:-1,children:[(e.track.isFirst||"track.name"!==j)&&Object(M.jsx)(Ve,{style:$e,rowSpan:"track.name"!==j?1:e.track.records,align:"left",children:Object(M.jsx)(v.a,{color:"inherit",href:f.trackUrl(e.track.id),rel:"noreferrer",target:"_blank",children:e.track.name})}),Object(M.jsxs)(Ve,{align:"left",children:[Object(M.jsx)(K.a,{title:"Download Replay",placement:"bottom-end",enterDelay:300,children:Object(M.jsx)(v.a,{style:$e,color:"inherit",href:f.replayUrl(e.replay),rel:"noreferrer",target:"_blank",children:t})}),"tm2"===a&&I()(e.date).isBefore("2017-05-09")&&Object(M.jsx)(K.a,{title:"This run was done on an older game version.",placement:"bottom-end",enterDelay:300,children:Object(M.jsx)("span",{children:Object(M.jsx)(y.a,{size:"small",disabled:!0,children:Object(M.jsx)(Ee.a,{fontSize:"inherit"})})})})]}),Object(M.jsx)(Ve,{align:"left",children:Object(M.jsx)(v.a,{style:$e,color:"inherit",href:f.userUrl(e.user.id),rel:"noreferrer",target:"_blank",children:e.user.name})}),Object(M.jsx)(Ve,{align:"left",children:Object(M.jsx)(K.a,{title:Object(M.jsx)(Ie.a,{fromNow:!0,children:e.date}),placement:"bottom-end",enterDelay:300,children:Object(M.jsx)(Ie.a,{style:Object(Y.a)({color:He(e.date)},$e),format:"YYYY-MM-DD",children:e.date})})}),Object(M.jsx)(Ve,{align:"left",children:Object(M.jsx)(K.a,{title:"in days",placement:"bottom-end",enterDelay:300,children:c?Object(M.jsx)(Ie.a,{style:$e,diff:e.date,unit:"days"}):Object(M.jsx)("span",{children:e.duration})})})]},"".concat(e.track.name,"-").concat(e.user.id))}))}),Object(M.jsxs)(X.a,{children:[r.totalTime>0&&Object(M.jsxs)(J.a,{children:[Object(M.jsx)(Ve,{align:"right",children:"Total Time"}),Object(M.jsx)(Ve,{children:Object(M.jsx)(K.a,{title:I.a.duration(r.totalTime,"ms").humanize(),placement:"bottom-end",enterDelay:300,children:Object(M.jsx)("span",{children:Fe(r.totalTime,a)})})}),Object(M.jsx)(Ve,{colSpan:3})]}),r.totalPoints>0&&Object(M.jsxs)(J.a,{children:[Object(M.jsx)(Ve,{align:"right",children:"Total Points"}),Object(M.jsx)(Ve,{children:Object(M.jsx)("span",{children:Fe(r.totalPoints,a,"Stunts")})}),Object(M.jsx)(Ve,{colSpan:3})]})]})]})})},tt=a(143),at=a.n(tt),rt=function(e,t){return"https://speedrun.com/tmwii/".concat(e,"#").concat(t)},nt=function(e){return"https://www.speedrun.com/user/".concat(e)},ct=function(e){return"https://www.speedrun.com/tmwii/run/".concat(e)},it=[{id:"track.name",sortable:!0,label:"Track",align:"left"},{id:"score",sortable:!0,label:"Record",align:"left"},{id:"user.name",sortable:!0,label:"Player",align:"left"},{id:"date",sortable:!0,label:"Date",align:"left"},{id:"duration",sortable:!0,label:"Duration",align:"left"},{id:"replay",sortable:!1,label:"Video",align:"left"}],lt=function(e){var t=e.order,a=e.orderBy,r=e.onRequestSort;return Object(M.jsx)(G.a,{children:Object(M.jsx)(J.a,{children:it.map((function(e){return Object(M.jsxs)(Z.a,{align:e.align,padding:"default",sortDirection:a===e.id&&t,children:[!0===e.sortable&&Object(M.jsx)(K.a,{title:"Sort by "+e.label,placement:"bottom-start",enterDelay:300,children:Object(M.jsx)(ve.a,{active:a===e.id,direction:t,onClick:(n=e.id,function(e){r(e,n)}),children:e.label})}),!1===e.sortable&&e.label]},e.id);var n}))})})},ot=Object(b.a)((function(e){return{root:{overflowX:"auto"}}})),st={order:"asc",orderBy:"track.name",page:0,rowsPerPage:250},dt={whiteSpace:"nowrap"},jt={padding:"7px 0px 7px 16px"},bt=function(e){return Object(M.jsx)(Z.a,Object(Y.a)({style:jt},e))},ut=function(e){var t=e.data,a=e.game,r=e.stats,c=e.useLiveDuration,i=e.category,l=n.a.useState(st),s=Object(o.a)(l,2),d=s[0],j=d.order,b=d.orderBy,u=d.rowsPerPage,h=d.page,f=s[1],m=ot();return Object(M.jsx)("div",{className:m.root,children:Object(M.jsxs)(H.a,{size:"small",children:[Object(M.jsx)(lt,{order:j,orderBy:b,onRequestSort:function(e,t){var a=t;f((function(e){return Object(Y.a)(Object(Y.a)({},e),{},{order:e.orderBy===a&&"desc"===e.order?"asc":"desc",orderBy:a})}))}}),Object(M.jsx)(X.a,{children:we(t,j,b).slice(h*u,h*u+u).map((function(e){return Object(M.jsxs)(J.a,{tabIndex:-1,children:[(e.track.isFirst||"track.name"!==b)&&Object(M.jsx)(bt,{style:dt,rowSpan:"track.name"!==b?1:e.track.records,align:"left",children:Object(M.jsx)(v.a,{color:"inherit",href:rt(e.track.name,i),rel:"noreferrer",target:"_blank",children:e.track.name})}),Object(M.jsx)(bt,{align:"left",children:Object(M.jsx)(v.a,{style:dt,color:"inherit",href:ct(e.id),rel:"noreferrer",target:"_blank",children:Fe(e.score,a)})}),Object(M.jsx)(bt,{align:"left",children:Object(M.jsx)(v.a,{style:dt,color:"inherit",href:nt(e.user.name),rel:"noreferrer",target:"_blank",children:e.user.name})}),Object(M.jsx)(bt,{align:"left",children:Object(M.jsx)(K.a,{title:Object(M.jsx)(Ie.a,{fromNow:!0,children:e.date}),placement:"bottom-end",enterDelay:300,children:Object(M.jsx)(Ie.a,{style:Object(Y.a)({color:He(e.date)},dt),format:"YYYY-MM-DD",children:e.date})})}),Object(M.jsx)(bt,{align:"left",children:Object(M.jsx)(K.a,{title:"in days",placement:"bottom-end",enterDelay:300,children:c?Object(M.jsx)(Ie.a,{style:dt,diff:e.date,unit:"days"}):Object(M.jsx)("span",{children:e.duration})})}),Object(M.jsx)(bt,{align:"left",children:Object(M.jsx)(K.a,{title:"Watch Run",placement:"bottom-end",enterDelay:300,children:Object(M.jsx)(y.a,{size:"small",href:e.media,target:"_blank",children:Object(M.jsx)(at.a,{fontSize:"inherit"})})})})]},"".concat(e.track.name,"-").concat(e.user.id))}))}),Object(M.jsx)(X.a,{children:r.totalTime>0&&Object(M.jsxs)(J.a,{children:[Object(M.jsx)(bt,{align:"right",children:"Total Time"}),Object(M.jsx)(bt,{children:Object(M.jsx)(K.a,{title:I.a.duration(r.totalTime,"ms").humanize(),placement:"bottom-end",enterDelay:300,children:Object(M.jsx)("span",{children:Fe(r.totalTime,a)})})}),Object(M.jsx)(bt,{colSpan:4})]})})]})})},ht=function(e){var t=e.data,a=e.props;return Object(M.jsx)(C.a,Object(Y.a)(Object(Y.a)({variant:"h5",gutterBottom:!0,style:{padding:"50px 0px 50px 50px"}},a),{},{children:t}))},ft=a(109),mt=a.n(ft),Ot=a(253),xt=Object(Ot.a)((function(e){var t=e.labels,a=e.series,r=e.title,n=e.theme,c=e.rest,i=void 0===c||c,l="dark"===n.palette.type;if(i&&a.length>30){var o=a.slice(30).reduce((function(e,t){return e+t}),0);a=a.slice(0,30),t=t.slice(0,30),a.push(o),t.push("Rest")}var s=new Array(a.length).fill(0).map((function(){return"#"+(16777215*Math.random()<<0).toString(16).padStart(6,"0")}));return Object(M.jsx)(mt.a,{options:{labels:t,legend:{show:!1},responsive:[{breakpoint:380,options:{chart:{height:"300px"}}}],plotOptions:{pie:{donut:{labels:{show:!0,name:{show:!0},value:{show:!0,color:l?"white":"black"},total:{show:!0,label:r,color:l?"white":"black"}}}}},colors:s},series:a,type:"donut",height:"400"})})),pt=a(255),gt=a(254),yt=a(144),vt=a.n(yt),kt=Object(b.a)((function(e){return{fab:{margin:0,top:"auto",right:30,bottom:30,left:"auto",position:"fixed"}}})),wt=function(){!function e(){var t=document.documentElement.scrollTop;t>0&&(window.requestAnimationFrame(e),window.scrollTo(0,t-t/5))}()},St=function(){var e=function(){var e=n.a.useRef(void 0),t=n.a.useState({x:0,y:0}),a=Object(o.a)(t,2),r=a[0],c=a[1],i=n.a.useCallback((function(){clearTimeout(e.current),e.current=setTimeout((function(){c({x:window.scrollX,y:window.scrollY})}),100)}),[c]);return n.a.useEffect((function(){return window.addEventListener("scroll",i),function(){clearTimeout(e.current),window.removeEventListener("scroll",i)}}),[i]),r}().y,t=kt();return Object(M.jsx)(gt.a,{in:0!==e,timeout:1e3,children:Object(M.jsx)(pt.a,{title:"Jump to top",color:"primary",className:t.fab,onClick:wt,children:Object(M.jsx)(vt.a,{})})})},Dt=new(function(){function e(){Object(ee.a)(this,e),this.baseApi="https://raw.githubusercontent.com/NeKzBot/tmx-records/api"}return Object(te.a)(e,[{key:"request",value:function(){var e=Object(me.a)(he.a.mark((function e(t,a){var r;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.baseApi,"/").concat(t,"/").concat(a||"latest",".json"));case 2:if(r=e.sent,console.log("GET ".concat(r.url," (").concat(r.status,")")),r.ok){e.next=6;break}throw r;case 6:return e.next=8,r.json();case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()}]),e}()),Bt=Object(b.a)((function(e){return{padTop:{paddingTop:"70px"}}})),Ct=Object(Oe.a)((function(e){var t=e.match,a=z(),r=n.a.useState(void 0),c=Object(o.a)(r,2),i=c[0],l=c[1],s=n.a.useState("tm2"),d=Object(o.a)(s,2),j=d[0],b=d[1],u=n.a.useState(0),h=Object(o.a)(u,2),f=h[0],m=h[1],O=t.params[0],x=t.params.date,p=void 0===x||"latest"===x;n.a.useEffect((function(){m(0),l(void 0)}),[O]),n.a.useEffect((function(){Object(me.a)(he.a.mark((function e(){var t,r,n,c;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Dt.request(O,x);case 2:if((t=e.sent)[0]&&t[0].tracks[0].wrs){r=Object(fe.a)(t);try{for(c=function(){var e=n.value;void 0===e.stats.totalPoints&&(e.stats.totalTime=e.tracks.filter((function(e){return"Stunts"!==e.type})).map((function(e){return e.wrs[0].score})).reduce((function(e,t){return e+t}),0),e.stats.totalPoints=e.tracks.filter((function(e){return"Stunts"===e.type})).map((function(e){return e.wrs[0].score})).reduce((function(e,t){return e+t}),0));var t,a=[],r=Object(fe.a)(e.tracks);try{for(r.s();!(t=r.n()).done;){var c,i=t.value,l=Object(fe.a)(i.wrs);try{for(l.s();!(c=l.n()).done;){var o=c.value,s=p?I()().diff(I()(o.date),"d"):o.duration;a.push(Object(Y.a)(Object(Y.a)({track:{id:i.id,name:i.name,type:i.type,isFirst:o===i.wrs[0],records:i.wrs.length}},o),{},{duration:s}))}}catch(d){l.e(d)}finally{l.f()}}}catch(d){r.e(d)}finally{r.f()}e.tracks=a,p&&e.leaderboard.forEach((function(t,a){e.leaderboard[a].duration=e.tracks.filter((function(e){return e.user.id===t.user.id})).map((function(e){return e.duration})).reduce((function(e,t){return e+t}),0)}))},r.s();!(n=r.n()).done;)c()}catch(i){r.e(i)}finally{r.f()}}if(a.current){e.next=6;break}return e.abrupt("return");case 6:b(O),l(t);case 8:case"end":return e.stop()}}),e)})))()}),[a,O,x,p]);var g="tmwii"===j?ut:et,y=Bt();return Object(M.jsxs)(V,{children:[Object(M.jsx)(F.a,{children:void 0===i?Object(M.jsx)(pe.a,{}):0===i.length?Object(M.jsx)(ht,{data:"No data."}):Object(M.jsxs)(M.Fragment,{children:[i.length>1&&Object(M.jsx)(ye.a,{value:f,onChange:function(e,t){m(t)},indicatorColor:"primary",textColor:"primary",variant:"scrollable",scrollButtons:"auto",children:i.map((function(e){return Object(M.jsx)(ge.a,{label:e.name},e.name)}))}),Object(M.jsx)(C.a,{component:"div",role:"tabpanel",children:Object(M.jsx)(xe.a,{p:3,children:Object(M.jsxs)($.a,{container:!0,direction:"column",justify:"center",children:[Object(M.jsx)($.a,{item:!0,xs:12,children:Object(M.jsx)(g,{data:i[f].tracks,game:j,stats:i[f].stats,useLiveDuration:p,category:i[f].name})}),Object(M.jsx)($.a,{item:!0,xs:12,className:y.padTop,children:Object(M.jsxs)($.a,{container:!0,direction:"row",justify:"center",alignContent:"center",children:[Object(M.jsx)($.a,{item:!0,xs:12,md:6,children:Object(M.jsx)(Ye,{data:i[f].leaderboard,game:O,hasDuration:!0})}),Object(M.jsx)($.a,{item:!0,xs:12,md:6,className:y.padTop,children:Object(M.jsxs)($.a,{container:!0,direction:"column",justify:"center",children:[Object(M.jsx)($.a,{item:!0,xs:12,children:Object(M.jsx)(xt,{title:"WRs",labels:i[f].leaderboard.map((function(e){return e.user.name})),series:i[f].leaderboard.map((function(e){return e.wrs}))})}),Object(M.jsx)($.a,{item:!0,xs:12,className:y.padTop,children:Object(M.jsx)(xt,{title:"Duration",labels:i[f].leaderboard.map((function(e){return e.user.name})),series:i[f].leaderboard.map((function(e){return e.duration}))})})]})})]})})]})})})]})}),Object(M.jsx)(St,{})]})})),Tt=function(){return Object(M.jsx)(V,{children:Object(M.jsx)(F.a,{children:Object(M.jsx)(ht,{data:"Page not found :("})})})},Nt=a(145),zt=a.n(Nt),Rt=a(258),Mt=a(271),Lt=a(272),Pt=a(268),qt=a(17),Yt=function(e){return Object(M.jsx)(Pt.a,Object(Y.a)({elevation:6,variant:"filled"},e))},Ut={info:"drag & drop replay here :)",magic:"GBX",version:6,settings:"BUCR",classId:50933760,headerSize:331,headerChunks:2,chunkOffset:348},It=function(){var e=z(),t=Object(qt.a)(),a=n.a.useRef(null),r=n.a.useState(Ut),c=Object(o.a)(r,2),i=c[0],l=c[1],s=n.a.useState(!0),d=Object(o.a)(s,2),j=d[0],b=d[1],u=n.a.useState(!1),h=Object(o.a)(u,2),f=h[0],m=h[1],O=function(e,t){"clickaway"!==t&&m(!1)},x=n.a.useCallback((function(t){if(t){var a=new FileReader;a.onload=function(t){var a=t.target.result;try{if(!e.current)return;l(Ut),m(!1);var r=window,n=r.Buffer,c=r.Replay,i=window.replay=c.default().read(n.from(a),{parseGhost:j});if(!e.current)return;i.ghost&&delete i.ghost.restData,function e(t){Object.keys(t).forEach((function(a){"_view"===a?delete t._view:"object"===typeof t[a]&&e(t[a])}))}(i),l(i)}catch(o){e.current&&m(o.message)}},a.readAsArrayBuffer(t)}}),[e,j,l,m]),p=n.a.useCallback((function(e){return x(e.target.files[0])}),[x]),g=function(e){e.dataTransfer.items?e.dataTransfer.items.clear():e.dataTransfer.clearData()};n.a.useEffect((function(){return a.current&&a.current.addEventListener("change",p),function(){return a.current&&a.current.removeEventListener("change",p)}}),[a,p]);var y=n.a.useCallback((function(){a.current.click()}),[a]);return Object(M.jsx)(V,{children:Object(M.jsxs)(F.a,{style:{padding:"20px 20px 20px 20px"},children:[Object(M.jsx)(Rt.a,{variant:"contained",color:"primary",disableElevation:!0,onClick:y,children:"Open file"}),Object(M.jsx)("input",{type:"file",ref:a,style:{display:"none"}}),Object(M.jsx)(E.a,{style:{marginLeft:"20px"},control:Object(M.jsx)(Mt.a,{color:"primary",checked:j,onChange:function(e){b(e.target.checked)}}),label:"Parse Ghost"}),Object(M.jsx)("div",{style:{paddingBottom:"20px"}}),Object(M.jsx)("div",{onDrop:function(e){e.preventDefault();var t=[];if(e.dataTransfer.items)for(var a=0;a<e.dataTransfer.items.length;++a)"file"===e.dataTransfer.items[a].kind&&t.push(e.dataTransfer.items[a].getAsFile());x(t[0]),g(e)},onDragOver:function(e){e.preventDefault()},children:Object(M.jsx)(zt.a,{name:"replay",style:{fontSize:"14px"},src:i,theme:"light"===t.palette.type?"bright:inverted":"solarized",displayDataTypes:!1,displayObjectSize:!1,enableClipboard:!1})}),Object(M.jsx)(Lt.a,{open:!1!==f,autoHideDuration:6e3,onClose:O,children:Object(M.jsx)(Yt,{onClose:O,severity:"error",children:f})})]})})},Wt=a(93),Et=a.n(Wt),_t=a(276),Ft=a(261),At=a(266),Ht=[{id:"user.name",sortable:!1,label:"Player",align:"left"},{id:"wrs",id2:"duration",sortable:!0,label:"World Records",align:"left"},{id:"duration",id2:"wrs",sortable:!0,label:"Total Duration",align:"left"}],Xt=[{id:"user.name",sortable:!1,label:"Player",align:"left"},{id:"wrs",sortable:!0,label:"World Records",align:"left"}],Zt=[{id:"user.displayName",sortable:!1,label:"Player",align:"left"},{id:"wins.matches",sortable:!0,label:"Wins",align:"left",tooltip:"Amount of match wins."},{id:"wins.qualifiers",sortable:!0,label:"Qualifiers",align:"left",tooltip:"Amount of qualifier wins."}],Gt=[{id:"user.displayName",sortable:!1,label:"Player",align:"left"},{id:"wins.matches",sortable:!0,label:"Wins",align:"left",tooltip:"Amount of match wins."},{id:"wins.qualifiers",sortable:!0,label:"Qualifiers",align:"left",tooltip:"Amount of qualifier wins."},{id:"wins.hattricks",sortable:!0,label:"Hat-Tricks",align:"left",tooltip:"A hat-trick can be achieved by winning the qualifier, the match and Track of the Day."}],Jt=function(e){var t=e.order,a=e.orderBy,r=e.onRequestSort,n=e.hasDuration,c=e.cotd,i=e.hattricks,l=n?Ht:c?i?Gt:Zt:Xt;return Object(M.jsx)(G.a,{children:Object(M.jsx)(J.a,{children:l.map((function(e){var n,c,i;return Object(M.jsxs)(Z.a,{align:e.align,padding:"default",sortDirection:a===e.id&&t,children:[!0===e.sortable&&Object(M.jsx)(K.a,{title:null!==(n=e.tooltip)&&void 0!==n?n:"Sort by "+e.label,placement:"bottom-start",enterDelay:300,children:Object(M.jsx)(ve.a,{active:a===e.id,direction:t,onClick:(c=e.id,i=e.id2,function(e){r(e,c,i)}),children:e.label})}),!1===e.sortable&&e.label]},e.id)}))})})},Kt=Object(b.a)((function(e){return{root:{overflowX:"auto"}}})),$t={order:"desc",orderBy:"wrs",thenBy:"duration",page:0,rowsPerPage:50},Qt={padding:"7px 0px 7px 16px"},Vt=function(e){return Object(M.jsx)(Z.a,Object(Y.a)({style:Qt},e))},ea=function(e){var t;return"https://trackmania.io/#/player/".concat(encodeURIComponent(null!==(t=e.id)&&void 0!==t?t:e.accountId))},ta=function(e){var t=e.data,a=e.hasDuration,r=e.cotd,c=e.hattricks,i=n.a.useState(Object(Y.a)(Object(Y.a)({},$t),{},{orderBy:r?"wins.matches":"wrs"})),l=Object(o.a)(i,2),s=l[0],d=s.order,j=s.orderBy,b=s.thenBy,u=l[1];n.a.useEffect((function(){u((function(e){return Object(Y.a)(Object(Y.a)({},e),{},{orderBy:r?"wins.matches":"wrs",thenBy:r?"wins.matches":"wrs"})}))}),[t,a]);var h=Kt();return Object(M.jsx)("div",{className:h.root,children:Object(M.jsxs)(H.a,{size:"small",children:[Object(M.jsx)(Jt,{order:d,orderBy:j,onRequestSort:function(e,t,a){var r=t,n=a;u((function(e){return Object(Y.a)(Object(Y.a)({},e),{},{order:e.orderBy===r&&"desc"===e.order?"asc":"desc",orderBy:r,thenBy:n})}))},hasDuration:a,cotd:r,hattricks:c}),Object(M.jsx)(X.a,{children:(a?Se:we)(t,d,j,b).map((function(e){var t;return Object(M.jsxs)(J.a,{tabIndex:-1,children:[!r&&Object(M.jsx)(Vt,{align:"left",children:Object(M.jsx)(v.a,{color:"inherit",href:ea(e.user),rel:"noreferrer",target:"_blank",children:e.user.name})}),!r&&Object(M.jsx)(Vt,{align:"left",children:e.wrs}),a&&Object(M.jsxs)(Vt,{align:"left",children:[e.duration," day",1===e.duration?"":"s"]}),r&&Object(M.jsx)(Vt,{align:"left",children:Object(M.jsx)(v.a,{color:"inherit",href:ea(e.user),rel:"noreferrer",target:"_blank",children:e.user.displayName})}),r&&Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(Vt,{align:"left",children:e.wins.matches}),Object(M.jsx)(Vt,{align:"left",children:e.wins.qualifiers}),c&&Object(M.jsx)(Vt,{align:"left",children:e.wins.hattricks})]})]},null!==(t=e.user.id)&&void 0!==t?t:e.user.accountId)}))})]})})},aa=a(77),ra=a(111),na=a(259),ca=a(84),ia=a.n(ca),la=a(110),oa=a.n(la),sa=[{id:"track.name",sortable:!0,label:"Track",align:"left"},{id:"score",sortable:!0,label:"Record",align:"left"},{id:"user.name",sortable:!0,label:"Player",align:"left"},{id:"zone",sortable:!0,label:"Zone",align:"left"},{id:"date",sortable:!0,label:"Date",align:"left"},{id:"duration",sortable:!0,label:"Duration",align:"left"}],da=[{id:"track.monthDay",sortable:!0,label:"Day",align:"left"},{id:"track.name",sortable:!0,label:"Track",align:"left"},{id:"score",sortable:!0,label:"Record",align:"left"},{id:"user.name",sortable:!0,label:"Player",align:"left"},{id:"zone",sortable:!0,label:"Zone",align:"left"}],ja=function(e){var t=e.order,a=e.orderBy,r=e.onRequestSort,n=e.official,c=n?sa:da;return Object(M.jsx)(G.a,{children:Object(M.jsx)(J.a,{children:c.map((function(e,n){return Object(M.jsxs)(Z.a,{align:e.align,padding:"default",sortDirection:a===e.id&&t,colSpan:n===c.length-1?2:1,children:[!0===e.sortable&&Object(M.jsx)(K.a,{title:"Sort by "+e.label,placement:"bottom-start",enterDelay:300,children:Object(M.jsx)(ve.a,{active:a===e.id,direction:t,onClick:(i=e.id,function(e){r(e,i)}),children:e.label})}),!1===e.sortable&&e.label]},n);var i}))})})},ba=Object(b.a)((function(e){return{root:{overflowX:"auto"}}})),ua={order:"asc",orderBy:"track.name",page:0,rowsPerPage:250},ha={whiteSpace:"nowrap"},fa={padding:"7px 0px 7px 16px"},ma=function(e){return Object(M.jsx)(Z.a,Object(Y.a)({style:fa},e))},Oa=function(e){return"https://trackmania.io/#/player/".concat(encodeURIComponent(e.id))},xa=Object(b.a)({root:{"& > *":{borderBottom:"unset"}}}),pa=function(e){var t,a=e.wr,r=e.official,n=Fe(a.score,"tm2"),c=0!==a.delta?Fe(a.delta,"tm2"):null;return Object(M.jsxs)(J.a,{tabIndex:-1,children:[r&&Object(M.jsx)(ma,{align:"left",children:Object(M.jsx)(K.a,{title:Object(M.jsx)(Ie.a,{format:"HH:mm",children:a.date}),placement:"bottom-end",enterDelay:300,children:Object(M.jsx)(Ie.a,{style:Object(Y.a)({color:He(a.date)},ha),format:"YYYY-MM-DD",children:a.date})})}),!r&&Object(M.jsx)(ma,{align:"left",children:Object(M.jsx)(K.a,{title:a.setAfter,placement:"bottom-end",enterDelay:300,children:Object(M.jsx)(Ie.a,{style:Object(Y.a)({color:(t=a.pastMinutes,t>=0&&t<=1440?Xe(t):void 0)},ha),format:"HH:mm",children:a.date})})}),Object(M.jsxs)(ma,{align:"left",children:[n,a.note&&Object(M.jsx)(K.a,{title:a.note,placement:"bottom-end",enterDelay:300,children:Object(M.jsx)("span",{children:Object(M.jsx)(y.a,{size:"small",disabled:!0,children:Object(M.jsx)(Ee.a,{fontSize:"inherit"})})})})]}),Object(M.jsx)(ma,{align:"left",children:c?"-"+c:""}),Object(M.jsx)(ma,{align:"left",children:Object(M.jsx)(v.a,{color:"inherit",href:Oa(a.user),rel:"noreferrer",target:"_blank",children:a.user.name})}),Object(M.jsx)(ma,{align:"left",children:Object(M.jsx)(K.a,{title:a.user.zone.map((function(e){return e.name})).join(" | "),placement:"bottom",enterDelay:300,children:Object(M.jsx)("span",{children:(a.user.zone[2]?a.user.zone[2]:a.user.zone[0]).name})})}),Object(M.jsx)(ma,{align:"left",children:Object(M.jsx)(K.a,{title:"Download Ghost",placement:"bottom",enterDelay:300,children:Object(M.jsx)(y.a,{size:"small",style:ha,color:"inherit",href:"https://prod.trackmania.core.nadeo.online/storageObjects/"+a.replay,rel:"noreferrer",target:"_blank",disabled:!a.replay,children:Object(M.jsx)(ia.a,{fontSize:"inherit"})})})})]})},ga=function(e){var t,a=e.wr,r=e.official,n=e.orderBy,c=e.useLiveDuration,i=e.history,l=e.onClickHistory,o=Fe(a.score,"tm2"),s=0!==a.delta?Fe(a.delta,"tm2"):null,d=xa(),j=i===a.track.id,b="track.monthDay"===n||"track.name"===n;return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsxs)(J.a,{tabIndex:-1,children:[!r&&(a.track.isFirst||!b)&&Object(M.jsx)(ma,{align:"left",rowSpan:b?a.track.records:1,children:a.track.monthDay}),(a.track.isFirst||!b)&&Object(M.jsx)(ma,{style:ha,rowSpan:b?a.track.records:1,align:"left",children:Object(M.jsx)(v.a,{color:"inherit",href:(t=a.track,"https://trackmania.io/#/leaderboard/".concat(encodeURIComponent(t.id))),rel:"noreferrer",target:"_blank",children:a.track.name})}),Object(M.jsxs)(ma,{align:"left",children:[r&&s&&Object(M.jsx)(K.a,{title:Object(M.jsxs)("span",{children:["-",s," to former record"]}),placement:"bottom",enterDelay:300,children:Object(M.jsx)("span",{children:o})}),r&&!s&&Object(M.jsx)("span",{children:o}),!r&&s&&Object(M.jsx)(K.a,{title:Object(M.jsxs)("span",{children:["-",s," to former record"]}),placement:"bottom",enterDelay:300,children:Object(M.jsx)("span",{children:o})}),!r&&!s&&Object(M.jsx)("span",{children:o})]}),Object(M.jsx)(ma,{style:ha,align:"left",children:Object(M.jsx)(v.a,{color:"inherit",href:Oa(a.user),rel:"noreferrer",target:"_blank",children:a.user.name})}),Object(M.jsx)(ma,{style:ha,align:"left",children:Object(M.jsx)(K.a,{title:a.user.zone.map((function(e){return e.name})).join(" | "),placement:"bottom",enterDelay:300,children:Object(M.jsx)("span",{children:(a.user.zone[2]?a.user.zone[2]:a.user.zone[0]).name})})}),r&&Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(ma,{align:"left",children:Object(M.jsx)(K.a,{title:Object(M.jsx)(Ie.a,{fromNow:!0,children:a.date}),placement:"bottom-end",enterDelay:300,children:Object(M.jsx)(Ie.a,{style:Object(Y.a)({color:He(a.date)},ha),format:"YYYY-MM-DD",children:a.date})})}),Object(M.jsx)(ma,{align:"left",children:Object(M.jsx)(K.a,{title:"in days",placement:"bottom-end",enterDelay:300,children:c?Object(M.jsx)(Ie.a,{style:ha,diff:a.date,unit:"days"}):Object(M.jsx)("span",{children:a.duration})})})]}),Object(M.jsxs)(ma,{style:ha,align:"left",children:[Object(M.jsx)(K.a,{title:"Download Ghost",placement:"bottom",enterDelay:300,children:Object(M.jsx)(y.a,{size:"small",style:ha,color:"inherit",href:"https://prod.trackmania.core.nadeo.online/storageObjects/"+a.replay,rel:"noreferrer",target:"_blank",children:Object(M.jsx)(ia.a,{fontSize:"inherit"})})}),a.track.isLast&&a.track.history&&Object(M.jsx)(y.a,{color:"inherit",size:"small",style:ha,onClick:function(){return l(a.track.id)},children:Object(M.jsx)(oa.a,{fontSize:"inherit"})})]})]}),a.track.isLast&&a.track.history&&Object(M.jsx)(J.a,{className:d.root,children:Object(M.jsx)(ma,{style:{paddingBottom:0,paddingTop:0},colSpan:7,children:Object(M.jsx)(na.a,{in:j,timeout:"auto",unmountOnExit:!0,children:Object(M.jsxs)(xe.a,{margin:1,children:[Object(M.jsx)(C.a,{variant:"h6",gutterBottom:!0,component:"div",children:"History"}),Object(M.jsxs)(H.a,{size:"small","aria-label":"purchases",children:[Object(M.jsx)(G.a,{children:Object(M.jsxs)(J.a,{children:[Object(M.jsx)(ma,{children:r?"Date":"Time"}),Object(M.jsx)(ma,{children:"Record"}),Object(M.jsx)(ma,{children:"Timesave"}),Object(M.jsx)(ma,{children:"Player"}),Object(M.jsx)(ma,{colSpan:2,children:"Zone"})]})}),Object(M.jsx)(X.a,{children:a.track.history.map((function(e,t){return Object(M.jsx)(pa,{wr:e,official:r},t)}))})]})]})})})})]})},ya=function(e){var t=e.data,a=e.stats,r=e.official,c=e.useLiveDuration,i=R("tm2020",{official:{order:"asc",orderBy:"track.name"},totd:{order:"asc",orderBy:"track.monthDay"}}),l=Object(o.a)(i,2),s=l[0],d=l[1],j=n.a.useState(ua),b=Object(o.a)(j,2),u=b[0],h=u.order,f=u.rowsPerPage,m=u.page,O=Object(ra.a)(u,["order","rowsPerPage","page"]),x=b[1],p=n.a.useState(null),g=Object(o.a)(p,2),y=g[0],v=g[1],k=O.orderBy;k=r?s.official.orderBy:s.totd.orderBy,k=r&&"track.monthDay"===k?"track.name":k;n.a.useEffect((function(){var e=s[r?"official":"totd"];x((function(t){return Object(Y.a)(Object(Y.a)({},t),{},{order:e.order,orderBy:e.orderBy})}))}),[t]);var w=n.a.useCallback((function(e){v(y!==e?e:null)}),[y,v]),S=ba();return Object(M.jsx)("div",{className:S.root,children:Object(M.jsxs)(H.a,{size:"small",children:[Object(M.jsx)(ja,{order:h,orderBy:k,onRequestSort:function(e,t){var a=t;x((function(e){var t=e.orderBy===a&&"desc"===e.order?"asc":"desc";return d(Object(Y.a)(Object(Y.a)({},s),{},Object(aa.a)({},r?"official":"totd",{order:t,orderBy:a}))),Object(Y.a)(Object(Y.a)({},e),{},{order:t,orderBy:a})}))},official:r}),Object(M.jsx)(X.a,{children:we(t,h,k).slice(m*f,m*f+f).map((function(e,t){return Object(M.jsx)(ga,{wr:e,official:r,orderBy:k,useLiveDuration:c,history:y,onClickHistory:w},t)}))}),Object(M.jsx)(X.a,{children:a.totalTime>0&&Object(M.jsxs)(J.a,{children:[Object(M.jsx)(ma,{align:"right",colSpan:r?1:2,children:"Total Time"}),Object(M.jsx)(ma,{children:Object(M.jsx)(K.a,{title:I.a.duration(a.totalTime,"ms").humanize(),placement:"bottom-end",enterDelay:300,children:Object(M.jsx)("span",{children:Fe(a.totalTime,"tm2")})})}),Object(M.jsx)(ma,{colSpan:r?5:3})]})})]})})},va=Object(Ot.a)((function(e){var t=e.labels,a=e.series,r=(e.title,"dark"===e.theme.palette.type);return Object(M.jsx)(mt.a,{options:{xaxis:{categories:t},legend:{show:!1},dataLabels:{enabled:!1},chart:{toolbar:{show:!1},foreColor:r?"white":"black"},tooltip:{theme:r?"dark":"light"},responsive:[{breakpoint:380,options:{chart:{height:"300px"}}}],plotOptions:{bar:{horizontal:!0}}},series:a,type:"bar",height:"800"})})),ka=a(260),wa=[],Sa=[],Da=I()(),Ba=I()("2020-07-01"),Ca=Ba.clone(),Ta={0:"Winter",1:"Spring",2:"Summer",3:"Fall"};Ca.diff(Da)<0;){var Na=Ta[Math.floor(Ca.month()/3)],za=Ca.format("YYYY");-1===Sa.indexOf(za)&&Sa.push(za),wa.push(Object(M.jsxs)(ka.a,{value:"campaign/".concat(Na,"-").concat(za).toLowerCase(),children:[Na," ",za]},wa.length)),Ca.add(3,"months")}wa.reverse(),[].reverse(),Sa.reverse(),wa.push(Object(M.jsx)(ka.a,{value:"campaign/training",children:"Training"},wa.length)),Sa=Sa.map((function(e){return Object(M.jsx)(ka.a,{value:e,children:e},e)}));for(var Ra=function(e){for(var t=[],a=e.toString()===Ba.year().toString(),r=a?Ba.clone():I()("".concat(e,"-01-01")),n=a?11:Da.month(),c=r.month();c<=n;++c){var i=r.format("MMMM");t.push(Object(M.jsx)(ka.a,{value:"totd/".concat(i,"-").concat(e).toLowerCase(),children:i},t.length)),r.add(1,"month")}return t},Ma=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,a=t&&t.toString()===Ba.year().toString(),r=(a?Ba:Da).clone();return(e?"campaign/".concat(Ta[Math.floor(Da.month()/3)],"-").concat(Da.year()):"totd/".concat(r.format("MMMM"),"-").concat(t||Da.year())).toLowerCase()},La=function(e){return 1===e?"":"s"},Pa=function(e,t){var a=t.diff(e,"seconds"),r=t.diff(e,"hours");if(a>0){var n=t.diff(e,"minutes")-60*r;return"set after ".concat(r," hour").concat(La(r)," and ").concat(n," minute").concat(La(n))}var c=-r,i=-t.diff(e,"minutes")-60*c;return"set before ".concat(c," hour").concat(La(c)," and ").concat(i," minute").concat(La(i))},qa=Object(b.a)((function(e){return{padTop:{paddingTop:"70px"},formControl:{margin:e.spacing(1),minWidth:120}}})),Ya=function(e){var t=e.campaign,a=e.onChangeCampaign,r=e.onChangeYear,c=e.isOfficial,i=e.year,l=z(),s=n.a.useState(void 0),d=Object(o.a)(s,2),j=d[0],b=d[1],u=n.a.useState("leaderboard"),h=Object(o.a)(u,2),f=h[0],m=h[1],O=n.a.useCallback((function(e){m(e.target.value)}),[m]);n.a.useEffect((function(){b(void 0),Dt.request("trackmania",t).then((function(e){var t,a=[],r=Object(fe.a)(e.tracks);try{for(r.s();!(t=r.n()).done;){var n,c=t.value,i=Object(fe.a)(c.wrs);try{var o=function(){var t=n.value,r=Et()(t.date),i=e.isOfficial?void 0:Et()().tz("Europe/Paris").set({year:e.year,month:e.month-1,date:c.monthDay,hour:19,minute:0,second:0}).utc(),l=e.isOfficial?void 0:Pa(i,r),o=t===c.wrs[c.wrs.length-1],s=o&&(c.history||[]).length>1?c.history:void 0;s&&!e.isOfficial&&s.forEach((function(e){var t=Et()(e.date);e.setAfter=Pa(i,t),e.pastMinutes=t.diff(i,"minutes")})),a.push(Object(Y.a)(Object(Y.a)({track:{id:c.id,name:c.name.replace(/(\$[0-9a-fA-F]{1,3}|\$[WNOITSGZBEMwnoitsgzbem]{1})/g,""),monthDay:c.monthDay,isFirst:t===c.wrs[0],isLast:o,records:c.wrs.length,history:s}},t),{},{zone:(t.user.zone[2]?t.user.zone[2]:t.user.zone[0]).name,setAfter:l}))};for(i.s();!(n=i.n()).done;)o()}catch(s){i.e(s)}finally{i.f()}}}catch(s){r.e(s)}finally{r.f()}e.tracks=a,l.current&&b(e)})).catch((function(e){console.log(e),l.current&&b(null)}))}),[l,t]);var x=f.replace("Leaderboard","CountryLeaderboard").replace("leaderboard","countryLeaderboard"),p=qa();return Object(M.jsxs)(M.Fragment,{children:[c?Object(M.jsxs)(Ft.a,{className:p.formControl,children:[Object(M.jsx)(_t.a,{children:"Campaign"}),Object(M.jsx)(At.a,{value:t,onChange:a,children:wa})]}):Object(M.jsxs)(M.Fragment,{children:[Object(M.jsxs)(Ft.a,{className:p.formControl,children:[Object(M.jsx)(_t.a,{children:"Year"}),Object(M.jsx)(At.a,{value:i,onChange:r,children:Sa})]}),Object(M.jsxs)(Ft.a,{className:p.formControl,children:[Object(M.jsx)(_t.a,{children:"Month"}),Object(M.jsx)(At.a,{value:t,onChange:a,children:Ra(i)})]})]}),null===j&&Object(M.jsx)(ht,{data:"No data."}),void 0===j&&Object(M.jsx)(pe.a,{}),Object(M.jsx)($.a,{container:!0,direction:"column",justify:"center",children:void 0!==j&&null!==j&&Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)($.a,{item:!0,xs:12,children:Object(M.jsx)(ya,{data:j.tracks,stats:j.stats,official:j.isOfficial})}),Object(M.jsxs)($.a,{item:!0,xs:12,className:p.padTop,children:[Object(M.jsxs)(Ft.a,{className:p.formControl,children:[Object(M.jsx)(_t.a,{children:"Rankings Type"}),Object(M.jsxs)(At.a,{value:f,onChange:O,children:[Object(M.jsx)(ka.a,{value:"leaderboard",children:"Live"}),Object(M.jsx)(ka.a,{value:"uniqueLeaderboard",children:"Unique"}),Object(M.jsx)(ka.a,{value:"historyLeaderboard",children:"Total"})]})]}),Object(M.jsxs)($.a,{container:!0,direction:"row",justify:"center",alignContent:"center",children:[Object(M.jsx)($.a,{item:!0,xs:12,md:6,children:Object(M.jsx)(ta,{data:j[f],hasDuration:j.isOfficial&&"uniqueLeaderboard"!==f})}),Object(M.jsx)($.a,{item:!0,xs:12,md:6,className:p.padTop,children:Object(M.jsxs)($.a,{container:!0,direction:"column",justify:"center",children:[Object(M.jsx)($.a,{item:!0,xs:12,children:"uniqueLeaderboard"===f?Object(M.jsx)(va,{title:"WRs",labels:j[f].map((function(e){return e.user.name})).slice(0,20),series:[{name:"Unique WRs",data:j[f].slice(0,20).map((function(e){return e.wrs}))}]}):Object(M.jsx)(xt,{title:"WRs",labels:j[f].map((function(e){return e.user.name})),series:j[f].map((function(e){return e.wrs}))})}),Object(M.jsx)($.a,{item:!0,xs:12,className:p.padTop,children:"uniqueLeaderboard"===f?Object(M.jsx)(va,{title:"WRs",labels:j[x].map((function(e){return(e.zone[2]?e.zone[2]:e.zone[0]).name})).slice(0,20),series:[{name:"Unique WRs by Zone",data:j[x].slice(0,20).map((function(e){return e.wrs}))}]}):Object(M.jsx)(xt,{title:"WRs by Zone",labels:j[x].map((function(e){return(e.zone[2]?e.zone[2]:e.zone[0]).name})),series:j[x].map((function(e){return e.wrs}))})})]})})]})]})]})})]})},Ua=[{id:"name",sortable:!0,label:"Name",align:"left"},{id:"nb_players",sortable:!0,label:"Players",align:"left"},{id:"round.match.winner.displayName",sortable:!0,label:"Winner",align:"left"}],Ia=[{id:"name",sortable:!0,label:"Name",align:"left"},{id:"nb_players",sortable:!0,label:"Players",align:"left"},{id:"round.qualifier.winner.displayName",sortable:!0,label:"Qualifier",align:"left"},{id:"round.match.winner.displayName",sortable:!0,label:"Winner",align:"left"}],Wa=function(e){var t=e.order,a=e.orderBy,r=e.onRequestSort,n=e.official,c=n?Ua:Ia;return Object(M.jsx)(G.a,{children:Object(M.jsx)(J.a,{children:c.map((function(e,n){return Object(M.jsxs)(Z.a,{align:e.align,padding:"default",sortDirection:a===e.id&&t,colSpan:n===c.length-1?2:1,children:[!0===e.sortable&&Object(M.jsx)(K.a,{title:"Sort by "+e.label,placement:"bottom-start",enterDelay:300,children:Object(M.jsx)(ve.a,{active:a===e.id,direction:t,onClick:(i=e.id,function(e){r(e,i)}),children:e.label})}),!1===e.sortable&&e.label]},n);var i}))})})},Ea=Object(b.a)((function(e){return{root:{overflowX:"auto"}}})),_a={order:"asc",orderBy:"name",page:0,rowsPerPage:250},Fa={whiteSpace:"nowrap"},Aa={padding:"7px 0px 7px 16px"},Ha=function(e){return Object(M.jsx)(Z.a,Object(Y.a)({style:Aa},e))},Xa=function(e){return"https://trackmania.io/#/player/".concat(encodeURIComponent(e.accountId))},Za=Object(b.a)({root:{"& > *":{borderBottom:"unset"}}}),Ga=function(e){var t,a,r,n,c,i,l,o=e.wr,s=(e.official,e.orderBy,e.useLiveDuration,e.history,e.onClickHistory,Fe(o.score,"tm2"),0!==o.delta&&Fe(o.delta,"tm2"),Za(),(null===(t=o.round.qualifier)||void 0===t||null===(a=t.winner)||void 0===a?void 0:a.accountId)===(null===(r=o.round.match)||void 0===r||null===(n=r.winner)||void 0===n?void 0:n.accountId)&&(null===(c=o.round.qualifier)||void 0===c||null===(i=c.winner)||void 0===i?void 0:i.accountId));return Object(M.jsx)(M.Fragment,{children:Object(M.jsxs)(J.a,{tabIndex:-1,children:[Object(M.jsx)(Ha,{align:"left",children:Object(M.jsx)(v.a,{color:"inherit",href:(l=o,"https://trackmania.io/#/competitions/comp/".concat(encodeURIComponent(l.id))),rel:"noreferrer",target:"_blank",children:o.name})}),Object(M.jsx)(Ha,{align:"left",children:o.nb_players}),Object(M.jsx)(Ha,{style:Fa,align:"left",children:o.round.qualifier&&Object(M.jsx)(K.a,{title:Object(M.jsx)("span",{children:o.round.qualifier.winner.zone}),placement:"bottom",enterDelay:300,children:Object(M.jsx)(v.a,{color:s?"secondary":"inherit",href:Xa(o.round.qualifier.winner),rel:"noreferrer",target:"_blank",children:o.round.qualifier.winner.displayName})})}),Object(M.jsx)(Ha,{style:Fa,align:"left",children:o.round.match&&Object(M.jsx)(K.a,{title:Object(M.jsx)("span",{children:o.round.match.winner.zone}),placement:"bottom",enterDelay:300,children:Object(M.jsx)(v.a,{color:s?"secondary":"inherit",href:Xa(o.round.match.winner),rel:"noreferrer",target:"_blank",children:o.round.match.winner.displayName})})})]})})},Ja=function(e){var t=e.data,a=(e.stats,e.official),r=e.useLiveDuration,c=R("tm2020-competitions",{official:{order:"asc",orderBy:"name"},totd:{order:"asc",orderBy:"name"}}),i=Object(o.a)(c,2),l=i[0],s=i[1],d=n.a.useState(_a),j=Object(o.a)(d,2),b=j[0],u=b.order,h=b.rowsPerPage,f=b.page,m=Object(ra.a)(b,["order","rowsPerPage","page"]),O=j[1],x=m.orderBy;x=a?l.official.orderBy:l.totd.orderBy,x=a&&"name"===x?"name":x;n.a.useEffect((function(){var e=l[a?"official":"totd"];O((function(t){return Object(Y.a)(Object(Y.a)({},t),{},{order:e.order,orderBy:e.orderBy})}))}),[t]);var p=Ea();return Object(M.jsx)("div",{className:p.root,children:Object(M.jsxs)(H.a,{size:"small",children:[Object(M.jsx)(Wa,{order:u,orderBy:x,onRequestSort:function(e,t){var r=t;O((function(e){var t=e.orderBy===r&&"desc"===e.order?"asc":"desc";return s(Object(Y.a)(Object(Y.a)({},l),{},Object(aa.a)({},a?"official":"totd",{order:t,orderBy:r}))),Object(Y.a)(Object(Y.a)({},e),{},{order:t,orderBy:r})}))},official:a}),Object(M.jsx)(X.a,{children:we(t,u,x).slice(f*h,f*h+h).map((function(e,t){return Object(M.jsx)(Ga,{wr:e,official:a,orderBy:x,useLiveDuration:r},t)}))})]})})},Ka=[],$a=I()(),Qa=I()("2020-11-02"),Va=Qa.clone();Va.diff($a)<0;){var er=Va.format("YYYY");-1===Ka.indexOf(er)&&Ka.push(er),Va.add(3,"months")}[].reverse(),Ka.reverse(),Ka=Ka.map((function(e){return Object(M.jsx)(ka.a,{value:e,children:e},e)}));var tr=function(e){for(var t=[],a=e.toString()===Qa.year().toString(),r=a?Qa.clone():I()("".concat(e,"-01-01")),n=a?11:$a.month(),c=r.month();c<=n;++c){var i=r.format("MMMM");t.push(Object(M.jsx)(ka.a,{value:i.toLowerCase(),children:i},t.length)),r.add(1,"month")}return t},ar=[Object(M.jsx)(ka.a,{value:"competitions/cotd",children:"Cup of the Day"},0),Object(M.jsx)(ka.a,{value:"competitions/a08forever",children:"A08 Forever"},1)],rr=Object(b.a)((function(e){return{padTop:{paddingTop:"70px"},formControl:{margin:e.spacing(1),minWidth:120}}})),nr=function(e){var t=e.competition,a=e.onChangeCompetition,r=(e.campaign,e.onChangeCampaign,e.onChangeYear),c=e.onChangeMonth,i=(e.isOfficial,e.year),l=e.month,s=z(),d="competitions/cotd"===t,j=n.a.useState(void 0),b=Object(o.a)(j,2),u=b[0],h=b[1],f=n.a.useState(void 0),m=Object(o.a)(f,2),O=m[0],x=m[1],p=n.a.useState("leaderboard"),g=Object(o.a)(p,2),y=g[0],v=g[1];n.a.useCallback((function(e){v(e.target.value)}),[v]);n.a.useEffect((function(){h(void 0),Dt.request("trackmania",d?"".concat(t,"/").concat(l,"-").concat(i):"".concat(t,"/").concat(i)).then((function(e){s.current&&h(e)})).catch((function(e){console.log(e),s.current&&h(null)}))}),[s,t,i,l]),n.a.useEffect((function(){x(void 0),Dt.request("trackmania","rankings/".concat(t.slice("competition/".length+1))).then((function(e){s.current&&x(e)})).catch((function(e){console.log(e),s.current&&x(null)}))}),[s,t]);y.replace("Leaderboard","CountryLeaderboard").replace("leaderboard","countryLeaderboard");var k=rr();return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsxs)(M.Fragment,{children:[Object(M.jsxs)(Ft.a,{className:k.formControl,children:[Object(M.jsx)(_t.a,{children:"Competition"}),Object(M.jsx)(At.a,{value:t,onChange:a,children:ar})]}),Object(M.jsxs)(Ft.a,{className:k.formControl,children:[Object(M.jsx)(_t.a,{children:"Year"}),Object(M.jsx)(At.a,{value:i,onChange:r,children:Ka})]}),d&&Object(M.jsxs)(Ft.a,{className:k.formControl,children:[Object(M.jsx)(_t.a,{children:"Month"}),Object(M.jsx)(At.a,{value:l,onChange:c,children:tr(i)})]})]}),null===u&&Object(M.jsx)(ht,{data:"No data."}),void 0===u&&Object(M.jsx)(pe.a,{}),Object(M.jsx)($.a,{container:!0,direction:"column",justify:"center",children:void 0!==u&&null!==u&&Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)($.a,{item:!0,xs:12,children:Object(M.jsx)(Ja,{data:u,stats:u.stats,official:u.isOfficial,cotd:d})}),Object(M.jsxs)($.a,{item:!0,xs:12,className:k.padTop,children:[Object(M.jsx)(C.a,{variant:"h5",children:"Overall Statistics"}),Object(M.jsx)("br",{}),null===O&&Object(M.jsx)(ht,{data:"No data."}),void 0===O&&Object(M.jsx)(pe.a,{}),void 0!==O&&null!==O&&Object(M.jsxs)($.a,{container:!0,direction:"row",justify:"center",alignContent:"center",children:[Object(M.jsx)($.a,{item:!0,xs:12,md:6,children:Object(M.jsx)(ta,{data:O.leaderboard,hasDuration:!1,cotd:!0,hattricks:d})}),Object(M.jsx)($.a,{item:!0,xs:12,md:6,className:k.padTop,children:Object(M.jsxs)($.a,{container:!0,direction:"column",justify:"center",children:[Object(M.jsx)($.a,{item:!0,xs:12,children:Object(M.jsx)(xt,{title:"Wins",labels:O.leaderboard.map((function(e){return e.user.displayName})),series:O.leaderboard.map((function(e){return e.wins.matches}))})}),Object(M.jsx)($.a,{item:!0,xs:12,className:k.padTop,children:Object(M.jsx)(xt,{title:"Wins by Zone",labels:O.countryLeaderboard.map((function(e){return(e.zone[2]?e.zone[2]:e.zone[0]).name})),series:O.countryLeaderboard.map((function(e){return e.wins.matches}))})})]})})]})]})]})})]})},cr=Object(b.a)((function(e){return{padTop:{paddingTop:"70px"},formControl:{margin:e.spacing(1),minWidth:120}}})),ir=function(){var e=z(),t=n.a.useState(void 0),a=Object(o.a)(t,2),r=a[0],c=a[1],i=n.a.useState("rankings/campaign"),l=Object(o.a)(i,2),s=l[0],d=l[1],j=n.a.useState("leaderboard"),b=Object(o.a)(j,2),u=b[0],h=b[1],f=n.a.useCallback((function(e){d(e.target.value)}),[d]),m=n.a.useCallback((function(e){h(e.target.value)}),[h]);n.a.useEffect((function(){c(void 0),Dt.request("trackmania",s).then((function(t){e.current&&c(t)})).catch((function(t){console.error(t),e.current&&c(null)}))}),[c,s,e]);var O=u.replace("Leaderboard","CountryLeaderboard").replace("leaderboard","countryLeaderboard"),x=cr();return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsxs)(Ft.a,{className:x.formControl,children:[Object(M.jsx)(_t.a,{children:"Campaign"}),Object(M.jsxs)(At.a,{value:s,onChange:f,children:[Object(M.jsx)(ka.a,{value:"rankings/campaign",children:"Official"}),Object(M.jsx)(ka.a,{value:"rankings/totd",children:"TOTD"}),Object(M.jsx)(ka.a,{value:"rankings/combined",children:"Combined"})]})]}),Object(M.jsxs)(Ft.a,{className:x.formControl,children:[Object(M.jsx)(_t.a,{children:"Rankings Type"}),Object(M.jsxs)(At.a,{value:u,onChange:m,children:[Object(M.jsx)(ka.a,{value:"leaderboard",children:"Live"}),Object(M.jsx)(ka.a,{value:"uniqueLeaderboard",children:"Unique"}),Object(M.jsx)(ka.a,{value:"historyLeaderboard",children:"Total"})]})]}),null===r&&Object(M.jsx)(ht,{data:"No data."}),void 0===r&&Object(M.jsx)(pe.a,{}),null!==r&&void 0!==r&&Object(M.jsxs)($.a,{container:!0,direction:"row",justify:"center",alignContent:"center",children:[Object(M.jsx)($.a,{item:!0,xs:12,md:6,children:Object(M.jsx)(ta,{data:r[u],hasDuration:"rankings/campaign"===s&&"uniqueLeaderboard"!==u})}),Object(M.jsx)($.a,{item:!0,xs:12,md:6,children:Object(M.jsxs)($.a,{container:!0,direction:"column",justify:"center",children:[Object(M.jsx)($.a,{item:!0,xs:12,className:x.padTop,children:"uniqueLeaderboard"===u?Object(M.jsx)(va,{title:"WRs",labels:r[u].map((function(e){return e.user.name})).slice(0,20),series:[{name:"Unique WRs",data:r[u].slice(0,20).map((function(e){return e.wrs}))}]}):Object(M.jsx)(xt,{title:"WRs",labels:r[u].map((function(e){return e.user.name})),series:r[u].map((function(e){return e.wrs}))})}),Object(M.jsx)($.a,{item:!0,xs:12,className:x.padTop,children:"uniqueLeaderboard"===u?Object(M.jsx)(va,{title:"WRs",labels:r[O].map((function(e){return(e.zone[2]?e.zone[2]:e.zone[0]).name})).slice(0,20),series:[{name:"Unique WRs by Zone",data:r[O].slice(0,20).map((function(e){return e.wrs}))}]}):Object(M.jsx)(xt,{title:"WRs by Zone",labels:r[O].map((function(e){return(e.zone[2]?e.zone[2]:e.zone[0]).name})),series:r[O].map((function(e){return e.wrs}))})})]})})]})]})},lr=Object(Oe.a)((function(e){var t=e.match,a=n.a.useState(0),r=Object(o.a)(a,2),c=r[0],i=r[1],l=n.a.useState(Ma(0===c)),s=Object(o.a)(l,2),d=s[0],j=s[1],b=n.a.useState(I()().year()),u=Object(o.a)(b,2),h=u[0],f=u[1],m=n.a.useState("competitions/cotd"),O=Object(o.a)(m,2),x=O[0],p=O[1],g=n.a.useState(I()().year()),y=Object(o.a)(g,2),v=y[0],k=y[1],w=n.a.useState(I()().format("MMMM").toLowerCase()),S=Object(o.a)(w,2),D=S[0],B=S[1],T=t.path;n.a.useEffect((function(){i(0)}),[T]);var N=n.a.useCallback((function(e){f(e.target.value),j(Ma(!1,e.target.value))}),[f,j]),z=n.a.useCallback((function(e){j(e.target.value)}),[j]),R=n.a.useCallback((function(e){p(e.target.value)}),[p]),L=n.a.useCallback((function(e){k(e.target.value),B(function(e){return(e&&e.toString()===Qa.year().toString()?Qa:$a).clone().format("MMMM").toLowerCase()}(e.target.value))}),[k]),P=n.a.useCallback((function(e){B(e.target.value)}),[B]);return Object(M.jsxs)(V,{children:[Object(M.jsxs)(F.a,{children:[Object(M.jsxs)(ye.a,{value:c,onChange:function(e,t){i(t),j(Ma(0===t,h))},indicatorColor:"primary",textColor:"primary",variant:"scrollable",scrollButtons:"auto",children:[Object(M.jsx)(ge.a,{label:"Campaign"}),Object(M.jsx)(ge.a,{label:"Track of the Day"}),Object(M.jsx)(ge.a,{label:"Rankings"}),Object(M.jsx)(ge.a,{label:"Competitions"})]}),Object(M.jsx)(C.a,{component:"div",role:"tabpanel",children:Object(M.jsxs)(xe.a,{p:3,children:[(0===c||1===c)&&Object(M.jsx)(Ya,{campaign:d,onChangeCampaign:z,onChangeYear:N,isOfficial:0===c,year:h}),2===c&&Object(M.jsx)(ir,{}),3===c&&Object(M.jsx)(nr,{competition:x,onChangeCompetition:R,campaign:d,onChangeCampaign:z,onChangeYear:L,onChangeMonth:P,isOfficial:0===c,year:v,month:D})]})})]}),Object(M.jsx)(St,{})]})})),or=[{id:"track.name",sortable:!0,label:"Track",align:"left"},{id:"score",sortable:!0,label:"Record",align:"left"},{id:"user.name",sortable:!0,label:"Player",align:"left"},{id:"date",sortable:!0,label:"Date",align:"left"},{id:"duration",sortable:!0,label:"Duration",align:"left"}],sr=function(e){var t=e.order,a=e.orderBy,r=e.onRequestSort;return Object(M.jsx)(G.a,{children:Object(M.jsx)(J.a,{children:or.map((function(e,n){return Object(M.jsxs)(Z.a,{align:e.align,padding:"default",sortDirection:a===e.id&&t,colSpan:n===or.length-1?2:1,children:[!0===e.sortable&&Object(M.jsx)(K.a,{title:"Sort by "+e.label,placement:"bottom-start",enterDelay:300,children:Object(M.jsx)(ve.a,{active:a===e.id,direction:t,onClick:(c=e.id,function(e){r(e,c)}),children:e.label})}),!1===e.sortable&&e.label]},n);var c}))})})},dr=Object(b.a)((function(e){return{root:{overflowX:"auto"}}})),jr={order:"asc",orderBy:"track.name",page:0,rowsPerPage:250},br={whiteSpace:"nowrap"},ur={padding:"7px 0px 7px 16px"},hr=function(e){return Object(M.jsx)(Z.a,Object(Y.a)({style:ur},e))},fr=Object(b.a)({root:{"& > *":{borderBottom:"unset"}}}),mr=function(e){var t=e.game,a=e.wr,r=e.trackType,n=Fe(a.score,t,r),c=0!==a.delta?Fe(a.delta,t,r):null,i="Stunts"===r?"+":"-",l=Te(t);return Object(M.jsxs)(J.a,{tabIndex:-1,children:[Object(M.jsx)(hr,{align:"left",children:Object(M.jsx)(K.a,{title:Object(M.jsx)(Ie.a,{format:"HH:mm",children:a.date}),placement:"bottom-end",enterDelay:300,children:Object(M.jsx)(Ie.a,{style:Object(Y.a)({color:He(a.date)},br),format:"YYYY-MM-DD",children:a.date})})}),Object(M.jsx)(hr,{align:"left",children:n}),Object(M.jsx)(hr,{align:"left",children:c?i+c:""}),Object(M.jsx)(hr,{align:"left",children:Object(M.jsx)(v.a,{style:br,color:"inherit",href:l.userUrl(a.user.id),rel:"noreferrer",target:"_blank",children:a.user.name})}),Object(M.jsx)(hr,{align:"left",children:Object(M.jsx)(K.a,{title:"Download Replay",placement:"bottom",enterDelay:300,children:Object(M.jsx)(y.a,{size:"small",style:br,color:"inherit",href:l.replayUrl(a.replay),rel:"noreferrer",target:"_blank",children:Object(M.jsx)(ia.a,{fontSize:"inherit"})})})})]})},Or=function(e){var t=e.game,a=e.wr,r=e.orderBy,n=e.useLiveDuration,c=e.history,i=e.onClickHistory,l=Fe(a.score,t,a.track.type),o=0!==a.delta?Fe(a.delta,t,a.track.type):null,s="Stunts"===a.track.type?"+":"-",d=fr(),j=c===a.track.id,b="track.name"===r,u=Te(t);return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsxs)(J.a,{tabIndex:-1,children:[(a.track.isFirst||!b)&&Object(M.jsx)(hr,{style:br,rowSpan:b?a.track.records:1,align:"left",children:Object(M.jsx)(v.a,{color:"inherit",href:u.trackUrl(a.track.id),rel:"noreferrer",target:"_blank",children:a.track.name})}),Object(M.jsxs)(hr,{align:"left",children:[o&&Object(M.jsx)(K.a,{title:Object(M.jsxs)("span",{children:[s,o," to former record"]}),placement:"bottom",enterDelay:300,children:Object(M.jsx)("span",{children:l})}),!o&&Object(M.jsx)("span",{children:l})]}),Object(M.jsx)(hr,{style:br,align:"left",children:Object(M.jsx)(v.a,{color:"inherit",href:u.userUrl(a.user.id),rel:"noreferrer",target:"_blank",children:a.user.name})}),Object(M.jsx)(hr,{align:"left",children:Object(M.jsx)(K.a,{title:Object(M.jsx)(Ie.a,{fromNow:!0,children:a.date}),placement:"bottom-end",enterDelay:300,children:Object(M.jsx)(Ie.a,{style:Object(Y.a)({color:He(a.date)},br),format:"YYYY-MM-DD",children:a.date})})}),Object(M.jsx)(hr,{align:"left",children:Object(M.jsx)(K.a,{title:"in days",placement:"bottom-end",enterDelay:300,children:n?Object(M.jsx)(Ie.a,{style:br,diff:a.date,unit:"days"}):Object(M.jsx)("span",{children:a.duration})})}),Object(M.jsxs)(hr,{style:br,align:"left",children:[Object(M.jsx)(K.a,{title:"Download Replay",placement:"bottom",enterDelay:300,children:Object(M.jsx)(y.a,{size:"small",style:br,color:"inherit",href:u.replayUrl(a.replay),rel:"noreferrer",target:"_blank",children:Object(M.jsx)(ia.a,{fontSize:"inherit"})})}),a.track.isLast&&a.track.history&&Object(M.jsx)(y.a,{color:"inherit",size:"small",style:br,onClick:function(){return i(a.track.id)},children:Object(M.jsx)(oa.a,{fontSize:"inherit"})})]})]}),a.track.isLast&&a.track.history&&Object(M.jsx)(J.a,{className:d.root,children:Object(M.jsx)(hr,{style:{paddingBottom:0,paddingTop:0},colSpan:7,children:Object(M.jsx)(na.a,{in:j,timeout:"auto",unmountOnExit:!0,children:Object(M.jsxs)(xe.a,{margin:1,children:[Object(M.jsx)(C.a,{variant:"h6",gutterBottom:!0,component:"div",children:"History"}),Object(M.jsxs)(H.a,{size:"small","aria-label":"purchases",children:[Object(M.jsx)(G.a,{children:Object(M.jsxs)(J.a,{children:[Object(M.jsx)(hr,{children:"Date"}),Object(M.jsx)(hr,{children:"Record"}),Object(M.jsx)(hr,{children:"Stunts"===a.track.type?"Improvement":"Timesave"}),Object(M.jsx)(hr,{colSpan:2,children:"Player"})]})}),Object(M.jsx)(X.a,{children:a.track.history.map((function(e,r){return Object(M.jsx)(mr,{game:t,wr:e,trackType:a.track.type},r)}))})]})]})})})})]})},xr=function(e){var t=e.game,a=e.data,r=e.stats,c=e.useLiveDuration,i=R(t,{order:"asc",orderBy:"track.name"}),l=Object(o.a)(i,2),s=l[0],d=l[1],j=n.a.useState(jr),b=Object(o.a)(j,2),u=b[0],h=u.order,f=u.rowsPerPage,m=u.page,O=u.orderBy,x=b[1],p=n.a.useState(null),g=Object(o.a)(p,2),y=g[0],v=g[1];n.a.useEffect((function(){x((function(e){return Object(Y.a)(Object(Y.a)({},e),{},{order:s.order,orderBy:s.orderBy})}))}),[a]);var k=n.a.useCallback((function(e){v(y!==e?e:null)}),[y,v]),w=dr();return Object(M.jsx)("div",{className:w.root,children:Object(M.jsxs)(H.a,{size:"small",children:[Object(M.jsx)(sr,{order:h,orderBy:O,onRequestSort:function(e,t){var a=t;x((function(e){var t=e.orderBy===a&&"desc"===e.order?"asc":"desc";return d(Object(Y.a)(Object(Y.a)({},s),{},{order:t,orderBy:a})),Object(Y.a)(Object(Y.a)({},e),{},{order:t,orderBy:a})}))}}),Object(M.jsx)(X.a,{children:we(a,h,O).slice(m*f,m*f+f).map((function(e,a){return Object(M.jsx)(Or,{game:t,wr:e,orderBy:O,useLiveDuration:c,history:y,onClickHistory:k},a)}))}),Object(M.jsxs)(X.a,{children:[r.totalTime>0&&Object(M.jsxs)(J.a,{children:[Object(M.jsx)(hr,{align:"right",children:"Total Time"}),Object(M.jsx)(hr,{children:Object(M.jsx)(K.a,{title:I.a.duration(r.totalTime,"ms").humanize(),placement:"bottom-end",enterDelay:300,children:Object(M.jsx)("span",{children:Fe(r.totalTime)})})}),Object(M.jsx)(hr,{colSpan:5})]}),r.totalPoints>0&&Object(M.jsxs)(J.a,{children:[Object(M.jsx)(hr,{align:"right",children:"Total Points"}),Object(M.jsx)(hr,{children:Object(M.jsx)("span",{children:Fe(r.totalPoints,t,"Stunts")})}),Object(M.jsx)(hr,{colSpan:3})]})]})]})})},pr=Object(b.a)((function(e){return{padTop:{paddingTop:"70px"},formControl:{margin:e.spacing(1),minWidth:120}}})),gr=function(e){var t=e.gameName,a=z(),r=n.a.useState(void 0),c=Object(o.a)(r,2),i=c[0],l=c[1],s=n.a.useState(void 0),d=Object(o.a)(s,2),j=d[0],b=d[1],u=n.a.useState("leaderboard"),h=Object(o.a)(u,1)[0],f=n.a.useCallback((function(e){b(e.target.value)}),[b]);n.a.useEffect((function(){l(void 0),Dt.request(t).then((function(e){var t,r=[],n=Object(fe.a)(e);try{for(n.s();!(t=n.n()).done;){var c,i=t.value,o=[],s=Object(fe.a)(i.tracks);try{for(s.s();!(c=s.n()).done;){var d,j=c.value,u=Object(fe.a)(j.wrs);try{for(u.s();!(d=u.n()).done;){var h=d.value,f=h===j.wrs[j.wrs.length-1],m=f&&(j.history||[]).length>1?j.history:void 0;o.push(Object(Y.a)({track:{id:j.id,name:j.name.replace(/(\$[0-9a-fA-F]{3}|\$[WNOITSGZBEMwnoitsgzbem]{1})/g,""),isFirst:h===j.wrs[0],isLast:f,records:j.wrs.length,history:m,type:j.type}},h))}}catch(O){u.e(O)}finally{u.f()}}}catch(O){s.e(O)}finally{s.f()}i.tracks=o,r.push(i)}}catch(O){n.e(O)}finally{n.f()}a.current&&(l(r),b(r[0].name))})).catch((function(e){console.log(e),a.current&&l(null)}))}),[a,t,b,l]);var m=pr(),O=i?i.find((function(e){return e.name===j})):void 0;return Object(M.jsxs)(M.Fragment,{children:[j&&i&&i.length>1&&Object(M.jsxs)(Ft.a,{className:m.formControl,children:[Object(M.jsx)(_t.a,{children:"Campaign"}),Object(M.jsx)(At.a,{value:j,onChange:f,children:i.map((function(e){return Object(M.jsx)(ka.a,{value:e.name,children:e.name},e.name)}))})]}),null===O&&Object(M.jsx)(ht,{data:"No data."}),void 0===O&&Object(M.jsx)(pe.a,{}),Object(M.jsx)($.a,{container:!0,direction:"column",justify:"center",children:void 0!==O&&null!==O&&Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)($.a,{item:!0,xs:12,children:Object(M.jsx)(xr,{game:t,data:O.tracks,stats:O.stats})}),Object(M.jsx)($.a,{item:!0,xs:12,className:m.padTop,children:Object(M.jsxs)($.a,{container:!0,direction:"row",justify:"center",alignContent:"center",children:[Object(M.jsx)($.a,{item:!0,xs:12,md:6,children:Object(M.jsx)(Ye,{game:t,data:O[h],hasDuration:"uniqueLeaderboard"!==h})}),Object(M.jsx)($.a,{item:!0,xs:12,md:6,className:m.padTop,children:Object(M.jsx)($.a,{container:!0,direction:"column",justify:"center",children:Object(M.jsx)($.a,{item:!0,xs:12,children:"uniqueLeaderboard"===h?Object(M.jsx)(va,{title:"WRs",labels:O[h].map((function(e){return e.user.name})).slice(0,20),series:[{name:"Unique WRs",data:O[h].slice(0,20).map((function(e){return e.wrs}))}]}):Object(M.jsx)(xt,{title:"WRs",labels:O[h].map((function(e){return e.user.name})),series:O[h].map((function(e){return e.wrs}))})})})})]})})]})})]})},yr=Object(b.a)((function(e){return{padTop:{paddingTop:"70px"},formControl:{margin:e.spacing(1),minWidth:120}}})),vr=function(e){var t=e.gameName,a=z(),r=n.a.useState(void 0),c=Object(o.a)(r,2),i=c[0],l=c[1],s=n.a.useState(void 0),d=Object(o.a)(s,2),j=d[0],b=d[1],u=n.a.useState("leaderboard"),h=Object(o.a)(u,2),f=h[0],m=h[1],O=n.a.useCallback((function(e){b(e.target.value)}),[b]),x=n.a.useCallback((function(e){m(e.target.value)}),[m]);n.a.useEffect((function(){l(void 0),Dt.request(t,"ranks").then((function(e){a.current&&(l(e),b(e[0].name))})).catch((function(e){console.error(e),a.current&&l(null)}))}),[l,a]);var p=yr(),g=i?i.find((function(e){return e.name===j})):void 0;return Object(M.jsxs)(M.Fragment,{children:[j&&i&&i.length>1&&Object(M.jsxs)(Ft.a,{className:p.formControl,children:[Object(M.jsx)(_t.a,{children:"Campaign"}),Object(M.jsx)(At.a,{value:j,onChange:O,children:i.map((function(e){return Object(M.jsx)(ka.a,{value:e.name,children:e.name},e.name)}))})]}),Object(M.jsxs)(Ft.a,{className:p.formControl,children:[Object(M.jsx)(_t.a,{children:"Rankings Type"}),Object(M.jsxs)(At.a,{value:f,onChange:x,children:[Object(M.jsx)(ka.a,{value:"leaderboard",children:"Live"}),Object(M.jsx)(ka.a,{value:"uniqueLeaderboard",children:"Unique"}),Object(M.jsx)(ka.a,{value:"historyLeaderboard",children:"Total"})]})]}),null===g&&Object(M.jsx)(ht,{data:"No data."}),void 0===g&&Object(M.jsx)(pe.a,{}),null!==g&&void 0!==g&&Object(M.jsxs)($.a,{container:!0,direction:"row",justify:"center",alignContent:"center",children:[Object(M.jsx)($.a,{item:!0,xs:12,md:6,children:Object(M.jsx)(Ye,{game:t,data:g[f],hasDuration:"uniqueLeaderboard"!==f})}),Object(M.jsx)($.a,{item:!0,xs:12,md:6,children:Object(M.jsx)($.a,{container:!0,direction:"column",justify:"center",children:Object(M.jsx)($.a,{item:!0,xs:12,className:p.padTop,children:"uniqueLeaderboard"===f?Object(M.jsx)(va,{title:"WRs",labels:g[f].map((function(e){return e.user.name})).slice(0,20),series:[{name:"Unique WRs",data:g[f].slice(0,20).map((function(e){return e.wrs}))}]}):Object(M.jsx)(xt,{title:"WRs",labels:g[f].map((function(e){return e.user.name})),series:g[f].map((function(e){return e.wrs}))})})})})]})]})},kr=[{id:"track.name",sortable:!1,label:"Map",align:"left"},{id:"score",sortable:!1,label:"Times",label2:"Scores",align:"left"},{id:"delta",sortable:!1,label:"Timesave",label2:"Improvement",align:"left"},{id:"user.name",sortable:!1,label:"Player",align:"left"},{id:"duration",sortable:!1,label:"Duration",align:"left"},{id:"date",sortable:!1,label:"Start",align:"left"},{id:"beatenBy.date",sortable:!1,label:"Ended",align:"left"},{id:"beatenBy.user.name",sortable:!1,label:"Beaten By",align:"left"}],wr=function(e){var t=e.order,a=e.orderBy,r=e.onRequestSort,n=e.scoreType;return Object(M.jsx)(G.a,{children:Object(M.jsx)(J.a,{children:kr.map((function(e){return Object(M.jsxs)(Z.a,{align:e.align,padding:"default",sortDirection:a===e.id&&t,children:[!0===e.sortable&&Object(M.jsx)(K.a,{title:"Sort by "+e.label,placement:"bottom-start",enterDelay:300,children:Object(M.jsx)(ve.a,{active:a===e.id,direction:t,onClick:(c=e.id,i=e.id2,function(e){r(e,c,i)}),children:"Stunts"===n&&e.label2?e.label2:e.label})}),!1===e.sortable&&e.label]},e.id);var c,i}))})})},Sr=Object(b.a)((function(e){return{root:{overflowX:"auto"}}})),Dr={order:"desc",orderBy:"duration",thenBy:"date",page:0,rowsPerPage:50},Br={whiteSpace:"nowrap"},Cr={padding:"7px 0px 7px 16px"},Tr=function(e){return Object(M.jsx)(Z.a,Object(Y.a)({style:Cr},e))},Nr=function(e){var t=e.game,a=e.data,r=e.scoreType,c=n.a.useState(Object(Y.a)({},Dr)),i=Object(o.a)(c,2),l=i[0],s=l.order,d=l.orderBy,j=l.thenBy,b=i[1],u=Sr(),h=Te(t);return Object(M.jsx)("div",{className:u.root,children:Object(M.jsxs)(H.a,{size:"small",children:[Object(M.jsx)(wr,{order:s,orderBy:d,onRequestSort:function(e,t,a){var r=t,n=a;b((function(e){return Object(Y.a)(Object(Y.a)({},e),{},{order:e.orderBy===r&&"desc"===e.order?"asc":"desc",orderBy:r,thenBy:n})}))},scoreType:r}),Object(M.jsx)(X.a,{children:Se(a,s,d,j).map((function(e){return Object(M.jsxs)(J.a,{tabIndex:-1,children:[Object(M.jsx)(Tr,{style:Br,align:"left",children:Object(M.jsx)(v.a,{color:"inherit",href:h.trackUrl(e.track.id),rel:"noreferrer",target:"_blank",children:e.track.name})}),Object(M.jsxs)(Tr,{align:"left",style:Br,children:[Fe(e.score,t,e.track.type)," \u2192"," ",Fe(e.lastScore,t,e.track.type)]}),Object(M.jsxs)(Tr,{align:"left",children:["Stunts"===e.track.type?"+":"-",Fe(Math.abs(e.lastScore-e.score),t,e.track.type)]}),Object(M.jsx)(Tr,{style:Br,align:"left",children:Object(M.jsx)(v.a,{color:"inherit",href:h.userUrl(e.user.id),rel:"noreferrer",target:"_blank",children:e.user.name})}),Object(M.jsx)(Tr,{align:"left",children:Object(M.jsx)(K.a,{title:"in days",placement:"bottom-end",enterDelay:300,children:Object(M.jsx)("span",{children:e.duration})})}),Object(M.jsx)(Tr,{align:"left",children:Object(M.jsx)(K.a,{title:Object(M.jsx)(Ie.a,{fromNow:!0,children:e.date}),placement:"bottom-end",enterDelay:300,children:Object(M.jsx)(Ie.a,{style:Object(Y.a)({color:He(e.date)},Br),format:"YYYY-MM-DD",children:e.date})})}),Object(M.jsx)(Tr,{align:"left",children:e.beatenBy.length>0?Object(M.jsx)(K.a,{title:Object(M.jsx)(Ie.a,{fromNow:!0,children:e.beatenBy[0].date}),placement:"bottom-end",enterDelay:300,children:Object(M.jsx)(Ie.a,{style:Object(Y.a)({color:He(e.beatenBy[0].date)},Br),format:"YYYY-MM-DD",children:e.beatenBy[0].date})}):Object(M.jsx)("span",{children:"ongoing"})}),Object(M.jsx)(Tr,{style:Br,align:"left",children:e.beatenBy.length>0?Object(M.jsx)(v.a,{color:"inherit",href:h.userUrl(e.beatenBy[0].user.id),rel:"noreferrer",target:"_blank",children:e.beatenBy[0].user.name}):Object(M.jsx)("span",{children:"unbeaten"})})]},e.replay)}))})]})})},zr=[{id:"track.name",sortable:!1,label:"Map",align:"left"},{id:"score",sortable:!1,label:"Time",label2:"Score",align:"left"},{id:"user.name",sortable:!1,label:"Player",align:"left"},{id:"duration",sortable:!1,label:"Duration",align:"left"},{id:"date",sortable:!1,label:"Start",align:"left"},{id:"beatenBy.date",sortable:!1,label:"Ended",align:"left"},{id:"beatenBy.user.name",sortable:!1,label:"Beaten By",align:"left"}],Rr=function(e){var t=e.order,a=e.orderBy,r=e.onRequestSort,n=e.scoreType;return Object(M.jsx)(G.a,{children:Object(M.jsx)(J.a,{children:zr.map((function(e){return Object(M.jsxs)(Z.a,{align:e.align,padding:"default",sortDirection:a===e.id&&t,children:[!0===e.sortable&&Object(M.jsx)(K.a,{title:"Sort by "+e.label,placement:"bottom-start",enterDelay:300,children:Object(M.jsx)(ve.a,{active:a===e.id,direction:t,onClick:(c=e.id,i=e.id2,function(e){r(e,c,i)}),children:"Stunts"===n&&e.label2?e.label2:e.label})}),!1===e.sortable&&e.label]},e.id);var c,i}))})})},Mr=Object(b.a)((function(e){return{root:{overflowX:"auto"}}})),Lr={order:"desc",orderBy:"duration",thenBy:"date",page:0,rowsPerPage:50},Pr={whiteSpace:"nowrap"},qr={padding:"7px 0px 7px 16px"},Yr=function(e){return Object(M.jsx)(Z.a,Object(Y.a)({style:qr},e))},Ur=function(e){var t=e.game,a=e.data,r=e.scoreType,c=n.a.useState(Object(Y.a)({},Lr)),i=Object(o.a)(c,2),l=i[0],s=l.order,d=l.orderBy,j=l.thenBy,b=i[1],u=Mr(),h=Te(t);return Object(M.jsx)("div",{className:u.root,children:Object(M.jsxs)(H.a,{size:"small",children:[Object(M.jsx)(Rr,{order:s,orderBy:d,onRequestSort:function(e,t,a){var r=t,n=a;b((function(e){return Object(Y.a)(Object(Y.a)({},e),{},{order:e.orderBy===r&&"desc"===e.order?"asc":"desc",orderBy:r,thenBy:n})}))},scoreType:r}),Object(M.jsx)(X.a,{children:Se(a,s,d,j).map((function(e){return Object(M.jsxs)(J.a,{tabIndex:-1,children:[Object(M.jsx)(Yr,{style:Pr,align:"left",children:Object(M.jsx)(v.a,{color:"inherit",href:h.trackUrl(e.track.id),rel:"noreferrer",target:"_blank",children:e.track.name})}),Object(M.jsx)(Yr,{align:"left",children:Fe(e.score,t,e.track.type)}),Object(M.jsx)(Yr,{style:Pr,align:"left",children:Object(M.jsx)(v.a,{color:"inherit",href:h.userUrl(e.user.id),rel:"noreferrer",target:"_blank",children:e.user.name})}),Object(M.jsx)(Yr,{align:"left",children:Object(M.jsx)(K.a,{title:"in days",placement:"bottom-end",enterDelay:300,children:Object(M.jsx)("span",{children:e.duration})})}),Object(M.jsx)(Yr,{align:"left",children:Object(M.jsx)(K.a,{title:Object(M.jsx)(Ie.a,{fromNow:!0,children:e.date}),placement:"bottom-end",enterDelay:300,children:Object(M.jsx)(Ie.a,{style:Object(Y.a)({color:He(e.date)},Pr),format:"YYYY-MM-DD",children:e.date})})}),Object(M.jsx)(Yr,{align:"left",children:e.beatenBy.length>0?Object(M.jsx)(K.a,{title:Object(M.jsx)(Ie.a,{fromNow:!0,children:e.beatenBy[0].date}),placement:"bottom-end",enterDelay:300,children:Object(M.jsx)(Ie.a,{style:Object(Y.a)({color:He(e.beatenBy[0].date)},Pr),format:"YYYY-MM-DD",children:e.beatenBy[0].date})}):Object(M.jsx)("span",{children:"ongoing"})}),Object(M.jsx)(Yr,{style:Pr,align:"left",children:e.beatenBy.length>0?Object(M.jsx)(v.a,{color:"inherit",href:h.userUrl(e.beatenBy[0].user.id),rel:"noreferrer",target:"_blank",children:e.beatenBy[0].user.name}):Object(M.jsx)("span",{children:"unbeaten"})})]},e.replay)}))})]})})},Ir=[{id:"track.name",sortable:!1,label:"Map",align:"left"},{id:"score",sortable:!1,label:"Time",label2:"Score",align:"left"},{id:"user.name",sortable:!1,label:"Player",align:"left"},{id:"delta",sortable:!1,label:"Improvement",align:"left"},{id:"date",sortable:!1,label:"Date",align:"left"}],Wr=function(e){var t=e.order,a=e.orderBy,r=e.onRequestSort,n=e.scoreType;return Object(M.jsx)(G.a,{children:Object(M.jsx)(J.a,{children:Ir.map((function(e){return Object(M.jsxs)(Z.a,{align:e.align,padding:"default",sortDirection:a===e.id&&t,children:[!0===e.sortable&&Object(M.jsx)(K.a,{title:"Sort by "+e.label,placement:"bottom-start",enterDelay:300,children:Object(M.jsx)(ve.a,{active:a===e.id,direction:t,onClick:(c=e.id,i=e.id2,function(e){r(e,c,i)}),children:"Stunts"===n&&e.label2?rowl.label2:e.label})}),!1===e.sortable&&e.label]},e.id);var c,i}))})})},Er=Object(b.a)((function(e){return{root:{overflowX:"auto"}}})),_r={order:"desc",orderBy:"delta",thenBy:"date",page:0,rowsPerPage:50},Fr={whiteSpace:"nowrap"},Ar={padding:"7px 0px 7px 16px"},Hr=function(e){return Object(M.jsx)(Z.a,Object(Y.a)({style:Ar},e))},Xr=function(e){var t=e.game,a=e.data,r=e.scoreType,c=n.a.useState(Object(Y.a)({},_r)),i=Object(o.a)(c,2),l=i[0],s=l.order,d=l.orderBy,j=l.thenBy,b=i[1],u=Er(),h=Te(t);return Object(M.jsx)("div",{className:u.root,children:Object(M.jsxs)(H.a,{size:"small",children:[Object(M.jsx)(Wr,{order:s,orderBy:d,onRequestSort:function(e,t,a){var r=t,n=a;b((function(e){return Object(Y.a)(Object(Y.a)({},e),{},{order:e.orderBy===r&&"desc"===e.order?"asc":"desc",orderBy:r,thenBy:n})}))},scoreType:r}),Object(M.jsx)(X.a,{children:Se(a,s,d,j).map((function(e){return Object(M.jsxs)(J.a,{tabIndex:-1,children:[Object(M.jsx)(Hr,{style:Fr,align:"left",children:Object(M.jsx)(v.a,{color:"inherit",href:h.trackUrl(e.track.id),rel:"noreferrer",target:"_blank",children:e.track.name})}),Object(M.jsx)(Hr,{align:"left",children:Fe(e.score,t,e.track.type)}),Object(M.jsx)(Hr,{style:Fr,align:"left",children:Object(M.jsx)(v.a,{color:"inherit",href:h.userUrl(e.user.id),rel:"noreferrer",target:"_blank",children:e.user.name})}),Object(M.jsx)(Hr,{align:"left",children:Object(M.jsxs)("span",{children:["Stunts"===e.track.type?"+":"-",Fe(e.delta,t,e.track.type)]})}),Object(M.jsx)(Hr,{align:"left",children:Object(M.jsx)(K.a,{title:Object(M.jsx)(Ie.a,{fromNow:!0,children:e.date}),placement:"bottom-end",enterDelay:300,children:Object(M.jsx)(Ie.a,{style:Object(Y.a)({color:He(e.date)},Fr),format:"YYYY-MM-DD",children:e.date})})})]},e.replay)}))})]})})},Zr=Object(b.a)((function(e){return{padTop:{paddingTop:"70px"},formControl:{margin:e.spacing(1),minWidth:120}}})),Gr=function(e){var t=e.gameName,a=z(),r=n.a.useState(void 0),c=Object(o.a)(r,2),i=c[0],l=c[1],s=n.a.useState(void 0),d=Object(o.a)(s,2),j=d[0],b=d[1],u=n.a.useState("longestLasting"),h=Object(o.a)(u,2),f=h[0],m=h[1],O=n.a.useState("Race"),x=Object(o.a)(O,2),p=x[0],g=x[1],y=n.a.useCallback((function(e){m(e.target.value)}),[m]),v=n.a.useCallback((function(e){g(e.target.value)}),[g]),k=n.a.useCallback((function(e){b(e.target.value),g(i?i.find((function(t){return t.name===e.target.value}))[f][0].track.type:"Race")}),[i,b,g]);n.a.useEffect((function(){l(void 0),Dt.request(t,"stats").then((function(e){a.current&&(l(e),b(e[0].name),g(e[0][f][0].track.type))})).catch((function(e){console.error(e),a.current&&l(null)}))}),[l,b,g,a]);var w=function(){switch(f){case"longestDomination":return Nr;case"longestLasting":return Ur;case"largestImprovement":return Xr;default:return null}}(),S=Zr(),D=i?i.find((function(e){return e.name===j})):void 0;return Object(M.jsxs)(M.Fragment,{children:[j&&i&&i.length>1&&Object(M.jsxs)(Ft.a,{className:S.formControl,children:[Object(M.jsx)(_t.a,{children:"Campaign"}),Object(M.jsx)(At.a,{value:j,onChange:k,children:i.map((function(e){return Object(M.jsx)(ka.a,{value:e.name,children:e.name},e.name)}))})]}),Object(M.jsxs)(Ft.a,{className:S.formControl,children:[Object(M.jsx)(_t.a,{children:"Stats Type"}),Object(M.jsxs)(At.a,{value:f,onChange:y,children:[Object(M.jsx)(ka.a,{value:"longestLasting",children:"Longest Lasting"}),Object(M.jsx)(ka.a,{value:"longestDomination",children:"Longest Domination"}),Object(M.jsx)(ka.a,{value:"largestImprovement",children:"Largest Improvement"})]})]}),D&&new Set(D[f].map((function(e){return e.track.type}))).size>1&&Object(M.jsxs)(Ft.a,{className:S.formControl,children:[Object(M.jsx)(_t.a,{children:"Track Type"}),Object(M.jsxs)(At.a,{value:p,onChange:v,children:[Object(M.jsx)(ka.a,{value:"Race",children:"Race"}),Object(M.jsx)(ka.a,{value:"Stunts",children:"Stunts"})]})]}),null===D&&Object(M.jsx)(ht,{data:"No data."}),void 0===D&&Object(M.jsx)(pe.a,{}),null!==D&&void 0!==D&&Object(M.jsx)($.a,{container:!0,direction:"column",justify:"center",children:Object(M.jsx)($.a,{item:!0,xs:12,children:Object(M.jsx)($.a,{container:!0,direction:"row",justify:"center",alignContent:"center",children:Object(M.jsx)($.a,{item:!0,xs:12,children:D&&D[f]&&Object(M.jsx)(w,{game:t,data:D[f].filter((function(e){return e.track.type===p})),trackType:p})})})})})]})},Jr=Object(Oe.a)((function(e){var t=e.match,a=n.a.useState(0),r=Object(o.a)(a,2),c=r[0],i=r[1],l=t.path;n.a.useEffect((function(){i(0)}),[l]);var s=t.path.slice(1);return Object(M.jsxs)(V,{children:[Object(M.jsxs)(F.a,{children:[Object(M.jsxs)(ye.a,{value:c,onChange:function(e,t){i(t)},indicatorColor:"primary",textColor:"primary",variant:"scrollable",scrollButtons:"auto",children:[Object(M.jsx)(ge.a,{label:"Campaign"}),Object(M.jsx)(ge.a,{label:"Rankings"}),Object(M.jsx)(ge.a,{label:"Statistics"})]}),Object(M.jsx)(C.a,{component:"div",role:"tabpanel",children:Object(M.jsxs)(xe.a,{p:3,children:[0===c&&Object(M.jsx)(gr,{gameName:s}),1===c&&Object(M.jsx)(vr,{gameName:s}),2===c&&Object(M.jsx)(Gr,{gameName:s})]})})]}),Object(M.jsx)(St,{})]})})),Kr=Object(b.a)((function(e){return{views:{marginTop:e.spacing(5)}}})),$r=function(){var e=n.a.useReducer.apply(n.a,Object(l.a)(re)),t=Object(o.a)(e,2),a=t[0],r=t[1],c=n.a.useMemo((function(){return Object(m.a)({palette:{primary:{light:h.a[300],main:h.a[500],dark:h.a[700]},secondary:{light:f.a[300],main:f.a[500],dark:f.a[700]},error:{main:h.a.A400},type:a.darkMode.enabled?"dark":"light"}})}),[a.darkMode.enabled]),i=Kr(),b=n.a.useMemo((function(){return{state:a,dispatch:r}}),[a,r]);return Object(M.jsxs)(u.a,{theme:c,children:[Object(M.jsx)(j.a,{}),Object(M.jsx)(ne.Provider,{value:b,children:Object(M.jsxs)(s.a,{children:[Object(M.jsx)(q,{}),Object(M.jsx)("div",{className:i.views,children:Object(M.jsxs)(d.d,{children:[Object(M.jsx)(d.a,{exact:!0,from:"/",to:"/trackmania"}),Object(M.jsx)(d.a,{exact:!0,from:"/tm",to:"/trackmania"}),Object(M.jsx)(d.a,{exact:!0,from:"/wii",to:"/tmwii"}),Object(M.jsx)(d.a,{exact:!0,from:"/tmo",to:"/original"}),Object(M.jsx)(d.a,{exact:!0,from:"/tmn",to:"/nations"}),Object(M.jsx)(d.a,{exact:!0,from:"/tms",to:"/sunrise"}),Object(M.jsx)(d.a,{exact:!0,from:"/tmnf",to:"/tmnforever"}),Object(M.jsx)(d.b,{exact:!0,path:"/trackmania",component:lr}),Object(M.jsx)(d.b,{exact:!0,path:"/tmnforever",component:Jr}),Object(M.jsx)(d.b,{exact:!0,path:"/united",component:Jr}),Object(M.jsx)(d.b,{exact:!0,path:"/(nations|original|sunrise|tm2|tmwii)/:date?",component:Ct}),Object(M.jsx)(d.b,{exact:!0,path:"/about",component:be}),Object(M.jsx)(d.b,{exact:!0,path:"/replay",component:It}),Object(M.jsx)(d.b,{component:Tt})]})})]})})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(M.jsx)($r,{}),document.querySelector("#root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[180,1,2]]]);
//# sourceMappingURL=main.6284e2df.chunk.js.map